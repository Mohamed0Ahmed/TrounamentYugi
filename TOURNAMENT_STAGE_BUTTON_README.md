# زر مراحل البطولة الديناميكي

## نظرة عامة
تم إضافة زر ديناميكي جديد في صفحة المشرفين (Admin) للتحكم في مراحل البطولة من نوع Groups. هذا الزر يتغير اسمه ووظيفته حسب المرحلة الحالية للبطولة.

## الموقع
- **الصفحة**: `src/app/admin/players/players.component.html`
- **الملف TypeScript**: `src/app/admin/players/players.component.ts`
- **الموقع في الصفحة**: بجانب أزرار "Start New League" و "End League"

## شروط ظهور الزر
- يظهر فقط للبطولات من نوع **Groups** (`LeagueType.Groups = 2`)
- يظهر فقط عندما تكون هناك بطولة نشطة (`leagueData != null`)

## حالات الزر المختلفة

### 1. بدء مرحلة المجموعات
- **النص**: "Start Group Stage"
- **الشرط**: وجود لاعبين في البطولة ولكن لا توجد مباريات
- **الوظيفة**: ينادي `createGroupsAndMatches()` API

### 2. بدء دور ربع النهائي
- **النص**: "Start Quarter"
- **الشرط**: وجود مباريات من نوع GroupStage ولكن لا توجد مباريات QuarterFinals
- **الوظيفة**: ينادي `startKnockoutStage()` API

### 3. بدء دور نصف النهائي
- **النص**: "Start Semi Final"
- **الشرط**: وجود مباريات من نوع QuarterFinals ولكن لا توجد مباريات SemiFinals
- **الوظيفة**: ينادي `startSemiFinals()` API

### 4. بدء النهائي
- **النص**: "Start Final"
- **الشرط**: وجود مباريات من نوع SemiFinals ولكن لا توجد مباريات Final
- **الوظيفة**: ينادي `startFinal()` API

### 5. إخفاء الزر
- **الشرط**: وجود مباريات من نوع Final
- **السبب**: البطولة وصلت للمرحلة النهائية

## التحديثات التلقائية
الزر يتم تحديث حالته تلقائياً عند:
- تحميل بيانات البطولة
- إضافة أو حذف لاعبين
- تحديث المباريات
- تغيير حالة البطولة

## الألوان والتصميم
- **اللون الأساسي**: بنفسجي (`bg-purple-600`)
- **اللون عند التمرير**: بنفسجي داكن (`hover:bg-purple-700`)
- **التصميم**: متناسق مع باقي الأزرار في الصفحة

## API Endpoints المستخدمة
1. `POST /league/{leagueId}/create-groups` - إنشاء المجموعات
2. `POST /league/{leagueId}/start-knockouts` - بدء ربع النهائي
3. `POST /league/{leagueId}/start-semi-finals` - بدء نصف النهائي
4. `POST /league/{leagueId}/start-final` - بدء النهائي

## معالجة الأخطاء
- يتم عرض رسائل نجاح/خطأ باستخدام Toastr
- في حالة حدوث خطأ، يتم عرض رسالة مناسبة للمستخدم
- يتم تسجيل الأخطاء في Console للتطوير

## التطوير المستقبلي
- إمكانية إضافة تأكيد قبل تنفيذ كل مرحلة
- إضافة مؤشرات بصرية لحالة كل مرحلة
- إمكانية التراجع عن مرحلة معينة 
