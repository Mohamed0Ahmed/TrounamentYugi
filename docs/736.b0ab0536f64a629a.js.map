{"version":3,"file":"736.b0ab0536f64a629a.js","mappings":"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","names":["DateFilter","Today","Last3Days","LastWeek","LastMonth","AllTime","FRIENDLY_MATCH_ENDPOINTS","GET_ALL_PLAYERS","GET_PLAYER_BY_ID","id","ADD_PLAYER","DELETE_PLAYER","DEACTIVATE_PLAYER","GET_PLAYERS_RANKING","GET_PLAYER_STATS","GET_ALL_MATCHES","GET_MATCHES_BETWEEN_PLAYERS","player1Id","player2Id","RECORD_MATCH","DELETE_MATCH","UPDATE_MATCH","GET_OVERALL_SCORE","GET_FILTERED_MATCHES","GET_PLAYER_MATCHES","playerId","GET_PLAYER_VS_OPPONENTS","GET_ALL_SHUTOUTS","GET_SHUTOUTS_BY_PLAYER","GET_SHUTOUT_BY_MATCH","matchId","DELETE_SHUTOUT","shutoutId","GET_FILTERED_SHUTOUTS","GET_PLAYER_SHUTOUTS_FILTERED","GET_PLAYERS_SHUTOUTS_FILTERED","TEST","FRIENDLY_MESSAGE_ENDPOINTS","SEND_MESSAGE","GET_PLAYER_MESSAGES","GET_ALL_MESSAGES","GET_UNREAD_MESSAGES","GET_READ_MESSAGES","GET_PLAYER_CONVERSATION","SEND_ADMIN_REPLY","MARK_MESSAGE_READ","messageId","MARK_ALL_PLAYER_MESSAGES_READ","DELETE_MESSAGE","GET_UNREAD_COUNT","GET_PLAYER_UNREAD_COUNT","calculateUnreadCount","messages","filter","msg","isRead","isFromAdmin","length","FriendlyMatchService","constructor","http","cacheService","this","baseUrl","environment","apiUrl","getAllFriendlyPlayers","cachePlayerRequest","get","getFriendlyPlayersRanking","getFriendlyPlayerStats","url","getPlayersStatistics","addFriendlyPlayerAsync","fullName","post","deleteFriendlyPlayerAsync","delete","deactivateFriendlyPlayerAsync","put","getAllFriendlyMatches","getFriendlyMatchesBetweenPlayers","recordFriendlyMatchAsync","matchData","updateFriendlyMatchAsync","deleteFriendlyMatchAsync","getOverallScoreBetweenPlayers","getAllShutoutResults","getShutoutResultsByPlayer","getShutoutResultByMatch","getFilteredMatches","params","getPlayerMatches","getPlayerVsOpponentsMatches","opponentIds","testConnection","refreshFriendlyPlayers","remove","refreshFriendlyMatches","refreshFriendlyShutouts","i0","i1","i2","factory","ɵfac","providedIn","FriendlyMessageService","sendMessageToAdmin","content","getPlayerMessages","getAllMessages","getUnreadMessages","getReadMessages","getPlayerConversation","sendAdminReply","Error","markMessageAsRead","marked","markAllPlayerMessagesAsRead","deleteMessage","getUnreadMessagesCount","getPlayerUnreadMessagesCount","MultiTournamentService","createTournament","request","updateTournamentStatus","deleteTournament","createTeam","tournamentId","updateTeam","teamId","replacePlayer","recordMatchResult","undoMatchResult","getTournamentMatches","getActiveTournamentMatches","getAllPlayers","getPlayerById","addNewPlayer","getActiveTournament","pipe","map","response","success","data","status","message","getAllTournaments","getTournament","getTournamentStandings","startTournament","finishTournament","TournamentStage","League","GroupStage","QuarterFinals","SemiFinals","Final","SystemOfLeague","Points","Classic","LeagueType","Single","Multi","Groups","TournamentInfoComponent_div_0_div_2_Template","ctx_r0","isGroupsTournament","TournamentInfoComponent","leagueService","toastr","currentLeague","ngOnInit","loadCurrentLeague","GetCurrentLeague","subscribe","next","league","error","err","console","getLeagueTypeText","typeOfLeague","getSystemOfLeagueText","systemOfLeague","String","getFormattedDate","createdOn","Date","toLocaleDateString","year","month","day","getTournamentStatus","isFinished","text","color","selectors","decls","vars","consts","template","rf","ctx","TournamentInfoComponent_div_0_Template","TournamentInfoComponent_div_1_Template","player_r6","_r8","$implicit","ctx_r7","highlightColumn","ctx_r4","highlightedColumn","ctx_r15","getMatchResult","player2_r12","player1_r9","result","ctx_r17","getClassicResult","GroupsMatchesTableComponent_div_2_div_2_tr_12_td_1_span_2_ng_container_1_Template","GroupsMatchesTableComponent_div_2_div_2_tr_12_td_1_span_2_ng_template_2_Template","ctx_r14","_r16","GroupsMatchesTableComponent_div_2_div_2_tr_12_td_1_span_1_Template","GroupsMatchesTableComponent_div_2_div_2_tr_12_td_1_span_2_Template","_c0","ctx_r11","GroupsMatchesTableComponent_div_2_div_2_tr_12_td_1_Template","i_r10","ctx_r5","getGroupedPlayers","groupNumber_r3","GroupsMatchesTableComponent_div_2_div_2_th_8_Template","GroupsMatchesTableComponent_div_2_div_2_tr_12_Template","ctx_r2","GroupsMatchesTableComponent_div_2_div_2_Template","getGroupNumbers","GroupsMatchesTableComponent","playerService","matchService","players","matches","started","loadPlayers","loadMatches","loadLeagueSystem","getrank","getMatches","every","match","score1","score2","res","groupedPlayers","forEach","player","groupNumber","push","Object","keys","key","parseInt","sort","a","b","hasGroupedPlayers","player1","player2","find","m","player1Name","player2Name","player1Score","player2Score","colorClass","i3","i4","GroupsMatchesTableComponent_div_2_Template","GroupsMatchesTableComponent_div_3_Template","player_r5","i_r6","ctx_r3","LeagueTableComponent_div_5_tr_8_td_1_span_2_ng_container_1_Template","LeagueTableComponent_div_5_tr_8_td_1_span_2_ng_template_2_Template","LeagueTableComponent_div_5_tr_8_td_1_span_1_Template","LeagueTableComponent_div_5_tr_8_td_1_span_2_Template","LeagueTableComponent_div_5_tr_8_td_1_Template","LeagueTableComponent_div_5_th_4_Template","LeagueTableComponent_div_5_tr_8_Template","LeagueTableComponent","getPlayers","coerceSystemType","value","v","toLowerCase","onClickOutside","event","table","document","querySelector","contains","target","hostBindings","$event","LeagueTableComponent_div_3_Template","LeagueTableComponent_app_groups_matches_table_4_Template","LeagueTableComponent_div_5_Template","BracketTreeComponent_div_3_div_4_span_4_Template","BracketTreeComponent_div_3_div_4_span_10_Template","match_r5","isCompleted","BracketTreeComponent_div_3_div_4_Template","ctx_r1","quarterFinals","BracketTreeComponent_div_5_div_4_span_4_Template","BracketTreeComponent_div_5_div_4_span_10_Template","match_r9","BracketTreeComponent_div_5_div_4_Template","semiFinals","BracketTreeComponent_div_7_span_8_Template","BracketTreeComponent_div_7_span_14_Template","tmp_0_0","final","undefined","tmp_2_0","BracketTreeComponent","signal","loadKnockoutMatches","ngOnChanges","changes","leagueId","set","GetAllLeaguesRank","leagues","l","allMatches","knockoutMatches","index","self","stage","tournamentStage","isKnockout","isDuplicate","findIndex","processKnockoutMatches","quarterFinalsMatches","semiFinalsMatches","finalMatch","shuffleMatches","Math","random","hasQuarterFinals","hasSemiFinals","hasFinal","inputs","standalone","features","BracketTreeComponent_div_1_Template","BracketTreeComponent_div_3_Template","BracketTreeComponent_div_5_Template","BracketTreeComponent_div_7_Template","CommonModule","styles","rank","points","wins","draws","losses","matchesPlayed","GroupsTableComponent_div_2_div_2_tr_23_Template","GroupsTableComponent_div_2_div_2_Template","GroupsTableComponent","groupKey","GroupsTableComponent_div_2_Template","GroupsTableComponent_div_3_Template","i_r5","currentGroupIndex","isGroupCompleted","group_r4","isGroupAnimating","i_r8","ctx_r6","currentRevealedPlayer","player_r7","GroupDrawAnimationComponent_div_6_div_3_div_5_Template","getCurrentGroup","tmp_1_0","GroupDrawAnimationComponent_div_6_div_2_Template","GroupDrawAnimationComponent_div_6_div_3_Template","animationGroups","GroupDrawAnimationComponent","animationComplete","EventEmitter","showBalls","setupAnimation","startAnimation","animationState","_this","_asyncToGenerator","delay","i","animateGroup","emit","group","_this2","ms","Promise","resolve","setTimeout","g","outputs","GroupDrawAnimationComponent_div_6_Template","GroupDrawAnimationComponent_div_8_Template","_r5","onDrawAnimationComplete","RankingComponent_div_5_div_2_tr_22_i_2_Template","player_r9","winRate","RankingComponent_div_5_div_2_tr_22_Template","RankingComponent_div_5_app_groups_table_1_Template","RankingComponent_div_5_div_2_Template","RankingComponent","last","showDrawAnimation","updateDrawAnimationState","hasGroups","some","noMatchesPlayed","RankingComponent_div_3_Template","RankingComponent_app_group_draw_animation_4_Template","RankingComponent_div_5_Template","RankingComponent_div_6_Template","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","eventName","options","resultSelector","isFunction","mapOneOrManyArgs","add","isEventTarget","addEventListener","removeEventListener","methodName","handler","isNodeStyleEventEmitter","addListener","removeListener","toCommonHandlerRegistry","isJQueryStyleEventEmitter","on","off","isArrayLike","mergeMap","subTarget","innerFrom","TypeError","Observable","subscriber","args","skip","count","_","arrReducer","arr","Action","Subscription","scheduler","work","super","schedule","state","intervalProvider","setInterval","timeout","delegate","clearInterval","handle","Scheduler","schedulerActionCtor","now","dateTimestampProvider","asyncScheduler","AsyncScheduler","SchedulerAction","actions","_active","flush","action","execute","shift","unsubscribe","AsyncAction","pending","_a","closed","recycleAsyncId","requestAsyncId","_id","bind","_scheduler","_execute","_delay","errorValue","errored","e","arrRemove","async","delayWhen","delayDurationSelector","subscriptionDelay","source","concat","take","ignoreElements","operate","createOperatorSubscriber","noop","mapTo","StageComponent_ng_container_2_2_ng_template_0_Template","a0","a1","StageComponent_ng_container_2_2_Template","slide_r1","i_r2","tplRef","preparePublicSlide","_c1","a2","a3","width","left","StageComponent_ng_container_2_Template","_r7","clear","classes","marginL","marginR","heightState","load","_c2","a4","transform","transition","_c3","isMouseDragable","isTouchDragable","CarouselComponent_div_2_Template","owlDOMData","stageData","slidesData","_c4","active","CarouselComponent_ng_container_3_div_5_Template","_r6","dot_r4","moveByDot","showInnerContent","innerContent","_c5","disabled","CarouselComponent_ng_container_3_Template","prev","ctx_r9","navData","htmlText","dotsData","dots","_c6","OwlCarouselOConfig","items","skip_validateItems","loop","center","rewind","mouseDrag","touchDrag","pullDrag","freeDrag","margin","stagePadding","merge","mergeFit","autoWidth","startPosition","rtl","smartSpeed","fluidSpeed","dragEndSpeed","responsive","responsiveRefreshRate","nav","navText","navSpeed","slideBy","dotsEach","dotsSpeed","autoplay","autoplayTimeout","autoplayHoverPause","autoplaySpeed","autoplayMouseleaveTimeout","lazyLoad","lazyLoadEager","slideTransition","animateOut","animateIn","autoHeight","URLhashListener","OwlOptionsMockedTypes","OwlLogger","errorHandler","log","rest","isDevMode","handleError","warn","static","t","token","Type","Event","State","Width","Default","Inner","Outer","CarouselService","logger","_viewSettingsShipper$","Subject","_initializedCarousel$","_changeSettingsCarousel$","_changedSettingsCarousel$","_translateCarousel$","_translatedCarousel$","_resizeCarousel$","_resizedCarousel$","_refreshCarousel$","_refreshedCarousel$","_dragCarousel$","_draggedCarousel$","settings","isResponsive","isRefreshed","isLoaded","isLoading","isGrab","paddingL","paddingR","_width","_items","_widths","_supress","_plugins","_current","_clones","_mergers","_speed","_coordinates","_breakpoint","clonedIdPrefix","_options","_invalidated","invalidated","_states","current","tags","initializing","animating","dragging","states","_pipe","run","cache","relative","css","slide","toFixed","grid","widths","iterator","min","clones","view","max","size","ceil","append","prepend","repeat","normalize","unshift","isActive","isCloned","coordinates","previous","padding","abs","minimum","maximum","reset","animate","begin","end","inner","outer","n","element","_op","item","isCentered","getViewCurSettings","asObservable","getInitializedState","getChangeState","getChangedState","getTranslateState","getTranslatedState","getResizeState","getResizedState","getRefreshState","getRefreshedState","getDragState","getDraggedState","setOptions","configOptions","checkedOptions","_validateOptions","mockedTypes","setRightOption","type","hasOwnProperty","_isNumeric","_validateItems","_isNumberOrBoolean","_isNumberOrString","_isStringOrBoolean","Array","isArray","isString","setCarouselWidth","setup","carouselWidth","slides","setItems","_defineSlidesData","setOptionsForViewport","_trigger","property","name","invalidate","viewport","overwrites","Number","mergers","dataMerge","initialize","enter","refresh","sendChanges","leave","_optionsLogic","update","filteredPipe","all","setCurSlideClasses","is","dimension","onResize","curWidth","prepareDragging","transformArr","replace","split","x","y","speed","enterDragging","defineNewCoordsDrag","dragData","pull","delta","difference","pointer","start","finishDragging","dragObj","clickAttacher","direction","currentSlideI","newCurrent","closest","getTime","time","coordinate","position","onTransitionEnd","part","_suppress","_release","reciprocalItemsWidth","elementWidth","slice","odd","even","multiplier","newPosition","_duration","from","to","factor","revert","distance","delayForLoop","_viewport","loadMap","Map","hashFragment","dataHash","currentClasses","cloned","animated","isAnimated","isDefAnimatedIn","isDefAnimatedOut","isCustomAnimatedIn","isCustomAnimatedOut","o","namespace","stateName","register","object","tag","indexOf","events","originalEvent","window","touches","changedTouches","pageX","pageY","clientX","clientY","number","isNaN","parseFloat","first","second","NavigationService","carouselService","navSubscription","_initialized","_pages","_navData","_dotsData","spyDataStreams","ngOnDestroy","initializedCarousel$","tap","_updateNavPages","draw","changedSettings$","refreshedCarousel$","navMerge$","j","k","lower","upper","pages","floor","dotContent","startI","splice","_updateNavButtons","_updateDots","curActiveDotI","finalCurrent","page","pop","_getPosition","successor","standard","dotId","dot","toSlideById","WINDOW","InjectionToken","WindowRef","nativeWindow","WINDOW_PROVIDERS","provide","useClass","BrowserWindowRef","useFactory","windowFactory","browserWindowRef","platformId","isPlatformBrowser","func","clearTimeout","deps","PLATFORM_ID","DOCUMENT","DocumentRef","nativeDocument","DOCUMENT_PROVIDERS","BrowserDocumentRef","documentFactory","browserDocumentRef","hidden","visibilityState","AutoplayService","ngZone","autoplaySubscription","_timeout","_paused","_isArtificialAutoplayTimeout","_isAutoplayStopped","isAutoplayStopped","winRef","docRef","play","_handleChangeObservable","resized$","stop","autoplayMerge$","_setAutoPlayInterval","_getNextTimeout","runOutsideAngular","pause","_playAfterTranslated","of","switchMap","startPausing","startPlayingMouseLeave","startPlayingTouchEnd","LazyLoadService","lazyLoadSubscription","isLazyLoad","changeSettings$","resizedCarousel$","lazyLoadMerge$","_defineLazyLoadSlides","_load","AnimateService","animateSubscription","swapping","dragCarousel$","draggedCarousel$","translatedCarousel$","dragTranslatedMerge$","translateCarousel$","_swap","animateMerge$","incoming","outgoing","AutoHeightService","autoHeightSubscription","autoHeight$","HashService","route","router","hashSubscription","currentHashFragment","fragment","navigate","commands","extras","listenToRoute","newCurSlide","newCurFragment","relativeTo","hashFragment$","nextId","CarouselSlideDirective","_dataMerge","isNumeric","ResizeService","resizeObservable$","onResize$","StageComponent","zone","el","renderer","animateService","owlDraggable","listenerMouseMove","listenerTouchMove","listenerOneMouseMove","listenerOneTouchMove","listenerMouseUp","listenerTouchEnd","listenerOneClick","listenerATag","_drag","moving","_oneDragMove$","_oneMoveSubsription","newSlide","onMouseDown","_onDragStart","onTouchStart","targetTouches","onTouchCancel","_onDragEnd","onDragStart","onSelectStart","_sendChanges","bindOneMouseTouchMove","ev","_oneMouseTouchMove","bindOnDragMove","_onDragMove","bindOnDragEnd","which","_prepareDragging","_pointer","listen","_difference","_is","blockClickAnchorInDragging","preventDefault","_enterDragging","HTMLAnchorElement","parentElement","stageOrExit","_animate","setStyle","nativeElement","children","_finishDragging","_oneClickHandler","firstC","specificState","_enter","dependencies","encapsulation","animation","trigger","style","height","CarouselComponent","resizeService","navigationService","autoplayService","lazyLoadService","autoHeightService","hashService","changeDetectorRef","translated","change","changed","initialized","carouselWindowWidth","resizeSubscription","_allObservSubscription","_slidesChangesSubscription","slidesOutputData","carouselLoaded","prevOptions","_viewCurSettings$","_draggingCarousel$","_changeCarousel$","_changedCarousel$","_carouselMerge$","onVisibilityChange","clientWidth","toArray","ngAfterContentInit","_winResizeWatcher","markForCheck","gatherTranslatedData","changedPosition","reduce","accumulator","seed","scanInternals","arguments","anim","due","duration","timer","dueTime","intervalOrScheduler","intervalDuration","isScheduler","isValidDate","complete","activeSlides","startPlayML","startPlayTE","stopAutoplay","startAutoplay","contentQueries","dirIndex","_t","changeDetection","CarouselModule","providers","imports","LeagueGroupsPreviewComponent_div_0_div_4_tr_15_Template","openGroupMatches","LeagueGroupsPreviewComponent_div_0_div_4_Template","player_r11","ctx_r18","player2_r15","player1_r12","selectedGroupMatches","ctx_r20","LeagueGroupsPreviewComponent_div_1_tr_15_td_1_span_2_ng_container_1_Template","LeagueGroupsPreviewComponent_div_1_tr_15_td_1_span_2_ng_template_2_Template","_r19","LeagueGroupsPreviewComponent_div_1_tr_15_td_1_span_1_Template","LeagueGroupsPreviewComponent_div_1_tr_15_td_1_span_2_Template","LeagueGroupsPreviewComponent_div_1_tr_15_td_1_Template","i_r13","ctx_r10","selectedGroup","_r27","ctx_r26","closeMatchesModal","stopPropagation","ctx_r29","LeagueGroupsPreviewComponent_div_1_th_11_Template","LeagueGroupsPreviewComponent_div_1_tr_15_Template","LeagueGroupsPreviewComponent","groups","showMatchesModal","getGroupMatches","leagueType","groupMatches","LeagueGroupsPreviewComponent_div_0_Template","LeagueGroupsPreviewComponent_div_1_Template","previousSlide","nextSlide","isFirstSlide","isLastSlide","_r18","league_r8","ctx_r16","openKnockoutModal","ctx_r13","getLeagueMatches","AllLeaguesComponent_ng_container_6_ng_template_1_div_21_tr_23_i_2_Template","player_r22","ctx_r25","openModal","AllLeaguesComponent_ng_container_6_ng_template_1_div_21_tr_23_Template","AllLeaguesComponent_ng_container_6_ng_template_1_p_16_Template","AllLeaguesComponent_ng_container_6_ng_template_1_p_17_Template","AllLeaguesComponent_ng_container_6_ng_template_1_div_18_Template","AllLeaguesComponent_ng_container_6_ng_template_1_app_league_groups_preview_19_Template","AllLeaguesComponent_ng_container_6_ng_template_1_div_20_Template","AllLeaguesComponent_ng_container_6_ng_template_1_div_21_Template","leagueName","leagueDescription","getLeagueTypeClass","showKnockoutMatches","AllLeaguesComponent_ng_container_6_ng_template_1_Template","player_r32","_r35","ctx_r34","i_r33","ctx_r30","ctx_r42","player2_r39","player1_r36","ctx_r44","AllLeaguesComponent_div_7_tr_15_td_1_span_2_ng_container_1_Template","AllLeaguesComponent_div_7_tr_15_td_1_span_2_ng_template_2_Template","ctx_r41","currentModalSystemOfLeague","_r43","AllLeaguesComponent_div_7_tr_15_td_1_span_1_Template","AllLeaguesComponent_div_7_tr_15_td_1_span_2_Template","ctx_r38","AllLeaguesComponent_div_7_tr_15_td_1_Template","i_r37","ctx_r31","_r51","ctx_r50","closeModal","ctx_r53","AllLeaguesComponent_div_7_th_11_Template","AllLeaguesComponent_div_7_tr_15_Template","_r55","ctx_r54","closeKnockoutModal","ctx_r57","currentKnockoutLeagueId","AllLeaguesComponent","leaguesRank","LeagueId","isModalOpen","isKnockoutModalOpen","currentSlideIndex","customOptions","sorted","sortLeaguesForDisplay","normalizeLeaguesForDisplay","onCarouselChanged","loadData","dateA","toggleKnockoutMatches","getSystemOfLeagueForLeague","getDisplayResult","owlCarousel","viewQuery","AllLeaguesComponent_div_3_Template","AllLeaguesComponent_ng_container_6_Template","AllLeaguesComponent_div_7_Template","AllLeaguesComponent_div_8_Template","_r9","spell_r5","ForbiddenCardsComponent_ng_container_15_ng_template_1_Template","_r15","trap_r11","ForbiddenCardsComponent_ng_container_20_ng_template_1_Template","_r21","monster_r17","ctx_r19","ForbiddenCardsComponent_ng_container_25_ng_template_1_Template","_r24","ctx_r23","selectedImage","ForbiddenCardsComponent","spellCards","trapCards","monsters","isModalOpenAll","image","openAll","ForbiddenCardsComponent_ng_container_15_Template","ForbiddenCardsComponent_ng_container_20_Template","ForbiddenCardsComponent_ng_container_25_Template","ForbiddenCardsComponent_div_26_Template","ForbiddenCardsComponent_div_27_Template","message_r7","sentAt","PlayerInboxComponent_div_14_div_2_div_1_div_1_Template","PlayerInboxComponent_div_14_div_2_div_1_div_2_Template","PlayerInboxComponent_div_14_div_2_div_1_Template","message_r13","PlayerInboxComponent_div_14_div_3_div_1_div_1_Template","PlayerInboxComponent_div_14_div_3_div_1_div_2_Template","PlayerInboxComponent_div_14_div_3_div_1_Template","friendlyMessages","isFriendlyMode","onScroll","PlayerInboxComponent_div_14_div_2_Template","PlayerInboxComponent_div_14_div_3_Template","PlayerInboxComponent_div_14_div_4_Template","currentMessages","PlayerInboxComponent","messageService","friendlyMessageService","cdr","newMessage","isUserAtBottom","loadMessages","ngAfterViewChecked","detectChanges","scrollToBottom","loadFriendlyMessages","loadOfficialMessages","isDeleted","info","sendMessage","trim","sendFriendlyMessage","sendOfficialMessage","warning","toggleMessageMode","messageTypeLabel","toggleButtonText","messagesContainer","container","scrollTop","scrollHeight","clientHeight","PlayerInboxComponent_div_13_Template","PlayerInboxComponent_div_14_Template","ctx_r8","clearPlayerSearch","getFilteredPlayers","playerSearchTerm","getPlayerScoreDifference","getPlayerScoreDisplay","totalMatches","totalWins","totalLosses","totalDraws","FriendliesViewComponent_div_15_div_28_div_1_Template","FriendliesViewComponent_div_15_div_29_p_1_Template","FriendliesViewComponent_div_15_div_29_p_2_Template","FriendliesViewComponent_div_15_div_7_Template","onPlayerSearchChange","currentPlayerSort","onPlayerSortChange","FriendliesViewComponent_div_15_div_26_Template","FriendliesViewComponent_div_15_div_27_Template","FriendliesViewComponent_div_15_div_28_Template","FriendliesViewComponent_div_15_div_29_Template","PlayerSortOption","MostMatches","MostWins","MostPoints","BestWinRate","BestPointDifference","isLoadingPlayers","player_r26","player_r27","match_r29","playedOn","winner","FriendliesViewComponent_div_16_div_35_tr_15_Template","ctx_r22","filterForm","getPaginatedMatches","i_r32","_r34","ctx_r33","changePage","currentPage","_r36","ctx_r35","FriendliesViewComponent_div_16_div_36_span_4_Template","ctx_r37","totalPages","ctx_r24","itemsPerPage","getDisplayMatches","FriendliesViewComponent_div_16_div_38_p_1_Template","FriendliesViewComponent_div_16_div_38_p_2_Template","hasActiveFilters","noMatchesFound","_r41","ctx_r40","dateFilter","onFilterChange","ctx_r43","FriendliesViewComponent_div_16_option_23_Template","ctx_r45","ctx_r46","FriendliesViewComponent_div_16_option_30_Template","ctx_r47","clearFilters","FriendliesViewComponent_div_16_div_34_Template","FriendliesViewComponent_div_16_div_35_Template","FriendliesViewComponent_div_16_div_36_Template","FriendliesViewComponent_div_16_div_37_Template","FriendliesViewComponent_div_16_div_38_Template","isLoadingMatches","shutout_r52","achievedOn","winnerName","winnerScore","loserScore","loserName","FriendliesViewComponent_div_17_div_7_tr_13_Template","ctx_r49","getDisplayShutouts","FriendliesViewComponent_div_17_div_8_p_1_Template","FriendliesViewComponent_div_17_div_8_p_2_Template","noShutoutsFound","FriendliesViewComponent_div_17_div_6_Template","FriendliesViewComponent_div_17_div_7_Template","FriendliesViewComponent_div_17_div_8_Template","getSelectedPlayersText","isLoadingShutouts","FriendliesViewComponent","friendlyMatchService","activeTab","shutouts","filteredMatches","filteredShutouts","playerScores","sortedPlayers","loadInitialData","loadAllMatches","loadAllShutouts","setActiveTab","tab","applyFilters","sortPlayers","sortByMostMatches","sortByMostWins","sortByMostPoints","sortByBestWinRate","sortByBestPointDifference","aTotalPoints","calculatePlayerTotalPoints","aPointDiff","calculatePlayerPointDifference","totalPoints","pointsScored","pointsConceded","getCurrentSortLabel","searchTerm","includes","calculatePlayerScores","p","currentScore","scored","conceded","getPlayerScore","score","diff","isPlayerSelected","filters","getDateFilterText","filtered","cutoffDate","getFullYear","getMonth","getDate","shutout","startIndex","endIndex","reorderMatchForSelectedPlayer","selectedPlayer","FriendliesViewComponent_div_15_Template","FriendliesViewComponent_div_16_Template","FriendliesViewComponent_div_17_Template","_r13","ctx_r12","loadActiveTournament","errorMessage","activeTournament","championTeamName","player_r19","showPlayerResults","getPlayerStats","totalPointsAgainst","opponent_r22","_r25","team_r16","showTeamMatches","teamName","TeamsComponent_div_13_div_4_div_50_div_24_Template","TeamsComponent_div_13_div_4_div_50_button_29_Template","getTeamOpponents","TeamsComponent_div_13_div_4_div_24_Template","TeamsComponent_div_13_div_4_div_50_Template","getStatusColor","systemOfScoring","teamCount","playersPerTeam","teams","getTotalPlayersCount","getCompletedMatchesCount","getTotalMatchesCount","multiParticipations","multiTitlesWon","TeamsComponent_div_13_div_9_div_1_Template","allPlayers","TeamsComponent_div_13_div_1_Template","TeamsComponent_div_13_div_2_Template","TeamsComponent_div_13_div_3_Template","TeamsComponent_div_13_div_4_Template","TeamsComponent_div_13_div_8_Template","TeamsComponent_div_13_div_9_Template","TeamsComponent_div_13_div_10_Template","tournament_r34","standing_r40","_r44","openArchiveTeamPlayers","ctx_r39","getTrophyIcon","i_r41","TeamsComponent_div_14_div_4_div_5_div_1_div_6_tr_19_Template","standings","TeamsComponent_div_14_div_4_div_5_div_1_span_5_Template","TeamsComponent_div_14_div_4_div_5_div_1_div_6_Template","TeamsComponent_div_14_div_4_div_5_div_1_div_7_Template","TeamsComponent_div_14_div_4_div_5_div_1_Template","pastTournaments","TeamsComponent_div_14_div_4_div_4_Template","TeamsComponent_div_14_div_4_div_5_Template","TeamsComponent_div_14_div_4_div_6_Template","isLoadingPastTournaments","TeamsComponent_div_14_div_3_Template","TeamsComponent_div_14_div_4_Template","isLoadingArchive","match_r54","TeamsComponent_div_15_div_6_div_1_div_6_div_2_Template","ctx_r51","getCompletedMatches","fixture_r50","match_r57","TeamsComponent_div_15_div_6_div_1_div_7_div_2_Template","ctx_r52","getPendingMatches","TeamsComponent_div_15_div_6_div_1_div_6_Template","TeamsComponent_div_15_div_6_div_1_div_7_Template","team1Name","team2Name","TeamsComponent_div_15_div_6_div_1_Template","teamMatches","_r60","ctx_r59","closeTeamMatchesModal","ctx_r62","TeamsComponent_div_15_div_5_Template","TeamsComponent_div_15_div_6_Template","TeamsComponent_div_15_div_7_Template","match_r67","opponentScore","playerScore","TeamsComponent_div_16_div_9_div_1_span_6_Template","TeamsComponent_div_16_div_9_div_1_span_7_Template","TeamsComponent_div_16_div_9_div_1_span_9_Template","TeamsComponent_div_16_div_9_div_1_span_10_Template","opponentName","playerName","TeamsComponent_div_16_div_9_div_1_Template","ctx_r64","playerIndividualMatches","_r75","ctx_r74","closePlayerResultsModal","ctx_r77","TeamsComponent_div_16_div_8_Template","TeamsComponent_div_16_div_9_Template","TeamsComponent_div_16_div_10_Template","isLoadingPlayerMatches","player_r82","TeamsComponent_div_17_div_9_div_1_Template","ctx_r79","archiveTeamPlayers","_r84","ctx_r83","closeArchiveTeamPlayersModal","ctx_r86","TeamsComponent_div_17_div_8_Template","TeamsComponent_div_17_div_9_Template","TeamsComponent_div_17_div_10_Template","selectedArchiveTeam","isLoadingArchiveTeamPlayers","routes","path","redirectTo","pathMatch","component","title","TeamsComponent","multiTournamentService","tournamentMatches","showTeamMatchesModal","selectedTeam","selectedOpponent","showPlayerResultsModal","playerStatsCache","showArchiveTeamPlayersModal","selectedArchiveTournament","loadArchiveData","loadTournamentData","multiTournamentId","clearPlayerStatsCache","total","fixture","team","opponent","loadTeamMatches","loadPlayerIndividualMatches","isPlayer1","getPlayerTeamName","stats","loadAllPlayers","loadPastTournaments","checkArchiveLoadingComplete","loadTournamentsStandings","tournament","standing","multiTeamId","TeamsComponent_div_13_Template","TeamsComponent_div_14_Template","TeamsComponent_div_15_Template","TeamsComponent_div_16_Template","TeamsComponent_div_17_Template","PlayerRoutingModule","RouterModule","forChild","PlayerModule","HttpClientModule","FormsModule","SharedModule","asyncGeneratorStep","gen","reject","_next","_throw","arg","done","then","fn","apply"],"sourceRoot":"webpack:///","sources":["./friendly-match-types.ts","./friendly-message-types.ts","./src/app/core/services/friendly-match.service.ts","./src/app/core/services/friendly-message.service.ts","./src/app/core/services/multi-tournament.service.ts","./src/app/models/interfaces.ts","./src/app/player/tournament-info/tournament-info.component.html","./src/app/player/tournament-info/tournament-info.component.ts","./src/app/player/groups-matches-table/groups-matches-table.component.html","./src/app/player/groups-matches-table/groups-matches-table.component.ts","./src/app/player/league-table/league-table.component.html","./src/app/player/league-table/league-table.component.ts","./src/app/player/bracket-tree/bracket-tree.component.html","./src/app/player/bracket-tree/bracket-tree.component.ts","./src/app/player/groups-table/groups-table.component.html","./src/app/player/groups-table/groups-table.component.ts","./src/app/player/group-draw-animation/group-draw-animation.component.html","./src/app/player/group-draw-animation/group-draw-animation.component.ts","./src/app/player/ranking/ranking.component.html","./src/app/player/ranking/ranking.component.ts","./node_modules/rxjs/dist/esm/internal/observable/fromEvent.js","./node_modules/rxjs/dist/esm/internal/operators/skip.js","./node_modules/rxjs/dist/esm/internal/operators/toArray.js","./node_modules/rxjs/dist/esm/internal/scheduler/Action.js","./node_modules/rxjs/dist/esm/internal/scheduler/intervalProvider.js","./node_modules/rxjs/dist/esm/internal/Scheduler.js","./node_modules/rxjs/dist/esm/internal/scheduler/async.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsyncScheduler.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsyncAction.js","./node_modules/rxjs/dist/esm/internal/operators/delayWhen.js","./node_modules/rxjs/dist/esm/internal/operators/ignoreElements.js","./node_modules/ngx-owl-carousel-o/fesm2022/ngx-owl-carousel-o.mjs","./node_modules/rxjs/dist/esm/internal/operators/reduce.js","./node_modules/rxjs/dist/esm/internal/operators/delay.js","./node_modules/rxjs/dist/esm/internal/observable/timer.js","./node_modules/rxjs/dist/esm/internal/util/isDate.js","./src/app/player/league-groups-preview/league-groups-preview.component.html","./src/app/player/league-groups-preview/league-groups-preview.component.ts","./src/app/player/all-leagues/all-leagues.component.html","./src/app/player/all-leagues/all-leagues.component.ts","./src/app/player/forbidden-cards/forbidden-cards.component.html","./src/app/player/forbidden-cards/forbidden-cards.component.ts","./src/app/player/player-inbox/player-inbox.component.html","./src/app/player/player-inbox/player-inbox.component.ts","./src/app/player/friendlies/friendlies-view.component.html","./src/app/player/friendlies/friendlies-view.component.ts","./src/app/player/teams/teams.component.html","./src/app/player/player-routing.module.ts","./src/app/player/teams/teams.component.ts","./src/app/player/player.module.ts","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["// YuGi Tournament API - Friendly Match System - TypeScript Interfaces\r\n// يمكن نسخ هذا الملف إلى مشروع الفرونت إند\r\n\r\n// ========================================\r\n// DTOs\r\n// ========================================\r\n\r\nexport interface AddFriendlyPlayerDto {\r\n  fullName: string;\r\n}\r\n\r\nexport interface RecordFriendlyMatchDto {\r\n  player1Id: number;\r\n  player2Id: number;\r\n  player1Score: number;\r\n  player2Score: number;\r\n}\r\n\r\nexport interface FriendlyPlayerDto {\r\n  playerId: number;\r\n  fullName: string;\r\n  createdOn: string;\r\n  isActive: boolean;\r\n  totalMatches: number;\r\n  totalWins: number;\r\n  totalLosses: number;\r\n  totalDraws: number;\r\n  winRate: number;\r\n}\r\n\r\nexport interface FriendlyMatchHistoryDto {\r\n  matchId: number;\r\n  playedOn: string;\r\n  player1Score: number;\r\n  player2Score: number;\r\n  winner: string;\r\n  player1Name: string;\r\n  player2Name: string;\r\n}\r\n\r\nexport interface OverallScoreDto {\r\n  player1Name: string;\r\n  player2Name: string;\r\n  player1TotalScore: number;\r\n  player2TotalScore: number;\r\n  totalMatches: number;\r\n  leadingPlayer: string;\r\n  scoreDifference: number;\r\n\r\n  // Win/Loss Statistics\r\n  player1Wins: number;\r\n  player1Losses: number;\r\n  player1Draws: number;\r\n  player2Wins: number;\r\n  player2Losses: number;\r\n  player2Draws: number;\r\n\r\n  // Win Rates\r\n  player1WinRate: number;\r\n  player2WinRate: number;\r\n\r\n  // Match History\r\n  matchHistory: FriendlyMatchHistoryDto[];\r\n}\r\n\r\nexport interface ShutoutResultDto {\r\n  shutoutId: number;\r\n  matchId: number;\r\n  winnerName: string;\r\n  loserName: string;\r\n  achievedOn: string;\r\n  winnerScore: number;\r\n  loserScore: number;\r\n  matchDetails: string;\r\n}\r\n\r\n// Advanced Filtering and Pagination Types\r\nexport interface MatchFilterDto {\r\n  playerId?: number;\r\n  opponentIds?: number[];\r\n  dateFilter: DateFilter;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport enum DateFilter {\r\n  Today = 1,\r\n  Last3Days = 2,\r\n  LastWeek = 3,\r\n  LastMonth = 4,\r\n  AllTime = 5,\r\n}\r\n\r\nexport interface PaginatedMatchResultDto {\r\n  matches: FriendlyMatchHistoryDto[];\r\n  totalMatches: number;\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n  hasPreviousPage: boolean;\r\n  hasNextPage: boolean;\r\n  filterSummary: string;\r\n}\r\n\r\n// Shutout Filtering Types\r\nexport interface ShutoutFilterDto {\r\n  playerId?: number;\r\n  playerIds?: number[];\r\n  playerRole?: ShutoutPlayerRole;\r\n  dateFilter: DateFilter;\r\n  page: number;\r\n  pageSize: number;\r\n}\r\n\r\nexport enum ShutoutPlayerRole {\r\n  Any = 1, // اللاعب سواء كسب أو خسر\r\n  Winner = 2, // اللاعب كان الفائز بس\r\n  Loser = 3, // اللاعب كان الخاسر بس\r\n}\r\n\r\nexport interface PaginatedShutoutResultDto {\r\n  shutouts: ShutoutResultDto[];\r\n  totalShutouts: number;\r\n  currentPage: number;\r\n  pageSize: number;\r\n  totalPages: number;\r\n  hasPreviousPage: boolean;\r\n  hasNextPage: boolean;\r\n  filterSummary: string;\r\n}\r\n\r\n// ========================================\r\n// API Response Types\r\n// ========================================\r\n\r\nexport interface ApiResponse<T = any> {\r\n  success: boolean;\r\n  message: string;\r\n  data?: T;\r\n}\r\n\r\n// ========================================\r\n// Service Interface\r\n// ========================================\r\n\r\nexport interface IFriendlyMatchApiService {\r\n  // Player Management\r\n  getAllFriendlyPlayers(): Promise<FriendlyPlayerDto[]>;\r\n  getFriendlyPlayerById(playerId: number): Promise<FriendlyPlayerDto | null>;\r\n  addFriendlyPlayer(player: AddFriendlyPlayerDto): Promise<ApiResponse>;\r\n  deleteFriendlyPlayer(playerId: number): Promise<ApiResponse>;\r\n  deactivateFriendlyPlayer(playerId: number): Promise<ApiResponse>;\r\n  getFriendlyPlayersRanking(): Promise<FriendlyPlayerDto[]>;\r\n  getFriendlyPlayerStats(playerId: number): Promise<FriendlyPlayerDto | null>;\r\n\r\n  // Match Management\r\n  getAllFriendlyMatches(): Promise<FriendlyMatchHistoryDto[]>;\r\n  getFriendlyMatchesBetweenPlayers(\r\n    player1Id: number,\r\n    player2Id: number\r\n  ): Promise<FriendlyMatchHistoryDto[]>;\r\n  recordFriendlyMatch(match: RecordFriendlyMatchDto): Promise<ApiResponse>;\r\n  deleteFriendlyMatch(matchId: number): Promise<ApiResponse>;\r\n  updateFriendlyMatch(\r\n    matchId: number,\r\n    match: RecordFriendlyMatchDto\r\n  ): Promise<ApiResponse>;\r\n\r\n  // Statistics and Analysis\r\n  getOverallScoreBetweenPlayers(\r\n    player1Id: number,\r\n    player2Id: number\r\n  ): Promise<OverallScoreDto | null>;\r\n\r\n  // Shutout Results (5-0 matches)\r\n  getAllShutoutResults(): Promise<ShutoutResultDto[]>;\r\n  getShutoutResultsByPlayer(playerId: number): Promise<ShutoutResultDto[]>;\r\n  getShutoutResultByMatch(matchId: number): Promise<ShutoutResultDto | null>;\r\n  deleteShutoutResult(shutoutId: number): Promise<ApiResponse>;\r\n}\r\n\r\n// ========================================\r\n// Utility Types\r\n// ========================================\r\n\r\nexport type MatchWinner = 'player1' | 'player2' | 'draw';\r\n\r\nexport interface MatchResult {\r\n  winner: MatchWinner;\r\n  player1Score: number;\r\n  player2Score: number;\r\n}\r\n\r\nexport interface PlayerStats {\r\n  playerId: number;\r\n  fullName: string;\r\n  totalMatches: number;\r\n  wins: number;\r\n  losses: number;\r\n  draws: number;\r\n  winRate: number;\r\n  averageScore: number;\r\n}\r\n\r\nexport interface HeadToHeadStats {\r\n  player1Id: number;\r\n  player2Id: number;\r\n  player1Name: string;\r\n  player2Name: string;\r\n  totalMatches: number;\r\n  player1Wins: number;\r\n  player2Wins: number;\r\n  draws: number;\r\n  player1TotalScore: number;\r\n  player2TotalScore: number;\r\n  leadingPlayer: string;\r\n  scoreDifference: number;\r\n}\r\n\r\n// ========================================\r\n// UI Component Types\r\n// ========================================\r\n\r\nexport interface PlayerSelectionOption {\r\n  value: number;\r\n  label: string;\r\n  isActive: boolean;\r\n}\r\n\r\nexport interface MatchFormData {\r\n  player1Id: number | null;\r\n  player2Id: number | null;\r\n  player1Score: number;\r\n  player2Score: number;\r\n}\r\n\r\nexport interface MatchFilterOptions {\r\n  player1Id?: number;\r\n  player2Id?: number;\r\n  dateFrom?: string;\r\n  dateTo?: string;\r\n  winner?: string;\r\n}\r\n\r\nexport interface PlayerFilterOptions {\r\n  isActive?: boolean;\r\n  hasMatches?: boolean;\r\n  minWinRate?: number;\r\n  maxWinRate?: number;\r\n}\r\n\r\n// ========================================\r\n// Constants\r\n// ========================================\r\n\r\nexport const FRIENDLY_MATCH_ENDPOINTS = {\r\n  // Player Management\r\n  GET_ALL_PLAYERS: '/FriendlyMatch/players',\r\n  GET_PLAYER_BY_ID: (id: number) => `/FriendlyMatch/players/${id}`,\r\n  ADD_PLAYER: '/FriendlyMatch/players',\r\n  DELETE_PLAYER: (id: number) => `/FriendlyMatch/players/${id}`,\r\n  DEACTIVATE_PLAYER: (id: number) => `/FriendlyMatch/players/${id}/deactivate`,\r\n  GET_PLAYERS_RANKING: '/FriendlyMatch/players/ranking',\r\n  GET_PLAYER_STATS: (id: number) => `/FriendlyMatch/players/${id}/stats`,\r\n\r\n  // Match Management\r\n  GET_ALL_MATCHES: '/FriendlyMatch/matches',\r\n  GET_MATCHES_BETWEEN_PLAYERS: (player1Id: number, player2Id: number) =>\r\n    `/FriendlyMatch/matches/${player1Id}/${player2Id}`,\r\n  RECORD_MATCH: '/FriendlyMatch/matches/record',\r\n  DELETE_MATCH: (id: number) => `/FriendlyMatch/matches/${id}`,\r\n  UPDATE_MATCH: (id: number) => `/FriendlyMatch/matches/${id}`,\r\n\r\n  // Statistics\r\n  GET_OVERALL_SCORE: (player1Id: number, player2Id: number) =>\r\n    `/FriendlyMatch/overall-score/${player1Id}/${player2Id}`,\r\n\r\n  // Advanced Match Filtering and Pagination\r\n  GET_FILTERED_MATCHES: '/FriendlyMatch/matches/filtered',\r\n  GET_PLAYER_MATCHES: (playerId: number) =>\r\n    `/FriendlyMatch/matches/player/${playerId}`,\r\n  GET_PLAYER_VS_OPPONENTS: (playerId: number) =>\r\n    `/FriendlyMatch/matches/player/${playerId}/vs-opponents`,\r\n\r\n  // Shutout Results (5-0 matches)\r\n  GET_ALL_SHUTOUTS: '/FriendlyMatch/shutouts',\r\n  GET_SHUTOUTS_BY_PLAYER: (playerId: number) =>\r\n    `/FriendlyMatch/shutouts/player/${playerId}`,\r\n  GET_SHUTOUT_BY_MATCH: (matchId: number) =>\r\n    `/FriendlyMatch/shutouts/match/${matchId}`,\r\n  DELETE_SHUTOUT: (shutoutId: number) => `/FriendlyMatch/shutouts/${shutoutId}`,\r\n\r\n  // Advanced Shutout Filtering and Pagination\r\n  GET_FILTERED_SHUTOUTS: '/FriendlyMatch/shutouts/filtered',\r\n  GET_PLAYER_SHUTOUTS_FILTERED: (playerId: number) =>\r\n    `/FriendlyMatch/shutouts/player/${playerId}/filtered`,\r\n  GET_PLAYERS_SHUTOUTS_FILTERED: '/FriendlyMatch/shutouts/players/filtered',\r\n\r\n  // Test\r\n  TEST: '/FriendlyMatch/test',\r\n} as const;\r\n\r\n// ========================================\r\n// Helper Functions\r\n// ========================================\r\n\r\nexport const calculateWinRate = (\r\n  wins: number,\r\n  totalMatches: number\r\n): number => {\r\n  return totalMatches > 0 ? (wins / totalMatches) * 100 : 0;\r\n};\r\n\r\nexport const getMatchWinner = (\r\n  player1Score: number,\r\n  player2Score: number\r\n): MatchWinner => {\r\n  if (player1Score > player2Score) return 'player1';\r\n  if (player2Score > player1Score) return 'player2';\r\n  return 'draw';\r\n};\r\n\r\nexport const formatDate = (dateString: string): string => {\r\n  return new Date(dateString).toLocaleDateString('ar-EG', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  });\r\n};\r\n\r\nexport const validateMatchData = (data: RecordFriendlyMatchDto): string[] => {\r\n  const errors: string[] = [];\r\n\r\n  if (data.player1Id === data.player2Id) {\r\n    errors.push('لا يمكن للاعب أن يلعب ضد نفسه');\r\n  }\r\n\r\n  if (data.player1Score < 0 || data.player2Score < 0) {\r\n    errors.push('النتيجة يجب أن تكون صفر أو أكثر');\r\n  }\r\n\r\n  if (!data.player1Id || !data.player2Id) {\r\n    errors.push('يجب اختيار اللاعبين');\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport const validatePlayerData = (data: AddFriendlyPlayerDto): string[] => {\r\n  const errors: string[] = [];\r\n\r\n  if (!data.fullName || data.fullName.trim().length === 0) {\r\n    errors.push('اسم اللاعب مطلوب');\r\n  }\r\n\r\n  if (data.fullName && data.fullName.trim().length < 2) {\r\n    errors.push('اسم اللاعب يجب أن يكون أكثر من حرفين');\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\n// ========================================\r\n// Default Values\r\n// ========================================\r\n\r\nexport const DEFAULT_MATCH_FORM: MatchFormData = {\r\n  player1Id: null,\r\n  player2Id: null,\r\n  player1Score: 0,\r\n  player2Score: 0,\r\n};\r\n\r\nexport const DEFAULT_PLAYER_FORM: AddFriendlyPlayerDto = {\r\n  fullName: '',\r\n};\r\n\r\nexport const DEFAULT_MATCH_FILTER: MatchFilterOptions = {\r\n  player1Id: undefined,\r\n  player2Id: undefined,\r\n  dateFrom: undefined,\r\n  dateTo: undefined,\r\n  winner: undefined,\r\n};\r\n\r\nexport const DEFAULT_PLAYER_FILTER: PlayerFilterOptions = {\r\n  isActive: true,\r\n  hasMatches: undefined,\r\n  minWinRate: undefined,\r\n  maxWinRate: undefined,\r\n};\r\n","// ========================================\r\n// Friendly Message System TypeScript Types\r\n// ========================================\r\n\r\n// DTOs\r\nexport interface SendFriendlyMessageDto {\r\n  content: string;\r\n}\r\n\r\nexport interface FriendlyMessageDto {\r\n  id: number;\r\n  playerId?: number; // قد لا يكون موجود\r\n  senderId?: string; // إضافة senderId للتوافق مع الـ backend\r\n  playerFullName?: string; // قد لا يكون موجود\r\n  senderFullName?: string; // إضافة senderFullName للتوافق مع الـ backend\r\n  senderPhoneNumber?: string; // إضافة رقم الهاتف\r\n  content: string;\r\n  isRead: boolean;\r\n  sentAt: string;\r\n  isFromAdmin: boolean;\r\n  messageType?: string; // قد لا يكون موجود\r\n}\r\n\r\n// API Response Types\r\nexport interface FriendlyMessageResponse {\r\n  success: boolean;\r\n  message: string;\r\n  messages?: FriendlyMessageDto[];\r\n}\r\n\r\nexport interface FriendlyMessageStatsResponse {\r\n  success: boolean;\r\n  unreadCount: number;\r\n  playerId?: number;\r\n}\r\n\r\n// API Service Interface\r\nexport interface IFriendlyMessageService {\r\n  // Player Actions\r\n  sendMessageToAdmin(\r\n    playerId: number,\r\n    content: string\r\n  ): Promise<FriendlyMessageResponse>;\r\n  getPlayerMessages(playerId: number): Promise<FriendlyMessageResponse>;\r\n\r\n  // Admin Actions\r\n  getAllMessages(): Promise<FriendlyMessageResponse>;\r\n  getUnreadMessages(): Promise<FriendlyMessageResponse>;\r\n  getReadMessages(): Promise<FriendlyMessageResponse>;\r\n  getPlayerConversation(playerId: number): Promise<FriendlyMessageResponse>;\r\n  sendAdminReply(\r\n    playerId: number,\r\n    content: string\r\n  ): Promise<FriendlyMessageResponse>;\r\n  markMessageAsRead(messageId: number): Promise<FriendlyMessageResponse>;\r\n  markAllPlayerMessagesAsRead(\r\n    playerId: number\r\n  ): Promise<FriendlyMessageResponse>;\r\n  deleteMessage(messageId: number): Promise<FriendlyMessageResponse>;\r\n\r\n  // Statistics\r\n  getUnreadMessagesCount(): Promise<FriendlyMessageStatsResponse>;\r\n  getPlayerUnreadMessagesCount(\r\n    playerId: number\r\n  ): Promise<FriendlyMessageStatsResponse>;\r\n}\r\n\r\n// Endpoint Constants\r\nexport const FRIENDLY_MESSAGE_ENDPOINTS = {\r\n  // Player Actions\r\n  SEND_MESSAGE: '/FriendlyMessage/send',\r\n  GET_PLAYER_MESSAGES: '/FriendlyMessage/my-messages',\r\n\r\n  // Admin Actions\r\n  GET_ALL_MESSAGES: '/FriendlyMessage/inbox',\r\n  GET_UNREAD_MESSAGES: '/FriendlyMessage/unread-messages',\r\n  GET_READ_MESSAGES: '/FriendlyMessage/read-messages',\r\n  GET_PLAYER_CONVERSATION: (playerId: number) =>\r\n    `/FriendlyMessage/conversation/${playerId}`,\r\n  SEND_ADMIN_REPLY: (playerId: string) => `/FriendlyMessage/reply/${playerId}`,\r\n  MARK_MESSAGE_READ: (messageId: number) =>\r\n    `/FriendlyMessage/mark/${messageId}`,\r\n  MARK_ALL_PLAYER_MESSAGES_READ: (playerId: number) =>\r\n    `/FriendlyMessage/mark-all-read/${playerId}`,\r\n  DELETE_MESSAGE: (messageId: number) => `/FriendlyMessage/delete/${messageId}`,\r\n\r\n  // Statistics\r\n  GET_UNREAD_COUNT: '/FriendlyMessage/stats/unread-count',\r\n  GET_PLAYER_UNREAD_COUNT: (playerId: number) =>\r\n    `/FriendlyMessage/stats/player/${playerId}/unread-count`,\r\n\r\n  // Test\r\n  TEST: '/FriendlyMessage/test',\r\n} as const;\r\n\r\n// Validation Functions\r\nexport const validateFriendlyMessageContent = (content: string): string[] => {\r\n  const errors: string[] = [];\r\n\r\n  if (!content || content.trim().length === 0) {\r\n    errors.push('محتوى الرسالة مطلوب');\r\n  }\r\n\r\n  if (content && content.length > 2000) {\r\n    errors.push('محتوى الرسالة يجب أن يكون أقل من 2000 حرف');\r\n  }\r\n\r\n  if (content && content.trim().length < 3) {\r\n    errors.push('محتوى الرسالة يجب أن يكون أكثر من 3 أحرف');\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\n// Utility Functions\r\nexport const formatMessageDate = (dateString: string): string => {\r\n  const date = new Date(dateString);\r\n  const now = new Date();\r\n  const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\r\n\r\n  if (diffInHours < 1) {\r\n    const diffInMinutes = Math.floor(\r\n      (now.getTime() - date.getTime()) / (1000 * 60)\r\n    );\r\n    return `منذ ${diffInMinutes} دقيقة`;\r\n  } else if (diffInHours < 24) {\r\n    return `منذ ${Math.floor(diffInHours)} ساعة`;\r\n  } else if (diffInHours < 168) {\r\n    // 7 days\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    return `منذ ${diffInDays} يوم`;\r\n  } else {\r\n    return date.toLocaleDateString('ar-EG', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  }\r\n};\r\n\r\nexport const getMessageTypeLabel = (isFromAdmin: boolean): string => {\r\n  return isFromAdmin ? 'رد الإدارة' : 'رسالة اللاعب';\r\n};\r\n\r\nexport const getMessageStatusLabel = (\r\n  isRead: boolean,\r\n  isFromAdmin: boolean\r\n): string => {\r\n  if (isFromAdmin) {\r\n    return 'تم الإرسال';\r\n  }\r\n  return isRead ? 'تم القراءة' : 'غير مقروءة';\r\n};\r\n\r\n// Sorting and Filtering Functions\r\nexport const sortMessagesByDate = (\r\n  messages: FriendlyMessageDto[],\r\n  ascending: boolean = false\r\n): FriendlyMessageDto[] => {\r\n  return messages.sort((a, b) => {\r\n    const dateA = new Date(a.sentAt).getTime();\r\n    const dateB = new Date(b.sentAt).getTime();\r\n    return ascending ? dateA - dateB : dateB - dateA;\r\n  });\r\n};\r\n\r\nexport const filterMessagesByType = (\r\n  messages: FriendlyMessageDto[],\r\n  isFromAdmin?: boolean\r\n): FriendlyMessageDto[] => {\r\n  if (isFromAdmin === undefined) {\r\n    return messages;\r\n  }\r\n  return messages.filter((msg) => msg.isFromAdmin === isFromAdmin);\r\n};\r\n\r\nexport const filterMessagesByReadStatus = (\r\n  messages: FriendlyMessageDto[],\r\n  isRead?: boolean\r\n): FriendlyMessageDto[] => {\r\n  if (isRead === undefined) {\r\n    return messages;\r\n  }\r\n  return messages.filter((msg) => msg.isRead === isRead);\r\n};\r\n\r\n// Statistics Functions\r\nexport const calculateUnreadCount = (\r\n  messages: FriendlyMessageDto[]\r\n): number => {\r\n  return messages.filter((msg) => !msg.isRead && !msg.isFromAdmin).length;\r\n};\r\n\r\nexport const calculatePlayerUnreadCount = (\r\n  messages: FriendlyMessageDto[],\r\n  playerId: number\r\n): number => {\r\n  return messages.filter(\r\n    (msg) => msg.playerId === playerId && !msg.isRead && !msg.isFromAdmin\r\n  ).length;\r\n};\r\n\r\n// Conversation Functions\r\nexport const getConversationSummary = (messages: FriendlyMessageDto[]) => {\r\n  const unreadCount = calculateUnreadCount(messages);\r\n  const lastMessage = messages[messages.length - 1];\r\n\r\n  return {\r\n    totalMessages: messages.length,\r\n    unreadCount,\r\n    lastMessage: lastMessage?.content || '',\r\n    lastMessageDate: lastMessage?.sentAt || '',\r\n    hasUnread: unreadCount > 0,\r\n  };\r\n};\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport { CacheService } from './cache.service';\r\nimport {\r\n  FriendlyPlayerDto,\r\n  FriendlyMatchHistoryDto,\r\n  OverallScoreDto,\r\n  ShutoutResultDto,\r\n  PlayerStats,\r\n  FRIENDLY_MATCH_ENDPOINTS,\r\n  RecordFriendlyMatchDto,\r\n  ApiResponse,\r\n} from 'friendly-match-types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class FriendlyMatchService {\r\n  private baseUrl = environment.apiUrl;\r\n\r\n  constructor(private http: HttpClient, private cacheService: CacheService) {}\r\n\r\n  // Player Management (Public endpoints only)\r\n  getAllFriendlyPlayers(): Observable<FriendlyPlayerDto[]> {\r\n    return this.cacheService.cachePlayerRequest(\r\n      'friendly-players',\r\n      this.http.get<FriendlyPlayerDto[]>(\r\n        `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_ALL_PLAYERS}`\r\n      )\r\n    );\r\n  }\r\n\r\n  getFriendlyPlayersRanking(): Observable<FriendlyPlayerDto[]> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_PLAYERS_RANKING}`;\r\n    return this.http.get<FriendlyPlayerDto[]>(url);\r\n  }\r\n\r\n  getFriendlyPlayerStats(\r\n    playerId: number\r\n  ): Observable<FriendlyPlayerDto | null> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_PLAYER_STATS(\r\n      playerId\r\n    )}`;\r\n    return this.http.get<FriendlyPlayerDto | null>(url);\r\n  }\r\n\r\n  getPlayersStatistics(): Observable<PlayerStats[]> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_PLAYERS_RANKING}`;\r\n    return this.http.get<PlayerStats[]>(url);\r\n  }\r\n\r\n  // Admin-specific Player Management\r\n  addFriendlyPlayerAsync(fullName: string): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.ADD_PLAYER}`;\r\n    return this.http.post<ApiResponse>(url, { fullName });\r\n  }\r\n\r\n  deleteFriendlyPlayerAsync(playerId: number): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.DELETE_PLAYER(\r\n      playerId\r\n    )}`;\r\n    return this.http.delete<ApiResponse>(url);\r\n  }\r\n\r\n  deactivateFriendlyPlayerAsync(playerId: number): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.DEACTIVATE_PLAYER(\r\n      playerId\r\n    )}`;\r\n    return this.http.put<ApiResponse>(url, {});\r\n  }\r\n\r\n  // Match Management (Public endpoints only)\r\n  getAllFriendlyMatches(): Observable<FriendlyMatchHistoryDto[]> {\r\n    return this.cacheService.cachePlayerRequest(\r\n      'friendly-matches',\r\n      this.http.get<FriendlyMatchHistoryDto[]>(\r\n        `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_ALL_MATCHES}`\r\n      )\r\n    );\r\n  }\r\n\r\n  getFriendlyMatchesBetweenPlayers(\r\n    player1Id: number,\r\n    player2Id: number\r\n  ): Observable<FriendlyMatchHistoryDto[]> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MATCH_ENDPOINTS.GET_MATCHES_BETWEEN_PLAYERS(\r\n      player1Id,\r\n      player2Id\r\n    )}`;\r\n    return this.http.get<FriendlyMatchHistoryDto[]>(url);\r\n  }\r\n\r\n  // Admin-specific Match Management\r\n  recordFriendlyMatchAsync(\r\n    matchData: RecordFriendlyMatchDto\r\n  ): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.RECORD_MATCH}`;\r\n    return this.http.post<ApiResponse>(url, matchData);\r\n  }\r\n\r\n  updateFriendlyMatchAsync(\r\n    matchId: number,\r\n    matchData: RecordFriendlyMatchDto\r\n  ): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.UPDATE_MATCH(\r\n      matchId\r\n    )}`;\r\n    return this.http.put<ApiResponse>(url, matchData);\r\n  }\r\n\r\n  deleteFriendlyMatchAsync(matchId: number): Observable<ApiResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.DELETE_MATCH(\r\n      matchId\r\n    )}`;\r\n    return this.http.delete<ApiResponse>(url);\r\n  }\r\n\r\n  // Statistics and Analysis\r\n  getOverallScoreBetweenPlayers(\r\n    player1Id: number,\r\n    player2Id: number\r\n  ): Observable<OverallScoreDto | null> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_OVERALL_SCORE(\r\n      player1Id,\r\n      player2Id\r\n    )}`;\r\n    return this.http.get<OverallScoreDto | null>(url);\r\n  }\r\n\r\n  // Shutout Results (Public endpoints only)\r\n  getAllShutoutResults(): Observable<ShutoutResultDto[]> {\r\n    return this.cacheService.cachePlayerRequest(\r\n      'friendly-shutouts',\r\n      this.http.get<ShutoutResultDto[]>(\r\n        `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_ALL_SHUTOUTS}`\r\n      )\r\n    );\r\n  }\r\n\r\n  getShutoutResultsByPlayer(playerId: number): Observable<ShutoutResultDto[]> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MATCH_ENDPOINTS.GET_SHUTOUTS_BY_PLAYER(playerId)}`;\r\n    return this.http.get<ShutoutResultDto[]>(url);\r\n  }\r\n\r\n  getShutoutResultByMatch(\r\n    matchId: number\r\n  ): Observable<ShutoutResultDto | null> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_SHUTOUT_BY_MATCH(\r\n      matchId\r\n    )}`;\r\n    return this.http.get<ShutoutResultDto | null>(url);\r\n  }\r\n\r\n  // Advanced Filtering (Public endpoints only)\r\n  getFilteredMatches(filter: any): Observable<any> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_FILTERED_MATCHES}`;\r\n    return this.http.get(url, { params: filter });\r\n  }\r\n\r\n  getPlayerMatches(playerId: number, filter: any): Observable<any> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.GET_PLAYER_MATCHES(\r\n      playerId\r\n    )}`;\r\n    return this.http.get(url, { params: filter });\r\n  }\r\n\r\n  getPlayerVsOpponentsMatches(\r\n    playerId: number,\r\n    opponentIds: number[],\r\n    filter: any\r\n  ): Observable<any> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MATCH_ENDPOINTS.GET_PLAYER_VS_OPPONENTS(playerId)}`;\r\n    return this.http.post(url, opponentIds, { params: filter });\r\n  }\r\n\r\n  // Test endpoint\r\n  testConnection(): Observable<any> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MATCH_ENDPOINTS.TEST}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  // Cache Management (for admin component compatibility)\r\n  refreshFriendlyPlayers(): void {\r\n    this.cacheService.remove('friendly-players');\r\n  }\r\n\r\n  refreshFriendlyMatches(): void {\r\n    this.cacheService.remove('friendly-matches');\r\n  }\r\n\r\n  refreshFriendlyShutouts(): void {\r\n    this.cacheService.remove('friendly-shutouts');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../environments/environment';\r\nimport {\r\n  FriendlyMessageResponse,\r\n  FriendlyMessageStatsResponse,\r\n  FRIENDLY_MESSAGE_ENDPOINTS,\r\n} from 'friendly-message-types';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class FriendlyMessageService {\r\n  private baseUrl = environment.apiUrl;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  // Player Actions\r\n  sendMessageToAdmin(\r\n    playerId: number,\r\n    content: string\r\n  ): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.SEND_MESSAGE}`;\r\n    return this.http.post<FriendlyMessageResponse>(url, { content });\r\n  }\r\n\r\n  getPlayerMessages(playerId: number): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.GET_PLAYER_MESSAGES}`;\r\n    return this.http.get<FriendlyMessageResponse>(url);\r\n  }\r\n\r\n  // Admin Actions\r\n  getAllMessages(): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.GET_ALL_MESSAGES}`;\r\n    return this.http.get<FriendlyMessageResponse>(url);\r\n  }\r\n\r\n  getUnreadMessages(): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.GET_UNREAD_MESSAGES}`;\r\n    return this.http.get<FriendlyMessageResponse>(url);\r\n  }\r\n\r\n  getReadMessages(): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.GET_READ_MESSAGES}`;\r\n    return this.http.get<FriendlyMessageResponse>(url);\r\n  }\r\n\r\n  getPlayerConversation(playerId: number): Observable<FriendlyMessageResponse> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MESSAGE_ENDPOINTS.GET_PLAYER_CONVERSATION(playerId)}`;\r\n    return this.http.get<FriendlyMessageResponse>(url);\r\n  }\r\n\r\n  sendAdminReply(\r\n    playerId: string,\r\n    content: string\r\n  ): Observable<FriendlyMessageResponse> {\r\n    if (!playerId) {\r\n      throw new Error('معرف اللاعب غير صحيح');\r\n    }\r\n    \r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.SEND_ADMIN_REPLY(\r\n      playerId\r\n    )}`;\r\n    return this.http.post<FriendlyMessageResponse>(url, { content });\r\n  }\r\n\r\n  markMessageAsRead(messageId: number): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.MARK_MESSAGE_READ(\r\n      messageId\r\n    )}`;\r\n    return this.http.post<FriendlyMessageResponse>(url, { marked: true });\r\n  }\r\n\r\n  markAllPlayerMessagesAsRead(\r\n    playerId: number\r\n  ): Observable<FriendlyMessageResponse> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MESSAGE_ENDPOINTS.MARK_ALL_PLAYER_MESSAGES_READ(playerId)}`;\r\n    return this.http.post<FriendlyMessageResponse>(url, { marked: true });\r\n  }\r\n\r\n  deleteMessage(messageId: number): Observable<FriendlyMessageResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.DELETE_MESSAGE(\r\n      messageId\r\n    )}`;\r\n    return this.http.post<FriendlyMessageResponse>(url, { marked: true });\r\n  }\r\n\r\n  // Statistics\r\n  getUnreadMessagesCount(): Observable<FriendlyMessageStatsResponse> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.GET_UNREAD_COUNT}`;\r\n    return this.http.get<FriendlyMessageStatsResponse>(url);\r\n  }\r\n\r\n  getPlayerUnreadMessagesCount(\r\n    playerId: number\r\n  ): Observable<FriendlyMessageStatsResponse> {\r\n    const url = `${\r\n      this.baseUrl\r\n    }${FRIENDLY_MESSAGE_ENDPOINTS.GET_PLAYER_UNREAD_COUNT(playerId)}`;\r\n    return this.http.get<FriendlyMessageStatsResponse>(url);\r\n  }\r\n\r\n  // Test endpoint\r\n  testConnection(): Observable<any> {\r\n    const url = `${this.baseUrl}${FRIENDLY_MESSAGE_ENDPOINTS.TEST}`;\r\n    return this.http.get(url);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from '../../../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MultiTournamentService {\r\n  private readonly apiUrl = `${environment.apiUrl}/multi`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  // ============================\r\n  // 🏆 Tournament Management\r\n  // ============================\r\n\r\n  /**\r\n   * إنشاء بطولة جديدة\r\n   * POST /api/multi/tournaments\r\n   */\r\n  createTournament(request: CreateTournamentDto): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(`${this.apiUrl}/tournaments`, request);\r\n  }\r\n\r\n  /**\r\n   * تحديث حالة البطولة\r\n   * PUT /api/multi/tournaments/{id}/status\r\n   */\r\n  updateTournamentStatus(\r\n    id: number,\r\n    request: UpdateTournamentStatusDto\r\n  ): Observable<ApiResponse> {\r\n    return this.http.put<ApiResponse>(\r\n      `${this.apiUrl}/tournaments/${id}/status`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * حذف البطولة\r\n   * DELETE /api/multi/tournaments/{id}\r\n   */\r\n  deleteTournament(id: number): Observable<ApiResponse> {\r\n    return this.http.delete<ApiResponse>(`${this.apiUrl}/tournaments/${id}`);\r\n  }\r\n\r\n  // ============================\r\n  // 👥 Team Management\r\n  // ============================\r\n\r\n  /**\r\n   * إنشاء فريق جديد\r\n   * POST /api/multi/tournaments/{tournamentId}/teams\r\n   */\r\n  createTeam(\r\n    tournamentId: number,\r\n    request: TeamCreateDto\r\n  ): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/tournaments/${tournamentId}/teams`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * تحديث الفريق\r\n   * PUT /api/multi/teams/{teamId}\r\n   */\r\n  updateTeam(teamId: number, request: TeamUpdateDto): Observable<ApiResponse> {\r\n    return this.http.put<ApiResponse>(\r\n      `${this.apiUrl}/teams/${teamId}`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * استبدال لاعب في الفريق (أثناء البطولة)\r\n   * POST /api/multi/teams/{teamId}/replace-player\r\n   */\r\n  replacePlayer(\r\n    teamId: number,\r\n    request: PlayerReplaceDto\r\n  ): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/teams/${teamId}/replace-player`,\r\n      request\r\n    );\r\n  }\r\n\r\n  // ============================\r\n  // ⚔️ Match & Results\r\n  // ============================\r\n\r\n  /**\r\n   * تسجيل نتيجة مباراة\r\n   * POST /api/multi/matches/{matchId}/result\r\n   */\r\n  recordMatchResult(\r\n    matchId: number,\r\n    request: MultiMatchResultDto\r\n  ): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/matches/${matchId}/result`,\r\n      request\r\n    );\r\n  }\r\n\r\n  /**\r\n   * إلغاء نتيجة مباراة (Undo)\r\n   * POST /api/multi/matches/{matchId}/undo\r\n   */\r\n  undoMatchResult(matchId: number): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/matches/${matchId}/undo`,\r\n      {}\r\n    );\r\n  }\r\n\r\n  /**\r\n   * جلب مباريات البطولة\r\n   * GET /api/multi/tournaments/{id}/matches\r\n   */\r\n  getTournamentMatches(id: number): Observable<ApiResponse<TeamMatchesDto[]>> {\r\n    return this.http.get<ApiResponse<TeamMatchesDto[]>>(\r\n      `${this.apiUrl}/tournaments/${id}/matches`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * جلب مباريات البطولة النشطة\r\n   * GET /api/multi/tournaments/active/matches\r\n   */\r\n  getActiveTournamentMatches(): Observable<ApiResponse<TeamMatchesDto[]>> {\r\n    return this.http.get<ApiResponse<TeamMatchesDto[]>>(\r\n      `${this.apiUrl}/tournaments/active/matches`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * جلب مباريات لاعب معين\r\n   * GET /api/multi/players/{playerId}/matches\r\n   */\r\n  getPlayerMatches(\r\n    playerId: number\r\n  ): Observable<ApiResponse<PlayerMatchesDto>> {\r\n    return this.http.get<ApiResponse<PlayerMatchesDto>>(\r\n      `${this.apiUrl}/players/${playerId}/matches`\r\n    );\r\n  }\r\n\r\n  // ============================\r\n  // 👤 Player Management\r\n  // ============================\r\n\r\n  /**\r\n   * جلب كل اللاعبين\r\n   * GET /api/multi/players\r\n   */\r\n  getAllPlayers(): Observable<ApiResponse<PlayerDetail[]>> {\r\n    return this.http.get<ApiResponse<PlayerDetail[]>>(`${this.apiUrl}/players`);\r\n  }\r\n\r\n  /**\r\n   * جلب لاعب محدد\r\n   * GET /api/multi/players/{playerId}\r\n   */\r\n  getPlayerById(playerId: number): Observable<ApiResponse<PlayerDetail>> {\r\n    return this.http.get<ApiResponse<PlayerDetail>>(\r\n      `${this.apiUrl}/players/${playerId}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * إضافة لاعب جديد\r\n   * POST /api/multi/players\r\n   */\r\n  addNewPlayer(request: AddPlayerDto): Observable<ApiResponse<PlayerDetail>> {\r\n    return this.http.post<ApiResponse<PlayerDetail>>(\r\n      `${this.apiUrl}/players`,\r\n      request\r\n    );\r\n  }\r\n\r\n  // ============================\r\n  // 📊 General Data\r\n  // ============================\r\n\r\n  /**\r\n   * جلب البطولة النشطة (Started فقط)\r\n   * GET /api/multi/tournaments/active\r\n   */\r\n  getActiveTournament(): Observable<ApiResponse<MultiTournamentDto | null>> {\r\n    return this.http\r\n      .get<ApiResponse<MultiTournamentDto>>(`${this.apiUrl}/tournaments/active`)\r\n      .pipe(\r\n        map((response: ApiResponse<MultiTournamentDto>) => {\r\n          if (response.success && response.data) {\r\n            // تأكد أن البطولة نشطة (Started) مش مكتملة (Finished)\r\n            if (response.data.status === 'Finished') {\r\n              return {\r\n                success: false,\r\n                message: 'No active tournament found',\r\n                data: null,\r\n              };\r\n            }\r\n          }\r\n          return response;\r\n        })\r\n      );\r\n  }\r\n\r\n  /**\r\n   * جلب كل البطولات\r\n   * GET /api/multi/tournaments\r\n   */\r\n  getAllTournaments(): Observable<ApiResponse<MultiTournamentDto[]>> {\r\n    return this.http.get<ApiResponse<MultiTournamentDto[]>>(\r\n      `${this.apiUrl}/tournaments`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * جلب بطولة محددة\r\n   * GET /api/multi/tournaments/{id}\r\n   */\r\n  getTournament(id: number): Observable<ApiResponse<MultiTournamentDto>> {\r\n    return this.http.get<ApiResponse<MultiTournamentDto>>(\r\n      `${this.apiUrl}/tournaments/${id}`\r\n    );\r\n  }\r\n\r\n  /**\r\n   * جلب ترتيب البطولة\r\n   * GET /api/multi/tournaments/{id}/standings\r\n   */\r\n  getTournamentStandings(\r\n    id: number\r\n  ): Observable<ApiResponse<TournamentStandingsDto>> {\r\n    return this.http.get<ApiResponse<TournamentStandingsDto>>(\r\n      `${this.apiUrl}/tournaments/${id}/standings`\r\n    );\r\n  }\r\n\r\n  // ============================\r\n  // 🔧 Helper Methods\r\n  // ============================\r\n\r\n  /**\r\n   * بدء البطولة\r\n   * POST /api/multi/tournaments/{id}/start\r\n   */\r\n  startTournament(id: number): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/tournaments/${id}/start`,\r\n      {}\r\n    );\r\n  }\r\n\r\n  /**\r\n   * إنهاء البطولة\r\n   * POST /api/multi/tournaments/{id}/finish\r\n   */\r\n  finishTournament(id: number): Observable<ApiResponse> {\r\n    return this.http.post<ApiResponse>(\r\n      `${this.apiUrl}/tournaments/${id}/finish`,\r\n      {}\r\n    );\r\n  }\r\n}\r\n\r\n// ============================\r\n// 🔗 Types & Interfaces\r\n// ============================\r\n\r\nexport interface ApiResponse<T = any> {\r\n  success: boolean;\r\n  message: string;\r\n  data?: T;\r\n}\r\n\r\n// Request DTOs\r\nexport interface CreateTournamentDto {\r\n  name: string;\r\n  systemOfScoring: 'Classic' | 'Points';\r\n  teamCount: number;\r\n  playersPerTeam: number;\r\n}\r\n\r\nexport interface UpdateTournamentStatusDto {\r\n  status: 'Started' | 'Finished';\r\n}\r\n\r\nexport interface TeamCreateDto {\r\n  teamName: string;\r\n  playerIds: number[];\r\n}\r\n\r\nexport interface TeamUpdateDto {\r\n  teamName?: string;\r\n  playerIds?: number[];\r\n}\r\n\r\nexport interface MultiMatchResultDto {\r\n  winnerId?: number; // للكلاسيك\r\n  score1?: number; // للنقاط\r\n  score2?: number; // للنقاط\r\n}\r\n\r\nexport interface PlayerReplaceDto {\r\n  replacedPlayerId: number;\r\n  newPlayerId: number;\r\n}\r\n\r\nexport interface AddPlayerDto {\r\n  fullName: string;\r\n}\r\n\r\n// Response DTOs\r\nexport interface MatchDetail {\r\n  multiMatchId: number;\r\n  player1Id: number;\r\n  player1Name: string;\r\n  player2Id: number;\r\n  player2Name: string;\r\n  team1Id: number;\r\n  team1Name: string;\r\n  team2Id: number;\r\n  team2Name: string;\r\n  score1: number | null;\r\n  score2: number | null;\r\n  winnerId: number | null;\r\n  winnerName: string | null;\r\n  isCompleted: boolean;\r\n  completedOn: string | null;\r\n}\r\n\r\nexport interface PlayerDetail {\r\n  playerId: number;\r\n  fullName: string;\r\n  isActive: boolean;\r\n  createdOn: string;\r\n  multiParticipations: number;\r\n  multiTitlesWon: number;\r\n}\r\n\r\nexport interface TeamDetail {\r\n  multiTeamId: number;\r\n  teamName: string;\r\n  totalPoints: number;\r\n  wins: number;\r\n  draws: number;\r\n  losses: number;\r\n  createdOn: string;\r\n  players: PlayerDetail[];\r\n}\r\n\r\nexport interface MultiTournamentDto {\r\n  multiTournamentId: number;\r\n  name: string;\r\n  systemOfScoring: 'Classic' | 'Points';\r\n  teamCount: number;\r\n  playersPerTeam: number;\r\n  status: 'Created' | 'Started' | 'Finished';\r\n  isActive: boolean;\r\n  createdOn: string;\r\n  startedOn: string | null;\r\n  finishedOn: string | null;\r\n  championTeamId: number | null;\r\n  championTeamName: string | null;\r\n  teams: TeamDetail[];\r\n}\r\n\r\nexport interface TeamMatchesDto {\r\n  team1Id: number;\r\n  team1Name: string;\r\n  team2Id: number;\r\n  team2Name: string;\r\n  matches: MatchDetail[];\r\n}\r\n\r\nexport interface PlayerMatchesDto {\r\n  playerId: number;\r\n  playerName: string;\r\n  tournamentId: number;\r\n  tournamentName: string;\r\n  totalMatches: number;\r\n  completedMatches: number;\r\n  pendingMatches: number;\r\n  matches: MatchDetail[];\r\n}\r\n\r\nexport interface StandingItem {\r\n  position: number;\r\n  multiTeamId: number;\r\n  teamName: string;\r\n  totalPoints: number;\r\n  wins: number;\r\n  draws: number;\r\n  losses: number;\r\n  matchesPlayed: number;\r\n}\r\n\r\nexport interface TournamentStandingsDto {\r\n  tournamentId: number;\r\n  tournamentName: string;\r\n  status: string;\r\n  championTeamId: number | null;\r\n  standings: StandingItem[];\r\n}\r\n","export interface LoginResponse {\r\n  success: boolean;\r\n  message: string;\r\n  token: string;\r\n  userRole?: string;\r\n}\r\n\r\nexport interface ResultResponse {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport interface Player {\r\n  playerId: number;\r\n  fullName: string;\r\n  wins: number;\r\n  losses: number;\r\n  draws: number;\r\n  points: number;\r\n  matchesPlayed: number;\r\n  rank: number;\r\n  winRate: number;\r\n  groupNumber?: number;\r\n}\r\n\r\nexport interface CommonResponse {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport interface MessagesResponse {\r\n  success: boolean;\r\n  message: string;\r\n  messages: Message[];\r\n}\r\nexport interface NoteResponse {\r\n  success: boolean;\r\n  message: string;\r\n  notes: Note[];\r\n}\r\n\r\nexport interface Note {\r\n  id: number;\r\n  content: string;\r\n  isDeleted: boolean;\r\n  isHidden: boolean;\r\n}\r\nexport interface Message {\r\n  id: number;\r\n  senderId: string;\r\n  senderFullName: string;\r\n  senderPhoneNumber: string;\r\n  content: string;\r\n  isRead: boolean;\r\n  isDeleted: boolean;\r\n  sentAt: string;\r\n  isFromAdmin: boolean;\r\n}\r\n\r\nexport enum TournamentStage {\r\n  League = 0, // القيمة الافتراضية\r\n  GroupStage = 1, // 1\r\n  QuarterFinals = 2, // 2\r\n  SemiFinals = 3, // 3\r\n  Final = 4, // 4\r\n}\r\n\r\nexport interface Match {\r\n  matchId: number;\r\n  score1: number;\r\n  score2: number;\r\n  isCompleted: boolean;\r\n  player1Name: string;\r\n  player2Name: string;\r\n  player1Id: number;\r\n  player2Id: number;\r\n  winnerId?: number | null;\r\n  stage?: TournamentStage;\r\n  tournamentStage?: string;\r\n}\r\n\r\nexport enum SystemOfLeague {\r\n  Points = 0,\r\n  Classic = 1,\r\n}\r\n\r\nexport interface StartLeagueDto {\r\n  name: string;\r\n  description: string;\r\n  typeOfLeague: LeagueType;\r\n  systemOfLeague: SystemOfLeague;\r\n  // Optional: applies when SystemOfLeague = Points\r\n  roundsPerMatch?: number;\r\n}\r\n\r\nexport enum LeagueType {\r\n  Single = 0,\r\n  Multi = 1,\r\n  Groups = 2,\r\n}\r\n\r\nexport interface League {\r\n  id: number;\r\n  name: string;\r\n  description: string;\r\n  createdOn: string;\r\n  typeOfLeague: LeagueType;\r\n  isFinished: boolean;\r\n  systemOfLeague?: SystemOfLeague;\r\n}\r\n\r\nexport interface LeagueResponse {\r\n  response: CommonResponse;\r\n  league: League;\r\n}\r\nexport interface AllLeagueMatches {\r\n  leagueId: number;\r\n  leagueName: string;\r\n  leagueDescription: string;\r\n  leagueType: number;\r\n  isFinished: boolean;\r\n  systemOfLeague: SystemOfLeague;\r\n  createdOn: string;\r\n  matches: Match[];\r\n}\r\n\r\nexport interface Group {\r\n  groupNumber: number;\r\n  players: Player[];\r\n  matches?: Match[];\r\n}\r\n\r\nexport interface AllLeagueRank {\r\n  leagueId: number;\r\n  leagueName: string;\r\n  leagueDescription: string;\r\n  leagueType: number;\r\n  systemOfLeague: SystemOfLeague;\r\n  isFinished: boolean;\r\n  createdOn: string;\r\n  players: Player[] | null;\r\n  groups: Group[] | null;\r\n  matches: Match[] | null;\r\n  knockoutMatches: Match[] | null;\r\n}\r\n\r\n// Multi-Tournament Types\r\nexport type SystemOfScoring = 'Classic' | 'Points';\r\nexport type TournamentStatus = 'Created' | 'Started' | 'Finished';\r\n\r\nexport interface Tournament {\r\n  multiTournamentId: number;\r\n  name: string;\r\n  systemOfScoring: SystemOfScoring;\r\n  teamCount: number;\r\n  playersPerTeam: number;\r\n  status: TournamentStatus;\r\n  isActive: boolean;\r\n  createdOn: string;\r\n  startedOn?: string;\r\n  finishedOn?: string;\r\n  championTeamId?: number;\r\n  championTeamName?: string;\r\n  teams: Team[];\r\n}\r\n\r\nexport interface Team {\r\n  multiTeamId: number;\r\n  teamName: string;\r\n  totalPoints: number;\r\n  wins: number;\r\n  draws: number;\r\n  losses: number;\r\n  createdOn: string;\r\n  players: MultiPlayer[];\r\n}\r\n\r\nexport interface MultiPlayer {\r\n  playerId: number;\r\n  fullName: string;\r\n  isActive: boolean;\r\n  createdOn: string;\r\n  multiParticipations: number;\r\n  multiTitlesWon: number;\r\n}\r\n\r\nexport interface MultiMatch {\r\n  multiMatchId: number;\r\n  team1Id: number;\r\n  team1Name: string;\r\n  team2Id: number;\r\n  team2Name: string;\r\n  player1Id: number;\r\n  player1Name: string;\r\n  player2Id: number;\r\n  player2Name: string;\r\n  score1?: number;\r\n  score2?: number;\r\n  totalPoints1?: number;\r\n  totalPoints2?: number;\r\n  isCompleted: boolean;\r\n  completedOn?: string;\r\n}\r\n\r\nexport interface MatchFixture {\r\n  team1Id: number;\r\n  team1Name: string;\r\n  team2Id: number;\r\n  team2Name: string;\r\n  matches: MultiMatch[];\r\n}\r\n\r\nexport interface Standings {\r\n  tournamentId: number;\r\n  tournamentName: string;\r\n  status: string;\r\n  championTeamId?: number;\r\n  standings: TeamStanding[];\r\n}\r\n\r\nexport interface TeamStanding {\r\n  position: number;\r\n  multiTeamId: number;\r\n  teamName: string;\r\n  totalPoints: number;\r\n  wins: number;\r\n  draws: number;\r\n  losses: number;\r\n  matchesPlayed: number;\r\n}\r\n\r\n// Request DTOs\r\nexport interface CreateTournamentRequest {\r\n  name: string;\r\n  systemOfScoring: SystemOfScoring;\r\n  teamCount: number;\r\n  playersPerTeam: number;\r\n}\r\n\r\nexport interface UpdateTournamentStatusRequest {\r\n  status: TournamentStatus;\r\n}\r\n\r\nexport interface CreateTeamRequest {\r\n  teamName: string;\r\n  playerIds: number[];\r\n}\r\n\r\nexport interface UpdateTeamRequest {\r\n  teamName?: string;\r\n  playerIds?: number[];\r\n}\r\n\r\nexport interface MatchResultRequest {\r\n  score1?: number;\r\n  score2?: number;\r\n  totalPoints1?: number;\r\n  totalPoints2?: number;\r\n}\r\n\r\nexport interface AddPlayerRequest {\r\n  fullName: string;\r\n}\r\n\r\n// API Response\r\nexport interface ApiResponse<T = any> {\r\n  success: boolean;\r\n  message: string;\r\n  data?: T;\r\n}\r\n","<div *ngIf=\"currentLeague\" class=\"mb-8\">\r\n  <div\r\n    class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg p-6 text-center\"\r\n  >\r\n    <!-- معلومات إضافية للبطولات من نوع المجموعات -->\r\n    <div *ngIf=\"isGroupsTournament()\" class=\"mt-6\">\r\n      <div class=\"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-4\">\r\n        <h4 class=\"text-lg font-bold text-white mb-2\">\r\n          Groups Tournament Info\r\n        </h4>\r\n        <div class=\"flex justify-center space-x-6 text-sm\">\r\n          <span class=\"text-blue-200\">\r\n            <i class=\"fas fa-users mr-1\"></i>\r\n            Groups: 4\r\n          </span>\r\n          <span class=\"text-green-200\">\r\n            <i class=\"fas fa-trophy mr-1\"></i>\r\n            Winners Advance\r\n          </span>\r\n          <span class=\"text-yellow-200\">\r\n            <i class=\"fas fa-calendar mr-1\"></i>\r\n            Knockout Stage\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- رسالة عندما لا تكون هناك بطولة نشطة -->\r\n<div *ngIf=\"!currentLeague\" class=\"mb-8\">\r\n  <div\r\n    class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg p-6 text-center\"\r\n  >\r\n    <h3 class=\"text-xl font-bold text-white mb-2\">No Active Tournament</h3>\r\n    <p class=\"text-gray-300\">There is currently no active tournament.</p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { LeagueService } from '../../core/services/league.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { League, LeagueType, SystemOfLeague } from '../../models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-tournament-info',\r\n  templateUrl: './tournament-info.component.html',\r\n  styleUrls: ['./tournament-info.component.css'],\r\n})\r\nexport class TournamentInfoComponent implements OnInit {\r\n  currentLeague: League | null = null;\r\n  LeagueType = LeagueType;\r\n  SystemOfLeague = SystemOfLeague;\r\n\r\n  constructor(\r\n    private leagueService: LeagueService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadCurrentLeague();\r\n  }\r\n\r\n  private loadCurrentLeague(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (response: any) => {\r\n        this.currentLeague = response.league;\r\n      },\r\n      error: (err: any) => {\r\n        console.error('Tournament Info - خطأ في جلب الدوري:', err);\r\n        this.currentLeague = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  // الحصول على نوع البطولة كنص\r\n  getLeagueTypeText(): string {\r\n    if (!this.currentLeague) return 'Unknown';\r\n\r\n    switch (this.currentLeague.typeOfLeague) {\r\n      case LeagueType.Single:\r\n        return 'Single League';\r\n      case LeagueType.Multi:\r\n        return 'Multi League';\r\n      case LeagueType.Groups:\r\n        return 'Groups Tournament';\r\n      default:\r\n        return 'Unknown';\r\n    }\r\n  }\r\n\r\n  // الحصول على نظام البطولة كنص\r\n  getSystemOfLeagueText(): string {\r\n    if (!this.currentLeague?.systemOfLeague) return 'Unknown';\r\n\r\n    const system = this.currentLeague.systemOfLeague as any;\r\n    return system === 0 ? 'Points System' : 'Classic System';\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.currentLeague?.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague?.typeOfLeague) === 'Groups'\r\n    );\r\n  }\r\n\r\n  // الحصول على تاريخ البطولة\r\n  getFormattedDate(): string {\r\n    if (!this.currentLeague?.createdOn) return 'Unknown';\r\n    return new Date(this.currentLeague.createdOn).toLocaleDateString('ar-EG', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    });\r\n  }\r\n\r\n  // الحصول على حالة البطولة\r\n  getTournamentStatus(): { text: string; color: string } {\r\n    if (!this.currentLeague) {\r\n      return { text: 'No Active Tournament', color: 'text-gray-400' };\r\n    }\r\n\r\n    if (this.currentLeague.isFinished) {\r\n      return { text: 'Finished', color: 'text-red-500' };\r\n    } else {\r\n      return { text: 'Live Now!', color: 'text-green-500' };\r\n    }\r\n  }\r\n}\r\n","<div class=\"sm:container mx-auto p-4\">\r\n  <!-- Tournament Info Component -->\r\n  <app-tournament-info></app-tournament-info>\r\n\r\n  <!-- عرض جداول مواجهات المجموعات -->\r\n  <div\r\n    *ngIf=\"currentLeague && isGroupsTournament() && hasGroupedPlayers() && !started\"\r\n    class=\"space-y-8\"\r\n  >\r\n    <!-- عرض المجموعات في شبكة -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      <div\r\n        *ngFor=\"let groupNumber of getGroupNumbers()\"\r\n        class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700\"\r\n      >\r\n        <div\r\n          class=\"bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-t-lg\"\r\n        >\r\n          <h3 class=\"text-xl font-bold text-white text-center\">\r\n            Group {{ groupNumber }} Matches\r\n          </h3>\r\n        </div>\r\n\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"w-full text-sm text-left rtl:text-right text-gray-100\">\r\n            <thead\r\n              class=\"text-xs font-bold text-gray-100 uppercase bg-gray-800\"\r\n            >\r\n              <tr class=\"text-center\">\r\n                <th\r\n                  *ngFor=\"let player of getGroupedPlayers()[groupNumber]\"\r\n                  scope=\"col\"\r\n                  class=\"px-3 py-3 cursor-pointer hover:bg-gray-700 transition-all min-w-[70px]\"\r\n                  (click)=\"highlightColumn(player.playerId)\"\r\n                  [ngClass]=\"\r\n                    highlightedColumn == player.playerId\r\n                      ? 'text-white bg-gray-700'\r\n                      : 'text-white'\r\n                  \"\r\n                >\r\n                  {{ player.fullName }}\r\n                </th>\r\n                <th scope=\"col\" class=\"px-4 py-3 text-white sticky-column\">\r\n                  المباراة\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                *ngFor=\"\r\n                  let player1 of getGroupedPlayers()[groupNumber];\r\n                  let i = index\r\n                \"\r\n                class=\"text-center hover:bg-gray-600\"\r\n                [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n              >\r\n                <td\r\n                  *ngFor=\"let player2 of getGroupedPlayers()[groupNumber]\"\r\n                  class=\"transition-all\"\r\n                  [ngClass]=\"{\r\n                    'shadow-lg shadow-gray-100':\r\n                      highlightedColumn === player2.playerId\r\n                  }\"\r\n                >\r\n                  <span\r\n                    *ngIf=\"player1.playerId === player2.playerId\"\r\n                    class=\"font-bold text-white\"\r\n                  >\r\n                    N/A\r\n                  </span>\r\n                  <span *ngIf=\"player1.playerId !== player2.playerId\">\r\n                    <ng-container\r\n                      *ngIf=\"\r\n                        systemOfLeague === SystemOfLeague.Points;\r\n                        else classicResult\r\n                      \"\r\n                    >\r\n                      <span [ngClass]=\"getMatchResult(player2, player1).color\">\r\n                        {{ getMatchResult(player2, player1).result }}\r\n                      </span>\r\n                    </ng-container>\r\n                    <ng-template #classicResult>\r\n                      <span\r\n                        [ngClass]=\"getClassicResult(player2, player1).color\"\r\n                      >\r\n                        {{ getClassicResult(player2, player1).result }}\r\n                      </span>\r\n                    </ng-template>\r\n                  </span>\r\n                </td>\r\n                <td class=\"px-6 py-4 font-bold text-white sticky-column\">\r\n                  {{ player1.fullName }}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"started\" class=\"flex justify-center text-white\">\r\n    <div class=\"w-1/2 text-center mt-10\">\r\n      <h1\r\n        class=\"mb-4 text-4xl font-extrabold leading-none tracking-tight md:text-5xl lg:text-6xl text-white\"\r\n      >\r\n        The League Will Start Soon !\r\n      </h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PlayerService } from '../../core/services/player.service';\r\nimport { MatchService } from '../../core/services/match.service';\r\nimport { LeagueService } from '../../core/services/league.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport {\r\n  Player,\r\n  Match,\r\n  League,\r\n  LeagueType,\r\n  SystemOfLeague,\r\n} from '../../models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-groups-matches-table',\r\n  templateUrl: './groups-matches-table.component.html',\r\n  styleUrls: ['./groups-matches-table.component.css'],\r\n})\r\nexport class GroupsMatchesTableComponent implements OnInit {\r\n  players: Player[] = [];\r\n  matches: Match[] = [];\r\n  currentLeague: League | null = null;\r\n  started: boolean = true;\r\n  highlightedColumn: number | null = null;\r\n  systemOfLeague?: SystemOfLeague;\r\n  SystemOfLeague = SystemOfLeague;\r\n  LeagueType = LeagueType;\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private matchService: MatchService,\r\n    private leagueService: LeagueService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadCurrentLeague();\r\n    this.loadPlayers();\r\n    this.loadMatches();\r\n    this.loadLeagueSystem();\r\n  }\r\n\r\n  private loadCurrentLeague(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (response: any) => {\r\n        this.currentLeague = response.league;\r\n      },\r\n      error: (err: any) => {\r\n        this.currentLeague = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadPlayers(): void {\r\n    this.playerService.getrank().subscribe({\r\n      next: (response) => {\r\n        this.players = response;\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error('حدث خطأ أثناء جلب اللاعبين');\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadMatches(): void {\r\n    this.matchService.getMatches().subscribe({\r\n      next: (response) => {\r\n        if (response) {\r\n          this.matches = response;\r\n          this.started = this.matches.every(\r\n            (match) => match.score1 == 0 && match.score2 == 0\r\n          );\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error('حصل خطأ أثناء جلب الماتشات');\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadLeagueSystem(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (res) => {\r\n        this.systemOfLeague = res.league?.systemOfLeague;\r\n      },\r\n      error: () => {\r\n        this.toastr.error('حدث خطأ أثناء جلب نظام الدوري');\r\n      },\r\n    });\r\n  }\r\n\r\n  // تجميع اللاعبين حسب المجموعات\r\n  getGroupedPlayers(): { [groupNumber: number]: Player[] } {\r\n    const groupedPlayers: { [groupNumber: number]: Player[] } = {};\r\n\r\n    // تجميع اللاعبين حسب groupNumber من الخادم فقط\r\n    this.players.forEach((player) => {\r\n      if (player.groupNumber && player.groupNumber > 0) {\r\n        if (!groupedPlayers[player.groupNumber]) {\r\n          groupedPlayers[player.groupNumber] = [];\r\n        }\r\n        groupedPlayers[player.groupNumber].push(player);\r\n      }\r\n    });\r\n\r\n    return groupedPlayers;\r\n  }\r\n\r\n  // الحصول على أرقام المجموعات مرتبة\r\n  getGroupNumbers(): number[] {\r\n    const groupedPlayers = this.getGroupedPlayers();\r\n    return Object.keys(groupedPlayers)\r\n      .map((key) => parseInt(key))\r\n      .sort((a, b) => a - b);\r\n  }\r\n\r\n  // التحقق من وجود لاعبين في المجموعات\r\n  hasGroupedPlayers(): boolean {\r\n    const groupedPlayers = this.getGroupedPlayers();\r\n    return Object.keys(groupedPlayers).length > 0;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.currentLeague?.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague?.typeOfLeague) === 'Groups'\r\n    );\r\n  }\r\n\r\n  // الحصول على نتيجة المباراة بين لاعبين\r\n  getMatchResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n\r\n    let colorClass = 'text-white ';\r\n    if (player1Score > player2Score) {\r\n      colorClass = 'text-green-600 font-bold';\r\n    } else if (player1Score < player2Score) {\r\n      colorClass = 'text-red-600 font-bold';\r\n    } else if (player1Score == player2Score && player1Score != 0) {\r\n      colorClass = 'text-gray-400 font-bold text-yellow-400';\r\n    }\r\n\r\n    return { result: `${player1Score} - ${player2Score}`, color: colorClass };\r\n  }\r\n\r\n  // الحصول على نتيجة المباراة بالعربية\r\n  getClassicResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n    if (player1Score > player2Score) {\r\n      return { result: 'فوز', color: 'text-green-600 font-bold' };\r\n    } else if (player1Score < player2Score) {\r\n      return { result: 'خسارة', color: 'text-red-600 font-bold' };\r\n    } else if (player1Score === player2Score && player1Score !== 0) {\r\n      return { result: 'تعادل', color: 'text-yellow-400 font-bold' };\r\n    }\r\n    return { result: '-', color: 'text-gray-500' };\r\n  }\r\n\r\n  // تمييز العمود\r\n  highlightColumn(playerId: number) {\r\n    this.highlightedColumn =\r\n      this.highlightedColumn === playerId ? null : playerId;\r\n  }\r\n}\r\n","<div class=\"p-4\">\r\n  <h2 class=\"text-3xl font-bold text-white text-center mb-6 fa-bold\">\r\n    Games Table\r\n  </h2>\r\n\r\n  <div *ngIf=\"!currentLeague\" class=\"flex justify-center text-gray-500\">\r\n    <div class=\"w-1/2 text-center mt-10\">\r\n      <h1\r\n        class=\"mb-4 text-4xl font-extrabold leading-none tracking-tight md:text-5xl lg:text-6xl text-white\"\r\n      >\r\n        The League Will Start Soon !\r\n      </h1>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- عرض مكون مواجهات المجموعات للبطولات من نوع Groups -->\r\n  <app-groups-matches-table\r\n    *ngIf=\"currentLeague && isGroupsTournament()\"\r\n  ></app-groups-matches-table>\r\n\r\n  <!-- عرض الجدول العادي للبطولات الأخرى -->\r\n  <div\r\n    *ngIf=\"currentLeague && !isGroupsTournament()\"\r\n    class=\"table-container relative overflow-x-auto shadow-md sm:rounded-lg\"\r\n  >\r\n    <table class=\"w-full text-sm text-left rtl:text-right text-gray-400\">\r\n      <thead class=\"text-xs uppercase\">\r\n        <tr class=\"text-center\">\r\n          <th\r\n            *ngFor=\"let player of players; let i = index\"\r\n            scope=\"col\"\r\n            class=\"px-6 py-3 cursor-pointer hover:bg-gray-400 transition-all min-w-[70px] sticky-header\"\r\n            (click)=\"highlightColumn(player.playerId)\"\r\n            [ngClass]=\"\r\n              highlightedColumn == player.playerId\r\n                ? 'highlighted-header'\r\n                : 'text-white'\r\n            \"\r\n            [style.--cell-index]=\"i\"\r\n            [style.--total-cells]=\"players.length\"\r\n          >\r\n            {{ player.fullName }}\r\n          </th>\r\n          <th scope=\"col\" class=\"px-4 py-3 text-white sticky-corner\">\r\n            المباراة\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          *ngFor=\"let player1 of players; let i = index\"\r\n          class=\"text-center hover:bg-gray-600\"\r\n          [ngClass]=\"i % 2 === 0 ? 'bg-gray-900 ' : ' bg-gray-950'\"\r\n        >\r\n          <td\r\n            *ngFor=\"let player2 of players\"\r\n            class=\"transition-all\"\r\n            [ngClass]=\"{\r\n              'highlighted-cell': highlightedColumn === player2.playerId\r\n            }\"\r\n          >\r\n            <span\r\n              *ngIf=\"player1.playerId === player2.playerId\"\r\n              class=\"font-bold text-white\"\r\n            >\r\n              N/A\r\n            </span>\r\n            <span *ngIf=\"player1.playerId !== player2.playerId\">\r\n              <ng-container\r\n                *ngIf=\"\r\n                  systemOfLeague === SystemOfLeague.Points;\r\n                  else classicResult\r\n                \"\r\n              >\r\n                <span [ngClass]=\"getMatchResult(player2, player1).color\">\r\n                  {{ getMatchResult(player2, player1).result }}\r\n                </span>\r\n              </ng-container>\r\n              <ng-template #classicResult>\r\n                <span [ngClass]=\"getClassicResult(player2, player1).color\">\r\n                  {{ getClassicResult(player2, player1).result }}\r\n                </span>\r\n              </ng-template>\r\n            </span>\r\n          </td>\r\n          <td class=\"px-6 py-4 font-bold text-white sticky-column\">\r\n            {{ player1.fullName }}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n","import { Component, HostListener, OnInit } from '@angular/core';\r\nimport { PlayerService } from './../../core/services/player.service';\r\nimport { MatchService } from 'src/app/core/services/match.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport {\r\n  Match,\r\n  Player,\r\n  SystemOfLeague,\r\n  League,\r\n  LeagueType,\r\n} from 'src/app/models/interfaces';\r\nimport { LeagueService } from 'src/app/core/services/league.service';\r\n\r\n@Component({\r\n  selector: 'app-league-table',\r\n  templateUrl: './league-table.component.html',\r\n  styleUrls: ['./league-table.component.css'],\r\n})\r\nexport class LeagueTableComponent implements OnInit {\r\n  players: Player[] = [];\r\n  matches: Match[] = [];\r\n  started: boolean = true;\r\n  highlightedColumn: number | null = null;\r\n  systemOfLeague?: SystemOfLeague;\r\n  currentLeague: League | null = null;\r\n  SystemOfLeague = SystemOfLeague; // لسهولة الاستخدام في الـ template\r\n  LeagueType = LeagueType;\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private matchService: MatchService,\r\n    private toastr: ToastrService,\r\n    private leagueService: LeagueService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadCurrentLeague();\r\n    this.loadPlayers();\r\n    this.loadMatches();\r\n    this.loadLeagueSystem();\r\n  }\r\n\r\n  loadPlayers(): void {\r\n    this.playerService.getPlayers().subscribe({\r\n      next: (response) => {\r\n        if (response) {\r\n          this.players = response;\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error('حصل خطأ أثناء جلب اللاعبين');\r\n      },\r\n    });\r\n  }\r\n\r\n  loadMatches(): void {\r\n    this.matchService.getMatches().subscribe({\r\n      next: (response) => {\r\n        if (response) {\r\n          this.matches = response;\r\n          this.started = this.matches.every(\r\n            (match) => match.score1 == 0 && match.score2 == 0\r\n          );\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error('حصل خطأ أثناء جلب الماتشات');\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadCurrentLeague(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (response: any) => {\r\n        this.currentLeague = response.league;\r\n      },\r\n      error: (err: any) => {\r\n        console.error('League Table - خطأ في جلب الدوري:', err);\r\n        this.currentLeague = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  loadLeagueSystem(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (res) => {\r\n        // Normalize possible string/number responses from API\r\n        const rawValue =\r\n          res.league?.systemOfLeague ?? this.currentLeague?.systemOfLeague;\r\n        this.systemOfLeague = this.coerceSystemType(rawValue);\r\n      },\r\n      error: () => {\r\n        this.toastr.error('حدث خطأ أثناء جلب نظام الدوري');\r\n      },\r\n    });\r\n  }\r\n\r\n  // Ensure compatibility with both numeric enum and string values from API\r\n  private coerceSystemType(value: unknown): SystemOfLeague | undefined {\r\n    if (typeof value === 'number') {\r\n      if (value === SystemOfLeague.Points || value === SystemOfLeague.Classic) {\r\n        return value as SystemOfLeague;\r\n      }\r\n      return undefined;\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      const v = value.toLowerCase();\r\n      if (v === 'points' || v === '0') return SystemOfLeague.Points;\r\n      if (v === 'classic' || v === '1') return SystemOfLeague.Classic;\r\n      return undefined;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  getMatchResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n\r\n    let colorClass = 'text-white ';\r\n    if (player1Score > player2Score) {\r\n      colorClass = 'text-green-600 font-bold';\r\n    } else if (player1Score < player2Score) {\r\n      colorClass = 'text-red-600 font-bold';\r\n    } else if (player1Score == player2Score && player1Score != 0) {\r\n      colorClass = 'text-gray-400 font-bold text-yellow-400';\r\n    }\r\n\r\n    return { result: `${player1Score} - ${player2Score}`, color: colorClass };\r\n  }\r\n\r\n  getClassicResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n    if (player1Score > player2Score) {\r\n      return { result: 'فوز', color: 'text-green-600 font-bold' };\r\n    } else if (player1Score < player2Score) {\r\n      return { result: 'خسارة', color: 'text-red-600 font-bold' };\r\n    } else if (player1Score === player2Score && player1Score !== 0) {\r\n      return { result: 'تعادل', color: 'text-yellow-400 font-bold' };\r\n    }\r\n    return { result: '-', color: 'text-gray-500' };\r\n  }\r\n\r\n  highlightColumn(playerId: number) {\r\n    this.highlightedColumn =\r\n      this.highlightedColumn === playerId ? null : playerId;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.currentLeague?.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague?.typeOfLeague) === 'Groups'\r\n    );\r\n  }\r\n  @HostListener('document:click', ['$event'])\r\n  onClickOutside(event: Event) {\r\n    const table = document.querySelector('table');\r\n    if (table && !table.contains(event.target as Node)) {\r\n      this.highlightedColumn = null;\r\n    }\r\n  }\r\n}\r\n","<div class=\"bracket-container\">\r\n  <!-- رسالة في حالة عدم وجود مباريات إقصائية -->\r\n  <div\r\n    *ngIf=\"!hasQuarterFinals() && !hasSemiFinals() && !hasFinal()\"\r\n    class=\"no-matches-message\"\r\n  >\r\n    <h3 class=\"text-center text-gray-400\">لا توجد مباريات إقصائية بعد</h3>\r\n    <p class=\"text-center text-gray-500\">\r\n      سيتم عرض المباريات الإقصائية هنا عندما تبدأ مرحلة الإقصاء\r\n    </p>\r\n  </div>\r\n\r\n  <div class=\"bracket-stage\">\r\n    <div class=\"stage-container\" *ngIf=\"hasQuarterFinals()\">\r\n      <h3>Quarter Finals</h3>\r\n      <div class=\"matches\">\r\n        <div *ngFor=\"let match of quarterFinals()\" class=\"match\">\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ match.player1Name || \"---\" }}\r\n              <span\r\n                *ngIf=\"match.isCompleted && match.score1 > match.score2\"\r\n                class=\"winner-check\"\r\n                >✓</span\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class=\"vs\">vs</div>\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ match.player2Name || \"---\" }}\r\n              <span\r\n                *ngIf=\"match.isCompleted && match.score2 > match.score1\"\r\n                class=\"winner-check\"\r\n                >✓</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"bracket-stage\">\r\n    <div class=\"stage-container\" *ngIf=\"hasSemiFinals()\">\r\n      <h3>Semi Finals</h3>\r\n      <div class=\"matches\">\r\n        <div *ngFor=\"let match of semiFinals()\" class=\"match\">\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ match.player1Name || \"---\" }}\r\n              <span\r\n                *ngIf=\"match.isCompleted && match.score1 > match.score2\"\r\n                class=\"winner-check\"\r\n                >✓</span\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class=\"vs\">vs</div>\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ match.player2Name || \"---\" }}\r\n              <span\r\n                *ngIf=\"match.isCompleted && match.score2 > match.score1\"\r\n                class=\"winner-check\"\r\n                >✓</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"bracket-stage\">\r\n    <div class=\"stage-container\" *ngIf=\"hasFinal()\">\r\n      <h3>Final</h3>\r\n      <div class=\"matches\">\r\n        <div class=\"match\">\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ final()?.player1Name ?? \"---\" }}\r\n              <span\r\n                *ngIf=\"\r\n                  final()!.isCompleted && final()!.score1 > final()!.score2\r\n                \"\r\n                class=\"champion-check\"\r\n                >👑</span\r\n              >\r\n            </div>\r\n          </div>\r\n          <div class=\"vs\">vs</div>\r\n          <div class=\"player-container\">\r\n            <div class=\"player\">\r\n              {{ final()?.player2Name ?? \"---\" }}\r\n              <span\r\n                *ngIf=\"\r\n                  final()!.isCompleted && final()!.score2 > final()!.score1\r\n                \"\r\n                class=\"champion-check\"\r\n                >👑</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ChangeDetectionStrategy,\r\n  signal,\r\n  Input,\r\n  OnChanges,\r\n  SimpleChanges,\r\n} from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Match } from 'src/app/models/interfaces';\r\nimport { LeagueService } from 'src/app/core/services/league.service';\r\n\r\n@Component({\r\n  selector: 'app-bracket-tree',\r\n  templateUrl: './bracket-tree.component.html',\r\n  styleUrls: ['./bracket-tree.component.css'],\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n})\r\nexport class BracketTreeComponent implements OnInit, OnChanges {\r\n  @Input() leagueId?: number;\r\n\r\n  quarterFinals = signal<Match[]>([]);\r\n  semiFinals = signal<Match[]>([]);\r\n  final = signal<Match | null>(null);\r\n\r\n  constructor(private leagueService: LeagueService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadKnockoutMatches();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['leagueId']) {\r\n      this.loadKnockoutMatches();\r\n    }\r\n  }\r\n\r\n  private loadKnockoutMatches(): void {\r\n    if (!this.leagueId) {\r\n      this.quarterFinals.set([]);\r\n      this.semiFinals.set([]);\r\n      this.final.set(null);\r\n      return;\r\n    }\r\n\r\n    this.leagueService.GetAllLeaguesRank().subscribe({\r\n      next: (leagues) => {\r\n        const league = leagues.find((l) => l.leagueId === this.leagueId);\r\n\r\n        // البحث عن knockout matches في matches العادية\r\n        let allMatches: Match[] = [];\r\n        if (league?.matches) {\r\n          allMatches.push(...league.matches);\r\n        }\r\n        if (league?.knockoutMatches) {\r\n          allMatches.push(...league.knockoutMatches);\r\n        }\r\n\r\n        // تصفية المباريات الإقصائية بناءً على stage مع إزالة التكرار\r\n        const knockoutMatches = allMatches.filter((match, index, self) => {\r\n          const stage = match.stage || match.tournamentStage;\r\n\r\n          // التحقق من أن المباراة إقصائية\r\n          const isKnockout =\r\n            stage === 'QuarterFinals' ||\r\n            stage === 'SemiFinals' ||\r\n            stage === 'Final' ||\r\n            (stage === 'GroupStage' && false); // GroupStage ليست إقصائية\r\n\r\n          // إزالة التكرار بناءً على matchId\r\n          const isDuplicate =\r\n            self.findIndex((m) => m.matchId === match.matchId) !== index;\r\n\r\n          return isKnockout && !isDuplicate;\r\n        });\r\n\r\n        if (knockoutMatches.length > 0) {\r\n          this.processKnockoutMatches(knockoutMatches);\r\n        } else {\r\n          this.quarterFinals.set([]);\r\n          this.semiFinals.set([]);\r\n          this.final.set(null);\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.quarterFinals.set([]);\r\n        this.semiFinals.set([]);\r\n        this.final.set(null);\r\n      },\r\n    });\r\n  }\r\n\r\n  private processKnockoutMatches(knockoutMatches: Match[]): void {\r\n    const quarterFinalsMatches = knockoutMatches.filter((m) => {\r\n      const stage = m.stage || m.tournamentStage;\r\n      const isQuarterFinal = stage === 'QuarterFinals';\r\n      return isQuarterFinal;\r\n    });\r\n\r\n    const semiFinalsMatches = knockoutMatches.filter((m) => {\r\n      const stage = m.stage || m.tournamentStage;\r\n      const isSemiFinal = stage === 'SemiFinals';\r\n      return isSemiFinal;\r\n    });\r\n\r\n    const finalMatch = knockoutMatches.find((m) => {\r\n      const stage = m.stage || m.tournamentStage;\r\n      const isFinal = stage === 'Final';\r\n      return isFinal;\r\n    });\r\n\r\n    this.quarterFinals.set(this.shuffleMatches(quarterFinalsMatches));\r\n    this.semiFinals.set(this.shuffleMatches(semiFinalsMatches));\r\n    this.final.set(finalMatch ?? null);\r\n  }\r\n\r\n  private shuffleMatches(matches: Match[]): Match[] {\r\n    return matches.map((match) => {\r\n      // 50% chance to swap player positions\r\n      if (Math.random() > 0.5) {\r\n        return {\r\n          ...match,\r\n          player1Name: match.player2Name,\r\n          player2Name: match.player1Name,\r\n          player1Id: match.player2Id,\r\n          player2Id: match.player1Id,\r\n          score1: match.score2,\r\n          score2: match.score1,\r\n        };\r\n      }\r\n      return match;\r\n    });\r\n  }\r\n\r\n  hasQuarterFinals(): boolean {\r\n    return this.quarterFinals().length > 0;\r\n  }\r\n\r\n  hasSemiFinals(): boolean {\r\n    return this.semiFinals().length > 0;\r\n  }\r\n\r\n  hasFinal(): boolean {\r\n    return this.final() !== null;\r\n  }\r\n\r\n \r\n}\r\n","<div class=\"sm:container mx-auto p-4\">\r\n  <!-- Tournament Info Component -->\r\n  <app-tournament-info></app-tournament-info>\r\n\r\n  <!-- عرض جداول المجموعات -->\r\n  <div\r\n    *ngIf=\"currentLeague && isGroupsTournament() && hasGroupedPlayers() && !started\"\r\n    class=\"space-y-8\"\r\n  >\r\n    <!-- عرض المجموعات في شبكة -->\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n      <div\r\n        *ngFor=\"let groupNumber of getGroupNumbers()\"\r\n        class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700\"\r\n      >\r\n        <div\r\n          class=\"bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-t-lg\"\r\n        >\r\n          <h3 class=\"text-xl font-bold text-white text-center\">\r\n            Group {{ groupNumber }}\r\n          </h3>\r\n        </div>\r\n\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"w-full text-sm text-left rtl:text-right text-gray-100\">\r\n            <thead\r\n              class=\"text-xs font-bold text-gray-100 uppercase bg-gray-800\"\r\n            >\r\n              <tr class=\"text-center\">\r\n                <th scope=\"col\" class=\"px-3 py-3\">Rank</th>\r\n                <th scope=\"col\" class=\"px-3 py-3\">Name</th>\r\n                <th scope=\"col\" class=\"px-3 py-3\">Points</th>\r\n                <th scope=\"col\" class=\"px-3 py-3 hidden sm:table-cell\">Win</th>\r\n                <th scope=\"col\" class=\"px-3 py-3 hidden sm:table-cell\">Draw</th>\r\n                <th scope=\"col\" class=\"px-3 py-3 hidden sm:table-cell\">Loss</th>\r\n                <th scope=\"col\" class=\"px-3 py-3\">Games</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                *ngFor=\"\r\n                  let player of getGroupedPlayers()[groupNumber];\r\n                  let i = index\r\n                \"\r\n                class=\"border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px] transition-colors\"\r\n                [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n              >\r\n                <th\r\n                  scope=\"row\"\r\n                  class=\"px-3 py-4 font-medium text-white whitespace-nowrap relative\"\r\n                >\r\n                  {{ player.rank }}\r\n                </th>\r\n                <td class=\"px-3 py-4\">\r\n                  {{ player.fullName }}\r\n                </td>\r\n                <td class=\"px-3 py-4 text-center font-bold\">\r\n                  {{ player.points }}\r\n                </td>\r\n                <td\r\n                  class=\"px-3 py-4 text-center text-green-500 hidden sm:table-cell\"\r\n                >\r\n                  {{ player.wins }}\r\n                </td>\r\n                <td\r\n                  class=\"px-3 py-4 text-center text-yellow-400 hidden sm:table-cell\"\r\n                >\r\n                  {{ player.draws }}\r\n                </td>\r\n                <td\r\n                  class=\"px-3 py-4 text-center text-red-600 hidden sm:table-cell\"\r\n                >\r\n                  {{ player.losses }}\r\n                </td>\r\n                <td class=\"px-3 py-4 text-center\">\r\n                  {{ player.matchesPlayed }}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"started\" class=\"flex justify-center text-white\">\r\n    <div class=\"w-1/2 text-center mt-10\">\r\n      <h1\r\n        class=\"mb-4 text-4xl font-extrabold leading-none tracking-tight md:text-5xl lg:text-6xl text-white\"\r\n      >\r\n        The League Will Start Soon !\r\n      </h1>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PlayerService } from '../../core/services/player.service';\r\nimport { LeagueService } from '../../core/services/league.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Player, League, LeagueType } from '../../models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-groups-table',\r\n  templateUrl: './groups-table.component.html',\r\n  styleUrls: ['./groups-table.component.css'],\r\n})\r\nexport class GroupsTableComponent implements OnInit {\r\n  players: Player[] = [];\r\n  currentLeague: League | null = null;\r\n  LeagueType = LeagueType;\r\n  started: boolean = true;\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private leagueService: LeagueService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadCurrentLeague();\r\n    this.loadPlayers();\r\n  }\r\n\r\n  private loadCurrentLeague(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (response: any) => {\r\n        this.currentLeague = response.league;\r\n      },\r\n      error: (err: any) => {\r\n        console.error('Groups Table - خطأ في جلب الدوري:', err);\r\n        this.currentLeague = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadPlayers(): void {\r\n    this.playerService.getrank().subscribe({\r\n      next: (response) => {\r\n        this.players = response;\r\n        this.started = this.players.every(\r\n          (player) => player.matchesPlayed === 0\r\n        );\r\n      },\r\n      error: (err) => {\r\n        console.error('Groups Table - خطأ في جلب اللاعبين:', err);\r\n        this.toastr.error('حدث خطأ أثناء جلب اللاعبين');\r\n      },\r\n    });\r\n  }\r\n\r\n  // تجميع اللاعبين حسب المجموعات\r\n  getGroupedPlayers(): { [groupNumber: number]: Player[] } {\r\n    const groupedPlayers: { [groupNumber: number]: Player[] } = {};\r\n\r\n    // تجميع اللاعبين حسب groupNumber من الخادم فقط\r\n    this.players.forEach((player) => {\r\n      if (player.groupNumber && player.groupNumber > 0) {\r\n        if (!groupedPlayers[player.groupNumber]) {\r\n          groupedPlayers[player.groupNumber] = [];\r\n        }\r\n        groupedPlayers[player.groupNumber].push(player);\r\n      }\r\n    });\r\n\r\n    // ترتيب اللاعبين في كل مجموعة حسب النقاط\r\n    Object.keys(groupedPlayers).forEach((groupKey) => {\r\n      const groupNumber = parseInt(groupKey);\r\n      groupedPlayers[groupNumber].sort((a, b) => b.points - a.points);\r\n    });\r\n\r\n    return groupedPlayers;\r\n  }\r\n\r\n  // الحصول على أرقام المجموعات مرتبة\r\n  getGroupNumbers(): number[] {\r\n    const groupedPlayers = this.getGroupedPlayers();\r\n    return Object.keys(groupedPlayers)\r\n      .map((key) => parseInt(key))\r\n      .sort((a, b) => a - b);\r\n  }\r\n\r\n  // التحقق من وجود لاعبين في المجموعات\r\n  hasGroupedPlayers(): boolean {\r\n    const groupedPlayers = this.getGroupedPlayers();\r\n    return Object.keys(groupedPlayers).length > 0;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.currentLeague?.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague?.typeOfLeague) === 'Groups'\r\n    );\r\n  }\r\n}\r\n","<div class=\"draw-animation-container\">\r\n  <!-- عنوان الأنيميشن -->\r\n  <div class=\"text-center mb-8\">\r\n    <h1 class=\"text-4xl md:text-6xl font-bold text-white mb-4 animate-pulse\">\r\n       Tournament Draw\r\n    </h1>\r\n    <p class=\"text-xl text-gray-300\">\r\n      Revealing Groups...\r\n    </p>\r\n  </div>\r\n\r\n  <!-- منطقة الكرات والأنيميشن -->\r\n  <div class=\"animation-area\" *ngIf=\"showBalls\">\r\n    <!-- كرات المجموعات -->\r\n    <div class=\"balls-container\">\r\n      <div\r\n        *ngFor=\"let group of animationGroups; let i = index\"\r\n        class=\"ball-wrapper\"\r\n        [class.current-group]=\"i === currentGroupIndex\"\r\n        [class.completed-group]=\"isGroupCompleted(group.groupNumber)\">\r\n\r\n        <!-- الكرة -->\r\n        <div class=\"ball\"\r\n             [class.opening]=\"isGroupAnimating(group.groupNumber)\"\r\n             [class.opened]=\"isGroupCompleted(group.groupNumber)\">\r\n          <div class=\"ball-shine\"></div>\r\n          <div class=\"group-number\">{{ group.groupNumber }}</div>\r\n        </div>\r\n\r\n        <!-- عنوان المجموعة -->\r\n        <div class=\"group-title\">\r\n          Group {{ group.groupNumber }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- منطقة عرض الأسماء -->\r\n    <div class=\"names-reveal-area\" *ngIf=\"getCurrentGroup()\">\r\n      <div class=\"current-group-header\">\r\n        <h2 class=\"text-3xl font-bold text-center mb-6\">\r\n          🏆 Group {{ getCurrentGroup()?.groupNumber }} Players 🏆\r\n        </h2>\r\n      </div>\r\n\r\n      <!-- أسماء اللاعبين -->\r\n      <div class=\"players-list\">\r\n        <div\r\n          *ngFor=\"let player of getCurrentGroup()?.players; let i = index\"\r\n          class=\"player-card\"\r\n          [class.revealed]=\"i <= currentRevealedPlayer\"\r\n          [style.animation-delay.ms]=\"i * 200\">\r\n\r\n          <div class=\"player-rank\">{{ i + 1 }}</div>\r\n          <div class=\"player-name\">{{ player.fullName }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- خلفية الجزيئات -->\r\n  <div class=\"particles-bg\">\r\n    <div class=\"particle\" *ngFor=\"let p of [1,2,3,4,5,6,7,8,9,10]\"></div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Player } from 'src/app/models/interfaces';\r\n\r\ninterface AnimationGroup {\r\n  groupNumber: number;\r\n  players: Player[];\r\n  animationState: 'pending' | 'animating' | 'completed';\r\n}\r\n\r\n@Component({\r\n  selector: 'app-group-draw-animation',\r\n  templateUrl: './group-draw-animation.component.html',\r\n  styleUrls: ['./group-draw-animation.component.css'],\r\n})\r\nexport class GroupDrawAnimationComponent implements OnInit {\r\n  @Input() players: Player[] = [];\r\n  @Output() animationComplete = new EventEmitter<void>();\r\n\r\n  animationGroups: AnimationGroup[] = [];\r\n  currentGroupIndex = 0;\r\n  showBalls = false;\r\n  currentRevealedPlayer = -1; // نبدأ بـ -1 عشان مفيش أسماء تظهر في البداية\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {\r\n    this.setupAnimation();\r\n    this.startAnimation();\r\n  }\r\n\r\n  private setupAnimation(): void {\r\n    // تجميع اللاعبين حسب المجموعات\r\n    const groupedPlayers = this.getGroupedPlayers();\r\n\r\n    // إنشاء مصفوفة الأنيميشن\r\n    Object.keys(groupedPlayers).forEach((groupKey) => {\r\n      const groupNumber = parseInt(groupKey);\r\n      this.animationGroups.push({\r\n        groupNumber,\r\n        players: groupedPlayers[groupNumber],\r\n        animationState: 'pending',\r\n      });\r\n    });\r\n\r\n    // ترتيب المجموعات حسب الرقم\r\n    this.animationGroups.sort((a, b) => a.groupNumber - b.groupNumber);\r\n  }\r\n\r\n  private getGroupedPlayers(): { [groupNumber: number]: Player[] } {\r\n    const groupedPlayers: { [groupNumber: number]: Player[] } = {};\r\n\r\n    this.players.forEach((player) => {\r\n      if (player.groupNumber) {\r\n        if (!groupedPlayers[player.groupNumber]) {\r\n          groupedPlayers[player.groupNumber] = [];\r\n        }\r\n        groupedPlayers[player.groupNumber].push(player);\r\n      }\r\n    });\r\n\r\n    // إذا لم يكن هناك groupNumber، استخدم التقسيم المحلي\r\n    if (Object.keys(groupedPlayers).length === 0) {\r\n      const sortedPlayers = [...this.players].sort(\r\n        (a, b) => b.points - a.points\r\n      );\r\n      sortedPlayers.forEach((player, index) => {\r\n        const groupNumber = (index % 4) + 1;\r\n        if (!groupedPlayers[groupNumber]) {\r\n          groupedPlayers[groupNumber] = [];\r\n        }\r\n        groupedPlayers[groupNumber].push(player);\r\n      });\r\n    }\r\n\r\n    // ترتيب اللاعبين في كل مجموعة حسب النقاط\r\n    Object.keys(groupedPlayers).forEach((groupKey) => {\r\n      const groupNumber = parseInt(groupKey);\r\n      groupedPlayers[groupNumber].sort((a, b) => b.points - a.points);\r\n    });\r\n\r\n    return groupedPlayers;\r\n  }\r\n\r\n  private async startAnimation(): Promise<void> {\r\n    // انتظار قبل بدء الأنيميشن\r\n    await this.delay(800);\r\n\r\n    // عرض الكرات\r\n    this.showBalls = true;\r\n    await this.delay(1500);\r\n\r\n    // بدء أنيميشن المجموعات\r\n    for (let i = 0; i < this.animationGroups.length; i++) {\r\n      this.currentGroupIndex = i;\r\n      this.currentRevealedPlayer = -1; // reset قبل بدء كل مجموعة\r\n      await this.animateGroup(this.animationGroups[i]);\r\n      \r\n      // إذا لم تكن المجموعة الأخيرة، اختفي الأسماء قبل الانتقال\r\n      if (i < this.animationGroups.length - 1) {\r\n        await this.delay(2500); // انتظار مع الأسماء ظاهرة\r\n        this.currentRevealedPlayer = -1; // إخفاء الأسماء\r\n        await this.delay(500); // نص ثانية قبل المجموعة الجديدة\r\n      } else {\r\n        // المجموعة الأخيرة - انتظار إضافي\r\n        await this.delay(3000);\r\n      }\r\n    }\r\n\r\n    // انتظار قبل إنهاء الأنيميشن\r\n    await this.delay(2500);\r\n    this.animationComplete.emit();\r\n  }\r\n\r\n    private async animateGroup(group: AnimationGroup): Promise<void> {\r\n    group.animationState = 'animating';\r\n    \r\n    // أنيميشن فتح الكرة (مع صوت تأثير)\r\n    await this.delay(1200);\r\n    \r\n    // كشف الأسماء واحد تلو الآخر (أبطأ)\r\n    for (let i = 0; i < group.players.length; i++) {\r\n      this.currentRevealedPlayer = i;\r\n      await this.delay(800); // وقت أكتر بين كل اسم\r\n    }\r\n    \r\n    group.animationState = 'completed';\r\n    // لا نخفي الأسماء هنا - سيتم التحكم فيها من startAnimation\r\n  }\r\n\r\n  private delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  getCurrentGroup(): AnimationGroup | null {\r\n    return this.animationGroups[this.currentGroupIndex] || null;\r\n  }\r\n\r\n  isGroupAnimating(groupNumber: number): boolean {\r\n    const group = this.animationGroups.find(\r\n      (g) => g.groupNumber === groupNumber\r\n    );\r\n    return group?.animationState === 'animating';\r\n  }\r\n\r\n  isGroupCompleted(groupNumber: number): boolean {\r\n    const group = this.animationGroups.find(\r\n      (g) => g.groupNumber === groupNumber\r\n    );\r\n    return group?.animationState === 'completed';\r\n  }\r\n}\r\n","<div class=\"md:container mx-auto p-4\">\r\n  <h2 class=\"text-3xl text-white text-center mb-6 font-bold\">Rank Table</h2>\r\n\r\n  <div *ngIf=\"!currentLeague\" class=\"flex justify-center text-white\">\r\n    <div class=\"w-1/2 text-center mt-10\">\r\n      <h1\r\n        class=\"mb-4 text-4xl font-extrabold leading-none tracking-tight md:text-5xl lg:text-6xl text-white\"\r\n      >\r\n        The League Will Start Soon !\r\n      </h1>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- عرض أنيميشن القرعة للبطولات من نوع Groups قبل بدء المباريات -->\r\n  <app-group-draw-animation\r\n    *ngIf=\"showDrawAnimation\"\r\n    [players]=\"players\"\r\n    (animationComplete)=\"onDrawAnimationComplete()\"\r\n  >\r\n  </app-group-draw-animation>\r\n\r\n  <!-- عرض الجداول حسب نوع البطولة -->\r\n  <div *ngIf=\"currentLeague && !showDrawAnimation\">\r\n    <!-- عرض مكون جداول المجموعات للبطولات من نوع Groups -->\r\n    <app-groups-table *ngIf=\"isGroupsTournament()\"></app-groups-table>\r\n\r\n    <!-- عرض الجدول العادي للبطولات الأخرى -->\r\n    <div *ngIf=\"!isGroupsTournament()\" class=\"overflow-x-auto\">\r\n      <div class=\"relative overflow-x-auto shadow-md sm:rounded-lg\">\r\n        <table class=\"w-full text-sm text-left rtl:text-right text-gray-100\">\r\n          <thead class=\"text-xs font-bold text-gray-100 uppercase bg-black\">\r\n            <tr class=\"text-center\">\r\n              <th scope=\"col\" class=\"px-2 py-3\">Rank</th>\r\n              <th scope=\"col\" class=\"px-2 py-3\">Name</th>\r\n              <th scope=\"col\" class=\"px-2 py-3\">points</th>\r\n              <th scope=\"col\" class=\"px-2 py-3 hidden sm:table-cell\">Win</th>\r\n              <th scope=\"col\" class=\"px-2 py-3 hidden sm:table-cell\">Draw</th>\r\n              <th scope=\"col\" class=\"px-2 py-3 hidden sm:table-cell\">Loss</th>\r\n              <th scope=\"col\" class=\"px-2 py-3\">Games</th>\r\n              <th scope=\"col\" class=\"px-2 py-3\">win Rate</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"let player of players; let i = index\"\r\n              class=\"border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px]\"\r\n              [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n            >\r\n              <th\r\n                scope=\"row\"\r\n                class=\"px-2 py-4 font-medium text-white whitespace-nowrap relative\"\r\n              >\r\n                <i\r\n                  class=\"fa-solid fa-crown absolute top-[50%] left-[10px] md:left-10 translate-y-[-50%]\"\r\n                  style=\"color: #ffd43b\"\r\n                  *ngIf=\"player.rank == 1\"\r\n                ></i>\r\n                {{ player.rank }}\r\n              </th>\r\n              <td class=\"px-2 py-4\">\r\n                {{ player.fullName }}\r\n              </td>\r\n              <td class=\"px-2 py-4 text-center\">\r\n                {{ player.points }}\r\n              </td>\r\n              <td\r\n                class=\"px-2 py-4 text-center text-green-500 hidden sm:table-cell\"\r\n              >\r\n                {{ player.wins }}\r\n              </td>\r\n              <td\r\n                class=\"px-2 py-4 text-center text-yellow-400 hidden sm:table-cell\"\r\n              >\r\n                {{ player.draws }}\r\n              </td>\r\n              <td\r\n                class=\"px-2 py-4 text-center text-red-600 hidden sm:table-cell\"\r\n              >\r\n                {{ player.losses }}\r\n              </td>\r\n              <td class=\"px-2 py-4 text-center\">\r\n                {{ player.matchesPlayed }}\r\n              </td>\r\n              <td\r\n                class=\"px-2 py-4 text-center\"\r\n                [ngClass]=\"\r\n                  player.winRate < 35\r\n                    ? 'text-red-500'\r\n                    : player.winRate >= 30 && player.winRate <= 59\r\n                    ? 'text-yellow-400'\r\n                    : 'text-green-500'\r\n                \"\r\n              >\r\n                {{ player.winRate | number : \"1.2-2\" }} %\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"w-full\" *ngIf=\"isGroupsTournament()\">\r\n    <app-bracket-tree [leagueId]=\"currentLeague?.id\"></app-bracket-tree>\r\n  </div>\r\n</div>\r\n","import { PlayerService } from './../../core/services/player.service';\r\nimport { LeagueService } from './../../core/services/league.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Player, League, LeagueType } from 'src/app/models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-ranking',\r\n  templateUrl: './ranking.component.html',\r\n  styleUrls: ['./ranking.component.css'],\r\n})\r\nexport class RankingComponent implements OnInit {\r\n  players: Player[] = [];\r\n  started: boolean = true;\r\n  last: number = 0;\r\n  currentLeague: League | null = null;\r\n  LeagueType = LeagueType; // لسهولة الاستخدام في الـ template\r\n  showDrawAnimation: boolean = false;\r\n\r\n  constructor(\r\n    private playerService: PlayerService,\r\n    private leagueService: LeagueService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadCurrentLeague();\r\n    this.loadPlayers();\r\n  }\r\n\r\n  private loadCurrentLeague(): void {\r\n    this.leagueService.GetCurrentLeague().subscribe({\r\n      next: (response: any) => {\r\n        this.currentLeague = response.league;\r\n        // تحديث حالة الأنيميشن عند تحميل البطولة\r\n        this.updateDrawAnimationState();\r\n      },\r\n      error: (err: any) => {\r\n        console.error('خطأ في جلب الدوري:', err);\r\n        this.currentLeague = null;\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadPlayers(): void {\r\n    this.playerService.getrank().subscribe({\r\n      next: (response) => {\r\n        this.players = response;\r\n        this.last = response.length - 1;\r\n        this.started = this.players.every((match) => match.matchesPlayed === 0);\r\n\r\n        // تحديد ما إذا كان يجب عرض أنيميشن القرعة\r\n        this.updateDrawAnimationState();\r\n      },\r\n      error: (err) => {\r\n        console.error('خطأ في جلب اللاعبين:', err);\r\n        this.toastr.error('حدث خطا اثناء جلب اللاعبين');\r\n      },\r\n    });\r\n  }\r\n\r\n  private updateDrawAnimationState(): void {\r\n    // التأكد من وجود البيانات المطلوبة\r\n    if (!this.currentLeague || !this.players || this.players.length === 0) {\r\n      this.showDrawAnimation = false;\r\n      return;\r\n    }\r\n\r\n    // شروط عرض أنيميشن القرعة:\r\n    // 1. البطولة من نوع Groups\r\n    // 2. توجد مجموعات (تم تنفيذ Start Group Stage)\r\n    // 3. كل اللاعبين لم يلعبوا أي مباريات\r\n    const isGroupsTournament =\r\n      this.currentLeague.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague.typeOfLeague) === 'Groups';\r\n    const hasGroups = this.players.some((player) => player.groupNumber);\r\n    const noMatchesPlayed = this.players.every(\r\n      (player) => player.matchesPlayed === 0\r\n    );\r\n\r\n    this.showDrawAnimation = isGroupsTournament && hasGroups && noMatchesPlayed;\r\n  }\r\n\r\n  onDrawAnimationComplete(): void {\r\n    this.showDrawAnimation = false;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.currentLeague?.typeOfLeague === LeagueType.Groups ||\r\n      String(this.currentLeague?.typeOfLeague) === 'Groups'\r\n    );\r\n  }\r\n}\r\n","import { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nconst nodeEventEmitterMethods = ['addListener', 'removeListener'];\nconst eventTargetMethods = ['addEventListener', 'removeEventListener'];\nconst jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n    }\n    const [add, remove] = isEventTarget(target)\n        ? eventTargetMethods.map((methodName) => (handler) => target[methodName](eventName, handler, options))\n        :\n            isNodeStyleEventEmitter(target)\n                ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName))\n                : isJQueryStyleEventEmitter(target)\n                    ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName))\n                    : [];\n    if (!add) {\n        if (isArrayLike(target)) {\n            return mergeMap((subTarget) => fromEvent(subTarget, eventName, options))(innerFrom(target));\n        }\n    }\n    if (!add) {\n        throw new TypeError('Invalid event target');\n    }\n    return new Observable((subscriber) => {\n        const handler = (...args) => subscriber.next(1 < args.length ? args : args[0]);\n        add(handler);\n        return () => remove(handler);\n    });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n    return (methodName) => (handler) => target[methodName](eventName, handler);\n}\nfunction isNodeStyleEventEmitter(target) {\n    return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n    return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n    return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n","import { filter } from './filter';\nexport function skip(count) {\n    return filter((_, index) => count <= index);\n}\n","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nconst arrReducer = (arr, value) => (arr.push(value), arr);\nexport function toArray() {\n    return operate((source, subscriber) => {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n","import { Subscription } from '../Subscription';\nexport class Action extends Subscription {\n    constructor(scheduler, work) {\n        super();\n    }\n    schedule(state, delay = 0) {\n        return this;\n    }\n}\n","export const intervalProvider = {\n    setInterval(handler, timeout, ...args) {\n        const { delegate } = intervalProvider;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n            return delegate.setInterval(handler, timeout, ...args);\n        }\n        return setInterval(handler, timeout, ...args);\n    },\n    clearInterval(handle) {\n        const { delegate } = intervalProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n    },\n    delegate: undefined,\n};\n","import { dateTimestampProvider } from './scheduler/dateTimestampProvider';\nexport class Scheduler {\n    constructor(schedulerActionCtor, now = Scheduler.now) {\n        this.schedulerActionCtor = schedulerActionCtor;\n        this.now = now;\n    }\n    schedule(work, delay = 0, state) {\n        return new this.schedulerActionCtor(this, work).schedule(state, delay);\n    }\n}\nScheduler.now = dateTimestampProvider.now;\n","import { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport const asyncScheduler = new AsyncScheduler(AsyncAction);\nexport const async = asyncScheduler;\n","import { Scheduler } from '../Scheduler';\nexport class AsyncScheduler extends Scheduler {\n    constructor(SchedulerAction, now = Scheduler.now) {\n        super(SchedulerAction, now);\n        this.actions = [];\n        this._active = false;\n    }\n    flush(action) {\n        const { actions } = this;\n        if (this._active) {\n            actions.push(action);\n            return;\n        }\n        let error;\n        this._active = true;\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions.shift()));\n        this._active = false;\n        if (error) {\n            while ((action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n","import { Action } from './Action';\nimport { intervalProvider } from './intervalProvider';\nimport { arrRemove } from '../util/arrRemove';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        var _a;\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, _id, delay = 0) {\n        return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(_scheduler, id, delay = 0) {\n        if (delay != null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        if (id != null) {\n            intervalProvider.clearInterval(id);\n        }\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, _delay) {\n        let errored = false;\n        let errorValue;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = e ? e : new Error('Scheduled action threw falsy error');\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            const { id, scheduler } = this;\n            const { actions } = scheduler;\n            this.work = this.state = this.scheduler = null;\n            this.pending = false;\n            arrRemove(actions, this);\n            if (id != null) {\n                this.id = this.recycleAsyncId(scheduler, id, null);\n            }\n            this.delay = null;\n            super.unsubscribe();\n        }\n    }\n}\n","import { concat } from '../observable/concat';\nimport { take } from './take';\nimport { ignoreElements } from './ignoreElements';\nimport { mapTo } from './mapTo';\nimport { mergeMap } from './mergeMap';\nimport { innerFrom } from '../observable/innerFrom';\nexport function delayWhen(delayDurationSelector, subscriptionDelay) {\n    if (subscriptionDelay) {\n        return (source) => concat(subscriptionDelay.pipe(take(1), ignoreElements()), source.pipe(delayWhen(delayDurationSelector)));\n    }\n    return mergeMap((value, index) => innerFrom(delayDurationSelector(value, index)).pipe(take(1), mapTo(value)));\n}\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { noop } from '../util/noop';\nexport function ignoreElements() {\n    return operate((source, subscriber) => {\n        source.subscribe(createOperatorSubscriber(subscriber, noop));\n    });\n}\n","import * as i0 from '@angular/core';\nimport { isDevMode, Injectable, InjectionToken, PLATFORM_ID, Inject, Optional, Directive, Input, Component, HostListener, EventEmitter, ChangeDetectionStrategy, ContentChildren, Output, Attribute, HostBinding, NgModule } from '@angular/core';\nimport * as i3 from '@angular/common';\nimport { isPlatformBrowser, CommonModule } from '@angular/common';\nimport { Subject, merge, of, fromEvent, from } from 'rxjs';\nimport { tap, filter, switchMap, first, take, skip, map, toArray, delay } from 'rxjs/operators';\nimport * as i1 from '@angular/router';\nimport { NavigationEnd } from '@angular/router';\nimport { style, state, animate, transition, trigger } from '@angular/animations';\n\n/**\n * Defaults value of options\n */\nclass OwlCarouselOConfig {\n    items = 3;\n    skip_validateItems = false;\n    loop = false;\n    center = false;\n    rewind = false;\n    mouseDrag = true;\n    touchDrag = true;\n    pullDrag = true;\n    freeDrag = false;\n    margin = 0;\n    stagePadding = 0;\n    merge = false;\n    mergeFit = true;\n    autoWidth = false;\n    startPosition = 0;\n    rtl = false;\n    smartSpeed = 250;\n    fluidSpeed = false;\n    dragEndSpeed = false;\n    responsive = {};\n    responsiveRefreshRate = 200;\n    // defaults to Navigation\n    nav = false;\n    navText = ['prev', 'next'];\n    navSpeed = false;\n    slideBy = 1; // stage moves on 1 width of slide; if slideBy = 2, stage moves on 2 widths of slide\n    dots = true;\n    dotsEach = false;\n    dotsData = false;\n    dotsSpeed = false;\n    // defaults to Autoplay\n    autoplay = false;\n    autoplayTimeout = 5000;\n    autoplayHoverPause = false;\n    autoplaySpeed = false;\n    autoplayMouseleaveTimeout = 1;\n    // defaults to LazyLoading\n    lazyLoad = false;\n    lazyLoadEager = 0;\n    // defaults to Animate\n    slideTransition = '';\n    animateOut = false;\n    animateIn = false;\n    // defaults to AutoHeight\n    autoHeight = false;\n    // defaults to Hash\n    URLhashListener = false;\n    constructor() { }\n}\n/**\n * we can't read types from OwlOptions in javascript because of props have undefined value and types of those props are used for validating inputs\n * class below is copy of OwlOptions but its all props have string value showing certain type;\n * this is class is being used just in method _validateOptions() of CarouselService;\n */\nclass OwlOptionsMockedTypes {\n    items = 'number';\n    skip_validateItems = 'boolean';\n    loop = 'boolean';\n    center = 'boolean';\n    rewind = 'boolean';\n    mouseDrag = 'boolean';\n    touchDrag = 'boolean';\n    pullDrag = 'boolean';\n    freeDrag = 'boolean';\n    margin = 'number';\n    stagePadding = 'number';\n    merge = 'boolean';\n    mergeFit = 'boolean';\n    autoWidth = 'boolean';\n    startPosition = 'number|string';\n    rtl = 'boolean';\n    smartSpeed = 'number';\n    fluidSpeed = 'boolean';\n    dragEndSpeed = 'number|boolean';\n    responsive = {};\n    responsiveRefreshRate = 'number';\n    // defaults to Navigation\n    nav = 'boolean';\n    navText = 'string[]';\n    navSpeed = 'number|boolean';\n    slideBy = 'number|string'; // stage moves on 1 width of slide; if slideBy = 2, stage moves on 2 widths of slide\n    dots = 'boolean';\n    dotsEach = 'number|boolean';\n    dotsData = 'boolean';\n    dotsSpeed = 'number|boolean';\n    // defaults to Autoplay\n    autoplay = 'boolean';\n    autoplayTimeout = 'number';\n    autoplayHoverPause = 'boolean';\n    autoplaySpeed = 'number|boolean';\n    autoplayMouseleaveTimeout = 'number';\n    // defaults to LazyLoading\n    lazyLoad = 'boolean';\n    lazyLoadEager = 'number';\n    // defaults to Animate\n    slideTransition = 'string';\n    animateOut = 'string|boolean';\n    animateIn = 'string|boolean';\n    // defaults to AutoHeight\n    autoHeight = 'boolean';\n    // defaults to Hash\n    URLhashListener = \"boolean\";\n    constructor() { }\n}\n\nclass OwlLogger {\n    errorHandler;\n    constructor(errorHandler) {\n        this.errorHandler = errorHandler;\n    }\n    log(value, ...rest) {\n        if (isDevMode()) {\n            console.log(value, ...rest);\n        }\n    }\n    error(error) {\n        this.errorHandler.handleError(error);\n    }\n    warn(value, ...rest) {\n        console.warn(value, ...rest);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlLogger, deps: [{ token: i0.ErrorHandler }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlLogger });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlLogger, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: i0.ErrorHandler }] });\n\n/**\n * Current state information and their tags.\n */\nclass States {\n    current;\n    tags;\n}\n/**\n * Enumeration for types.\n * @enum {String}\n */\nvar Type;\n(function (Type) {\n    Type[\"Event\"] = \"event\";\n    Type[\"State\"] = \"state\";\n})(Type || (Type = {}));\n;\n/**\n * Enumeration for width.\n * @enum {String}\n */\nvar Width;\n(function (Width) {\n    Width[\"Default\"] = \"default\";\n    Width[\"Inner\"] = \"inner\";\n    Width[\"Outer\"] = \"outer\";\n})(Width || (Width = {}));\n;\n/**\n * Model for coords of .owl-stage\n */\nclass Coords {\n    x;\n    y;\n}\n/**\n * Model for all current data of carousel\n */\nclass CarouselCurrentData {\n    owlDOMData;\n    stageData;\n    slidesData;\n    navData;\n    dotsData;\n}\nclass CarouselService {\n    logger;\n    /**\n     * Subject for passing data needed for managing View\n     */\n    _viewSettingsShipper$ = new Subject();\n    /**\n     * Subject for notification when the carousel got initializes\n     */\n    _initializedCarousel$ = new Subject();\n    /**\n     * Subject for notification when the carousel's settings start changinf\n     */\n    _changeSettingsCarousel$ = new Subject();\n    /**\n     * Subject for notification when the carousel's settings have changed\n     */\n    _changedSettingsCarousel$ = new Subject();\n    /**\n     * Subject for notification when the carousel starts translating or moving\n     */\n    _translateCarousel$ = new Subject();\n    /**\n     * Subject for notification when the carousel stopped translating or moving\n     */\n    _translatedCarousel$ = new Subject();\n    /**\n     * Subject for notification when the carousel's rebuilding caused by 'resize' event starts\n     */\n    _resizeCarousel$ = new Subject();\n    /**\n     * Subject for notification  when the carousel's rebuilding caused by 'resize' event is ended\n     */\n    _resizedCarousel$ = new Subject();\n    /**\n     * Subject for notification when the refresh of carousel starts\n     */\n    _refreshCarousel$ = new Subject();\n    /**\n     * Subject for notification when the refresh of carousel is ended\n     */\n    _refreshedCarousel$ = new Subject();\n    /**\n     * Subject for notification when the dragging of carousel starts\n     */\n    _dragCarousel$ = new Subject();\n    /**\n     * Subject for notification when the dragging of carousel is ended\n     */\n    _draggedCarousel$ = new Subject();\n    /**\n     * Current settings for the carousel.\n     */\n    settings = {\n        items: 0\n    };\n    /**\n     * Initial data for setting classes to element .owl-carousel\n     */\n    owlDOMData = {\n        rtl: false,\n        isResponsive: false,\n        isRefreshed: false,\n        isLoaded: false,\n        isLoading: false,\n        isMouseDragable: false,\n        isGrab: false,\n        isTouchDragable: false\n    };\n    /**\n     * Initial data of .owl-stage\n     */\n    stageData = {\n        transform: 'translate3d(0px,0px,0px)',\n        transition: '0s',\n        width: 0,\n        paddingL: 0,\n        paddingR: 0\n    };\n    /**\n     *  Data of every slide\n     */\n    slidesData;\n    /**\n     * Data of navigation block\n     */\n    navData;\n    /**\n     * Data of dots block\n     */\n    dotsData;\n    /**\n     * Carousel width\n     */\n    _width;\n    /**\n     * All real items.\n     */\n    _items = []; // is equal to this.slides\n    /**\n     * Array with width of every slide.\n     */\n    _widths = [];\n    /**\n     * Currently suppressed events to prevent them from beeing retriggered.\n     */\n    _supress = {};\n    /**\n     * References to the running plugins of this carousel.\n     */\n    _plugins = {};\n    /**\n     * Absolute current position.\n     */\n    _current = null;\n    /**\n     * All cloned items.\n     */\n    _clones = [];\n    /**\n     * Merge values of all items.\n     * @todo Maybe this could be part of a plugin.\n     */\n    _mergers = [];\n    /**\n     * Animation speed in milliseconds.\n     */\n    _speed = null;\n    /**\n     * Coordinates of all items in pixel.\n     * @todo The name of this member is missleading.\n     */\n    _coordinates = [];\n    /**\n     * Current breakpoint.\n     * @todo Real media queries would be nice.\n     */\n    _breakpoint = null;\n    /**\n     * Prefix for id of cloned slides\n     */\n    clonedIdPrefix = 'cloned-';\n    /**\n     * Current options set by the caller including defaults.\n     */\n    _options = {};\n    /**\n     * Invalidated parts within the update process.\n     */\n    _invalidated = {};\n    // Is needed for tests\n    get invalidated() {\n        return this._invalidated;\n    }\n    /**\n     * Current state information and their tags.\n     */\n    _states = {\n        current: {},\n        tags: {\n            initializing: ['busy'],\n            animating: ['busy'],\n            dragging: ['interacting']\n        }\n    };\n    // is needed for tests\n    get states() {\n        return this._states;\n    }\n    /**\n         * Ordered list of workers for the update process.\n     */\n    _pipe = [\n        // {\n        //   filter: ['width', 'settings'],\n        //   run: () => {\n        //     this._width = this.carouselWindowWidth;\n        //   }\n        // },\n        {\n            filter: ['width', 'items', 'settings'],\n            run: cache => {\n                cache.current = this._items && this._items[this.relative(this._current)]?.id;\n            }\n        },\n        // {\n        //   filter: ['items', 'settings'],\n        //   run: function() {\n        //     // this.$stage.children('.cloned').remove();\n        //   }\n        // },\n        {\n            filter: ['width', 'items', 'settings'],\n            run: (cache) => {\n                const margin = this.settings.margin || '', grid = !this.settings.autoWidth, rtl = this.settings.rtl, css = {\n                    'margin-left': rtl ? margin : '',\n                    'margin-right': rtl ? '' : margin\n                };\n                if (!grid) {\n                    this.slidesData.forEach(slide => {\n                        slide.marginL = css['margin-left'];\n                        slide.marginR = css['margin-right'];\n                    });\n                }\n                cache.css = css;\n            }\n        }, {\n            filter: ['width', 'items', 'settings'],\n            run: (cache) => {\n                const width = +(this.width() / this.settings.items).toFixed(3) - this.settings.margin, grid = !this.settings.autoWidth, widths = [];\n                let merge = null, iterator = this._items.length;\n                cache.items = {\n                    merge: false,\n                    width: width\n                };\n                while (iterator-- > 0) {\n                    merge = this._mergers[iterator];\n                    merge = this.settings.mergeFit && Math.min(merge, this.settings.items) || merge;\n                    cache.items.merge = merge > 1 || cache.items.merge;\n                    widths[iterator] = !grid ? this._items[iterator].width ? this._items[iterator].width : width : width * merge;\n                }\n                this._widths = widths;\n                this.slidesData.forEach((slide, i) => {\n                    slide.width = this._widths[i];\n                    slide.marginR = cache.css['margin-right'];\n                    slide.marginL = cache.css['margin-left'];\n                });\n            }\n        }, {\n            filter: ['items', 'settings'],\n            run: () => {\n                const clones = [], items = this._items, settings = this.settings, \n                // TODO: Should be computed from number of min width items in stage\n                view = Math.max(settings.items * 2, 4), size = Math.ceil(items.length / 2) * 2;\n                let append = [], prepend = [], repeat = settings.loop && items.length ? settings.rewind ? view : Math.max(view, size) : 0;\n                repeat /= 2;\n                while (repeat-- > 0) {\n                    // Switch to only using appended clones\n                    clones.push(this.normalize(clones.length / 2, true));\n                    append.push({ ...this.slidesData[clones[clones.length - 1]] });\n                    clones.push(this.normalize(items.length - 1 - (clones.length - 1) / 2, true));\n                    prepend.unshift({ ...this.slidesData[clones[clones.length - 1]] });\n                }\n                this._clones = clones;\n                append = append.map(slide => {\n                    slide.id = `${this.clonedIdPrefix}${slide.id}`;\n                    slide.isActive = false;\n                    slide.isCloned = true;\n                    return slide;\n                });\n                prepend = prepend.map(slide => {\n                    slide.id = `${this.clonedIdPrefix}${slide.id}`;\n                    slide.isActive = false;\n                    slide.isCloned = true;\n                    return slide;\n                });\n                this.slidesData = prepend.concat(this.slidesData).concat(append);\n            }\n        }, {\n            filter: ['width', 'items', 'settings'],\n            run: () => {\n                const rtl = this.settings.rtl ? 1 : -1, size = this._clones.length + this._items.length, coordinates = [];\n                let iterator = -1, previous = 0, current = 0;\n                while (++iterator < size) {\n                    previous = coordinates[iterator - 1] || 0;\n                    current = this._widths[this.relative(iterator)] + this.settings.margin;\n                    coordinates.push(previous + current * rtl);\n                }\n                this._coordinates = coordinates;\n            }\n        }, {\n            filter: ['width', 'items', 'settings'],\n            run: () => {\n                const padding = this.settings.stagePadding, coordinates = this._coordinates, css = {\n                    'width': Math.ceil(Math.abs(coordinates[coordinates.length - 1])) + padding * 2,\n                    'padding-left': padding || '',\n                    'padding-right': padding || ''\n                };\n                this.stageData.width = css.width; // use this property in *ngIf directive for .owl-stage element\n                this.stageData.paddingL = css['padding-left'];\n                this.stageData.paddingR = css['padding-right'];\n            }\n        }, {\n            //   filter: [ 'width', 'items', 'settings' ],\n            //   run: cache => {\n            // \t\t// this method sets the width for every slide, but I set it in different way earlier\n            // \t\tconst grid = !this.settings.autoWidth,\n            // \t\titems = this.$stage.children(); // use this.slidesData\n            //     let iterator = this._coordinates.length;\n            //     if (grid && cache.items.merge) {\n            //       while (iterator--) {\n            //         cache.css.width = this._widths[this.relative(iterator)];\n            //         items.eq(iterator).css(cache.css);\n            //       }\n            //     } else if (grid) {\n            //       cache.css.width = cache.items.width;\n            //       items.css(cache.css);\n            //     }\n            //   }\n            // }, {\n            //   filter: [ 'items' ],\n            //   run: function() {\n            //     this._coordinates.length < 1 && this.$stage.removeAttr('style');\n            //   }\n            // }, {\n            filter: ['width', 'items', 'settings'],\n            run: cache => {\n                let current = cache.current ? this.slidesData.findIndex(slide => slide.id === cache.current) : 0;\n                current = Math.max(this.minimum(), Math.min(this.maximum(), current));\n                this.reset(current);\n            }\n        }, {\n            filter: ['position'],\n            run: () => {\n                this.animate(this.coordinates(this._current));\n            }\n        }, {\n            filter: ['width', 'position', 'items', 'settings'],\n            run: () => {\n                const rtl = this.settings.rtl ? 1 : -1, padding = this.settings.stagePadding * 2, matches = [];\n                let begin, end, inner, outer, i, n;\n                begin = this.coordinates(this.current());\n                if (typeof begin === 'number') {\n                    begin += padding;\n                }\n                else {\n                    begin = 0;\n                }\n                end = begin + this.width() * rtl;\n                if (rtl === -1 && this.settings.center) {\n                    const result = this._coordinates.filter(element => {\n                        return this.settings.items % 2 === 1 ? element >= begin : element > begin;\n                    });\n                    begin = result.length ? result[result.length - 1] : begin;\n                }\n                for (i = 0, n = this._coordinates.length; i < n; i++) {\n                    inner = Math.ceil(this._coordinates[i - 1] || 0);\n                    outer = Math.ceil(Math.abs(this._coordinates[i]) + padding * rtl);\n                    if ((this._op(inner, '<=', begin) && (this._op(inner, '>', end)))\n                        || (this._op(outer, '<', begin) && this._op(outer, '>', end))) {\n                        matches.push(i);\n                    }\n                }\n                this.slidesData.forEach(slide => {\n                    slide.isActive = false;\n                    return slide;\n                });\n                matches.forEach(item => {\n                    this.slidesData[item].isActive = true;\n                });\n                if (this.settings.center) {\n                    this.slidesData.forEach(slide => {\n                        slide.isCentered = false;\n                        return slide;\n                    });\n                    this.slidesData[this.current()].isCentered = true;\n                }\n            }\n        }\n    ];\n    constructor(logger) {\n        this.logger = logger;\n    }\n    /**\n     * Makes _viewSettingsShipper$ Subject become Observable\n     * @returns Observable of _viewSettingsShipper$ Subject\n     */\n    getViewCurSettings() {\n        return this._viewSettingsShipper$.asObservable();\n    }\n    /**\n     * Makes _initializedCarousel$ Subject become Observable\n     * @returns Observable of _initializedCarousel$ Subject\n     */\n    getInitializedState() {\n        return this._initializedCarousel$.asObservable();\n    }\n    /**\n     * Makes _changeSettingsCarousel$ Subject become Observable\n     * @returns Observable of _changeSettingsCarousel$ Subject\n     */\n    getChangeState() {\n        return this._changeSettingsCarousel$.asObservable();\n    }\n    /**\n     * Makes _changedSettingsCarousel$ Subject become Observable\n     * @returns Observable of _changedSettingsCarousel$ Subject\n     */\n    getChangedState() {\n        return this._changedSettingsCarousel$.asObservable();\n    }\n    /**\n     * Makes _translateCarousel$ Subject become Observable\n     * @returns Observable of _translateCarousel$ Subject\n     */\n    getTranslateState() {\n        return this._translateCarousel$.asObservable();\n    }\n    /**\n     * Makes _translatedCarousel$ Subject become Observable\n     * @returns Observable of _translatedCarousel$ Subject\n     */\n    getTranslatedState() {\n        return this._translatedCarousel$.asObservable();\n    }\n    /**\n     * Makes _resizeCarousel$ Subject become Observable\n     * @returns Observable of _resizeCarousel$ Subject\n     */\n    getResizeState() {\n        return this._resizeCarousel$.asObservable();\n    }\n    /**\n     * Makes _resizedCarousel$ Subject become Observable\n     * @returns Observable of _resizedCarousel$ Subject\n     */\n    getResizedState() {\n        return this._resizedCarousel$.asObservable();\n    }\n    /**\n     * Makes _refreshCarousel$ Subject become Observable\n     * @returns Observable of _refreshCarousel$ Subject\n     */\n    getRefreshState() {\n        return this._refreshCarousel$.asObservable();\n    }\n    /**\n     * Makes _refreshedCarousel$ Subject become Observable\n     * @returns Observable of _refreshedCarousel$ Subject\n     */\n    getRefreshedState() {\n        return this._refreshedCarousel$.asObservable();\n    }\n    /**\n     * Makes _dragCarousel$ Subject become Observable\n     * @returns Observable of _dragCarousel$ Subject\n     */\n    getDragState() {\n        return this._dragCarousel$.asObservable();\n    }\n    /**\n     * Makes _draggedCarousel$ Subject become Observable\n     * @returns Observable of _draggedCarousel$ Subject\n     */\n    getDraggedState() {\n        return this._draggedCarousel$.asObservable();\n    }\n    /**\n     * Setups custom options expanding default options\n     * @param options custom options\n     */\n    setOptions(options) {\n        const configOptions = new OwlCarouselOConfig();\n        const checkedOptions = this._validateOptions(options, configOptions);\n        this._options = { ...configOptions, ...checkedOptions };\n    }\n    /**\n     * Checks whether user's option are set properly. Cheking is based on typings;\n     * @param options options set by user\n     * @param configOptions default options\n     * @returns checked and modified (if it's needed) user's options\n     *\n     * Notes:\n     * \t- if user set option with wrong type, it'll be written in console\n     */\n    _validateOptions(options, configOptions) {\n        const checkedOptions = { ...options };\n        const mockedTypes = new OwlOptionsMockedTypes();\n        const setRightOption = (type, key) => {\n            this.logger.log(`options.${key} must be type of ${type}; ${key}=${options[key]} skipped to defaults: ${key}=${configOptions[key]}`);\n            return configOptions[key];\n        };\n        for (const key in checkedOptions) {\n            if (checkedOptions.hasOwnProperty(key)) {\n                // condition could be shortened but it gets harder for understanding\n                if (mockedTypes[key] === 'number') {\n                    if (this._isNumeric(checkedOptions[key])) {\n                        checkedOptions[key] = +checkedOptions[key];\n                        checkedOptions[key] = key === 'items' ? this._validateItems(checkedOptions[key], checkedOptions.skip_validateItems) : checkedOptions[key];\n                    }\n                    else {\n                        checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                    }\n                }\n                else if (mockedTypes[key] === 'boolean' && typeof checkedOptions[key] !== 'boolean') {\n                    checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                }\n                else if (mockedTypes[key] === 'number|boolean' && !this._isNumberOrBoolean(checkedOptions[key])) {\n                    checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                }\n                else if (mockedTypes[key] === 'number|string' && !this._isNumberOrString(checkedOptions[key])) {\n                    checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                }\n                else if (mockedTypes[key] === 'string|boolean' && !this._isStringOrBoolean(checkedOptions[key])) {\n                    checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                }\n                else if (mockedTypes[key] === 'string[]') {\n                    if (Array.isArray(checkedOptions[key])) {\n                        let isString = false;\n                        checkedOptions[key].forEach(element => {\n                            isString = typeof element === 'string' ? true : false;\n                        });\n                        if (!isString) {\n                            checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                        }\n                        ;\n                    }\n                    else {\n                        checkedOptions[key] = setRightOption(mockedTypes[key], key);\n                    }\n                }\n            }\n        }\n        return checkedOptions;\n    }\n    /**\n     * Checks the option `items` set by user and if it bigger than number of slides, the function returns number of slides\n     * @param items option items set by user\n     * @param skip_validateItems option `skip_validateItems` set by user\n     * @returns right number of items\n     */\n    _validateItems(items, skip_validateItems) {\n        let result = items;\n        if (items > this._items.length) {\n            if (skip_validateItems) {\n                this.logger.log('The option \\'items\\' in your options is bigger than the number of slides. The navigation got disabled');\n            }\n            else {\n                result = this._items.length;\n                this.logger.log('The option \\'items\\' in your options is bigger than the number of slides. This option is updated to the current number of slides and the navigation got disabled');\n            }\n        }\n        else {\n            if (items === this._items.length && (this.settings.dots || this.settings.nav)) {\n                this.logger.log('Option \\'items\\' in your options is equal to the number of slides. So the navigation got disabled');\n            }\n        }\n        return result;\n    }\n    /**\n     * Set current width of carousel\n     * @param width width of carousel Window\n     */\n    setCarouselWidth(width) {\n        this._width = width;\n    }\n    /**\n     * Setups the current settings.\n     * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?\n     * @todo Support for media queries by using `matchMedia` would be nice.\n     * @param carouselWidth width of carousel\n     * @param slides array of slides\n     * @param options options set by user\n     */\n    setup(carouselWidth, slides, options) {\n        this.setCarouselWidth(carouselWidth);\n        this.setItems(slides);\n        this._defineSlidesData();\n        this.setOptions(options);\n        this.settings = { ...this._options };\n        this.setOptionsForViewport();\n        this._trigger('change', { property: { name: 'settings', value: this.settings } });\n        this.invalidate('settings'); // must be call of this function;\n        this._trigger('changed', { property: { name: 'settings', value: this.settings } });\n    }\n    /**\n     * Set options for current viewport\n     */\n    setOptionsForViewport() {\n        const viewport = this._width, overwrites = this._options.responsive;\n        let match = -1;\n        if (!Object.keys(overwrites).length) {\n            return;\n        }\n        if (!viewport) {\n            this.settings.items = 1;\n            return;\n        }\n        for (const key in overwrites) {\n            if (overwrites.hasOwnProperty(key)) {\n                if (+key <= viewport && +key > match) {\n                    match = Number(key);\n                }\n            }\n        }\n        this.settings = { ...this._options, ...overwrites[match], items: (overwrites[match] && overwrites[match].items) ? this._validateItems(overwrites[match].items, this._options.skip_validateItems) : this._options.items };\n        // if (typeof this.settings.stagePadding === 'function') {\n        // \tthis.settings.stagePadding = this.settings.stagePadding();\n        // }\n        delete this.settings.responsive;\n        this.owlDOMData.isResponsive = true;\n        this.owlDOMData.isMouseDragable = this.settings.mouseDrag;\n        this.owlDOMData.isTouchDragable = this.settings.touchDrag;\n        const mergers = [];\n        this._items.forEach(item => {\n            const mergeN = this.settings.merge ? item.dataMerge : 1;\n            mergers.push(mergeN);\n        });\n        this._mergers = mergers;\n        this._breakpoint = match;\n        this.invalidate('settings');\n    }\n    /**\n     * Initializes the carousel.\n     * @param slides array of CarouselSlideDirective\n     */\n    initialize(slides) {\n        this.enter('initializing');\n        // this.trigger('initialize');\n        this.owlDOMData.rtl = this.settings.rtl;\n        if (this._mergers.length) {\n            this._mergers = [];\n        }\n        slides.forEach(item => {\n            const mergeN = this.settings.merge ? item.dataMerge : 1;\n            this._mergers.push(mergeN);\n        });\n        this._clones = [];\n        this.reset(this._isNumeric(this.settings.startPosition) ? +this.settings.startPosition : 0);\n        this.invalidate('items');\n        this.refresh();\n        this.owlDOMData.isLoaded = true;\n        this.owlDOMData.isMouseDragable = this.settings.mouseDrag;\n        this.owlDOMData.isTouchDragable = this.settings.touchDrag;\n        this.sendChanges();\n        this.leave('initializing');\n        this._trigger('initialized');\n    }\n    ;\n    /**\n     * Sends all data needed for View\n     */\n    sendChanges() {\n        this._viewSettingsShipper$.next({\n            owlDOMData: this.owlDOMData,\n            stageData: this.stageData,\n            slidesData: this.slidesData,\n            navData: this.navData,\n            dotsData: this.dotsData\n        });\n    }\n    /**\n     * Updates option logic if necessery\n     */\n    _optionsLogic() {\n        if (this.settings.autoWidth) {\n            this.settings.stagePadding = 0;\n            this.settings.merge = false;\n        }\n    }\n    /**\n     * Updates the view\n     */\n    update() {\n        let i = 0;\n        const n = this._pipe.length, filter = item => this._invalidated[item], cache = {};\n        while (i < n) {\n            const filteredPipe = this._pipe[i].filter.filter(filter);\n            if (this._invalidated.all || filteredPipe.length > 0) {\n                this._pipe[i].run(cache);\n            }\n            i++;\n        }\n        this.slidesData.forEach(slide => slide.classes = this.setCurSlideClasses(slide));\n        this.sendChanges();\n        this._invalidated = {};\n        if (!this.is('valid')) {\n            this.enter('valid');\n        }\n    }\n    /**\n     * Gets the width of the view.\n     * @param [dimension=Width.Default] The dimension to return\n     * @returns The width of the view in pixel.\n     */\n    width(dimension) {\n        dimension = dimension || Width.Default;\n        switch (dimension) {\n            case Width.Inner:\n            case Width.Outer:\n                return this._width;\n            default:\n                return this._width - this.settings.stagePadding * 2 + this.settings.margin;\n        }\n    }\n    /**\n     * Refreshes the carousel primarily for adaptive purposes.\n     */\n    refresh() {\n        this.enter('refreshing');\n        this._trigger('refresh');\n        this._defineSlidesData();\n        this.setOptionsForViewport();\n        this._optionsLogic();\n        // this.$element.addClass(this.options.refreshClass);\n        this.update();\n        // this.$element.removeClass(this.options.refreshClass);\n        this.leave('refreshing');\n        this._trigger('refreshed');\n    }\n    /**\n     * Checks window `resize` event.\n     * @param curWidth width of .owl-carousel\n     */\n    onResize(curWidth) {\n        if (!this._items.length) {\n            return false;\n        }\n        this.setCarouselWidth(curWidth);\n        this.enter('resizing');\n        // if (this.trigger('resize').isDefaultPrevented()) {\n        // \tthis.leave('resizing');\n        // \treturn false;\n        // }\n        this._trigger('resize');\n        this.invalidate('width');\n        this.refresh();\n        this.leave('resizing');\n        this._trigger('resized');\n    }\n    /**\n     * Prepares data for dragging carousel. It starts after firing `touchstart` and `mousedown` events.\n     * @todo Horizontal swipe threshold as option\n     * @todo #261\n     * @param event - The event arguments.\n     * @returns stage - object with 'x' and 'y' coordinates of .owl-stage\n     */\n    prepareDragging(event) {\n        let stage = null, transformArr;\n        // could be 5 commented lines below; However there's stage transform in stageData and in updates after each move of stage\n        // stage = getComputedStyle(this.el.nativeElement).transform.replace(/.*\\(|\\)| /g, '').split(',');\n        // stage = {\n        //   x: stage[stage.length === 16 ? 12 : 4],\n        //   y: stage[stage.length === 16 ? 13 : 5]\n        // };\n        transformArr = this.stageData.transform.replace(/.*\\(|\\)| |[^,-\\d]\\w|\\)/g, '').split(',');\n        stage = {\n            x: +transformArr[0],\n            y: +transformArr[1]\n        };\n        if (this.is('animating')) {\n            this.invalidate('position');\n        }\n        if (event.type === 'mousedown') {\n            this.owlDOMData.isGrab = true;\n        }\n        this.speed(0);\n        return stage;\n    }\n    /**\n     * Enters into a 'dragging' state\n     */\n    enterDragging() {\n        this.enter('dragging');\n        this._trigger('drag');\n    }\n    /**\n     * Defines new coords for .owl-stage while dragging it\n     * @todo #261\n     * @param event the event arguments.\n     * @param dragData initial data got after starting dragging\n     * @returns coords or false\n     */\n    defineNewCoordsDrag(event, dragData) {\n        let minimum = null, maximum = null, pull = null;\n        const delta = this.difference(dragData.pointer, this.pointer(event)), stage = this.difference(dragData.stage.start, delta);\n        if (!this.is('dragging')) {\n            return false;\n        }\n        if (this.settings.loop) {\n            minimum = this.coordinates(this.minimum());\n            maximum = +this.coordinates(this.maximum() + 1) - minimum;\n            stage.x = (((stage.x - minimum) % maximum + maximum) % maximum) + minimum;\n        }\n        else {\n            minimum = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());\n            maximum = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());\n            pull = this.settings.pullDrag ? -1 * delta.x / 5 : 0;\n            stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);\n        }\n        return stage;\n    }\n    /**\n     * Finishes dragging of carousel when `touchend` and `mouseup` events fire.\n     * @todo #261\n     * @todo Threshold for click event\n     * @param event the event arguments.\n     * @param dragObj the object with dragging settings and states\n     * @param clickAttacher function which attaches click handler to slide or its children elements in order to prevent event bubling\n     */\n    finishDragging(event, dragObj, clickAttacher) {\n        const directions = ['right', 'left'], delta = this.difference(dragObj.pointer, this.pointer(event)), stage = dragObj.stage.current, direction = directions[+(this.settings.rtl ? delta.x < +this.settings.rtl : delta.x > +this.settings.rtl)];\n        let currentSlideI, current, newCurrent;\n        if (delta.x !== 0 && this.is('dragging') || !this.is('valid')) {\n            this.speed(+this.settings.dragEndSpeed || this.settings.smartSpeed);\n            currentSlideI = this.closest(stage.x, delta.x !== 0 ? direction : dragObj.direction);\n            current = this.current();\n            newCurrent = this.current(currentSlideI === -1 ? undefined : currentSlideI);\n            if (current !== newCurrent) {\n                this.invalidate('position');\n                this.update();\n            }\n            dragObj.direction = direction;\n            if (Math.abs(delta.x) > 3 || new Date().getTime() - dragObj.time > 300) {\n                clickAttacher();\n            }\n        }\n        if (!this.is('dragging')) {\n            return;\n        }\n        this.leave('dragging');\n        this._trigger('dragged');\n    }\n    /**\n     * Gets absolute position of the closest item for a coordinate.\n     * @todo Setting `freeDrag` makes `closest` not reusable. See #165.\n     * @param coordinate The coordinate in pixel.\n     * @param direction The direction to check for the closest item. Ether `left` or `right`.\n     * @returns The absolute position of the closest item.\n     */\n    closest(coordinate, direction) {\n        const pull = 30, width = this.width();\n        let coordinates = this.coordinates(), position = -1;\n        if (this.settings.center) {\n            coordinates = coordinates.map(item => {\n                if (item === 0) {\n                    item += 0.000001;\n                }\n                return item;\n            });\n        }\n        // option 'freeDrag' doesn't have realization and using it here creates problem:\n        // variable 'position' stays unchanged (it equals -1 at the begging) and thus method returns -1\n        // Returning value is consumed by method current(), which taking -1 as argument calculates the index of new current slide\n        // In case of having 5 slides ans 'loop=false; calling 'current(-1)' sets props '_current' as 4. Just last slide remains visible instead of 3 last slides.\n        // if (!this.settings.freeDrag) {\n        // check closest item\n        for (let i = 0; i < coordinates.length; i++) {\n            if (direction === 'left' && coordinate > coordinates[i] - pull && coordinate < coordinates[i] + pull) {\n                position = i;\n                // on a right pull, check on previous index\n                // to do so, subtract width from value and set position = index + 1\n            }\n            else if (direction === 'right' && coordinate > coordinates[i] - width - pull && coordinate < coordinates[i] - width + pull) {\n                position = i + 1;\n            }\n            else if (this._op(coordinate, '<', coordinates[i])\n                && this._op(coordinate, '>', coordinates[i + 1] || coordinates[i] - width)) {\n                position = direction === 'left' ? i + 1 : i;\n            }\n            else if (direction === null && coordinate > coordinates[i] - pull && coordinate < coordinates[i] + pull) {\n                position = i;\n            }\n            if (position !== -1) {\n                break;\n            }\n            ;\n        }\n        // }\n        if (!this.settings.loop) {\n            // non loop boundries\n            if (this._op(coordinate, '>', coordinates[this.minimum()])) {\n                position = coordinate = this.minimum();\n            }\n            else if (this._op(coordinate, '<', coordinates[this.maximum()])) {\n                position = coordinate = this.maximum();\n            }\n        }\n        return position;\n    }\n    /**\n     * Animates the stage.\n     * @todo #270\n     * @param coordinate The coordinate in pixels.\n     */\n    animate(coordinate) {\n        const animate = this.speed() > 0;\n        if (this.is('animating')) {\n            this.onTransitionEnd();\n        }\n        if (animate) {\n            this.enter('animating');\n            this._trigger('translate');\n        }\n        this.stageData.transform = 'translate3d(' + coordinate + 'px,0px,0px)';\n        this.stageData.transition = (this.speed() / 1000) + 's' + (this.settings.slideTransition ? ' ' + this.settings.slideTransition : '');\n        // also there was transition by means of JQuery.animate or css-changing property left\n    }\n    /**\n     * Checks whether the carousel is in a specific state or not.\n     * @param state The state to check.\n     * @returns The flag which indicates if the carousel is busy.\n     */\n    is(state) {\n        return this._states.current[state] && this._states.current[state] > 0;\n    }\n    ;\n    /**\n     * Sets the absolute position of the current item.\n     * @param position The new absolute position or nothing to leave it unchanged.\n     * @returns The absolute position of the current item.\n     */\n    current(position) {\n        if (position === undefined) {\n            return this._current;\n        }\n        if (this._items.length === 0) {\n            return undefined;\n        }\n        position = this.normalize(position);\n        if (this._current !== position) {\n            const event = this._trigger('change', { property: { name: 'position', value: position } });\n            // if (event.data !== undefined) {\n            // \tposition = this.normalize(event.data);\n            // }\n            this._current = position;\n            this.invalidate('position');\n            this._trigger('changed', { property: { name: 'position', value: this._current } });\n        }\n        return this._current;\n    }\n    /**\n     * Invalidates the given part of the update routine.\n     * @param part The part to invalidate.\n     * @returns The invalidated parts.\n     */\n    invalidate(part) {\n        if (typeof part === 'string') {\n            this._invalidated[part] = true;\n            if (this.is('valid')) {\n                this.leave('valid');\n            }\n        }\n        return Object.keys(this._invalidated);\n    }\n    ;\n    /**\n     * Resets the absolute position of the current item.\n     * @param position the absolute position of the new item.\n     */\n    reset(position) {\n        position = this.normalize(position);\n        if (position === undefined) {\n            return;\n        }\n        this._speed = 0;\n        this._current = position;\n        this._suppress(['translate', 'translated']);\n        this.animate(this.coordinates(position));\n        this._release(['translate', 'translated']);\n    }\n    /**\n     * Normalizes an absolute or a relative position of an item.\n     * @param position The absolute or relative position to normalize.\n     * @param relative Whether the given position is relative or not.\n     * @returns The normalized position.\n     */\n    normalize(position, relative) {\n        const n = this._items.length, m = relative ? 0 : this._clones.length;\n        if (!this._isNumeric(position) || n < 1) {\n            position = undefined;\n        }\n        else if (position < 0 || position >= n + m) {\n            position = ((position - m / 2) % n + n) % n + m / 2;\n        }\n        return position;\n    }\n    /**\n     * Converts an absolute position of an item into a relative one.\n     * @param position The absolute position to convert.\n     * @returns The converted position.\n     */\n    relative(position) {\n        position -= this._clones.length / 2;\n        return this.normalize(position, true);\n    }\n    /**\n     * Gets the maximum position for the current item.\n     * @param relative Whether to return an absolute position or a relative position.\n     * @returns number of maximum position\n     */\n    maximum(relative = false) {\n        const settings = this.settings;\n        let maximum = this._coordinates.length, iterator, reciprocalItemsWidth, elementWidth;\n        if (settings.loop) {\n            maximum = this._clones.length / 2 + this._items.length - 1;\n        }\n        else if (settings.autoWidth || settings.merge) {\n            iterator = this._items.length;\n            reciprocalItemsWidth = this.slidesData[--iterator].width;\n            elementWidth = this._width;\n            while (iterator-- > 0) {\n                // it could be use this._items instead of this.slidesData;\n                reciprocalItemsWidth += +this.slidesData[iterator].width + this.settings.margin;\n                if (reciprocalItemsWidth > elementWidth) {\n                    break;\n                }\n            }\n            maximum = iterator + 1;\n        }\n        else if (settings.center) {\n            maximum = this._items.length - 1;\n        }\n        else {\n            maximum = this._items.length - settings.items;\n        }\n        if (relative) {\n            maximum -= this._clones.length / 2;\n        }\n        return Math.max(maximum, 0);\n    }\n    /**\n     * Gets the minimum position for the current item.\n     * @param relative Whether to return an absolute position or a relative position.\n     * @returns number of minimum position\n     */\n    minimum(relative = false) {\n        return relative ? 0 : this._clones.length / 2;\n    }\n    /**\n     * Gets an item at the specified relative position.\n     * @param position The relative position of the item.\n     * @returns The item at the given position or all items if no position was given.\n     */\n    items(position) {\n        if (position === undefined) {\n            return this._items.slice();\n        }\n        position = this.normalize(position, true);\n        return [this._items[position]];\n    }\n    /**\n     * Gets an item at the specified relative position.\n     * @param position The relative position of the item.\n     * @returns The item at the given position or all items if no position was given.\n     */\n    mergers(position) {\n        if (position === undefined) {\n            return this._mergers.slice();\n        }\n        position = this.normalize(position, true);\n        return this._mergers[position];\n    }\n    /**\n     * Gets the absolute positions of clones for an item.\n     * @param position The relative position of the item.\n     * @returns The absolute positions of clones for the item or all if no position was given.\n     */\n    clones(position) {\n        const odd = this._clones.length / 2, even = odd + this._items.length, map = index => index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2;\n        if (position === undefined) {\n            return this._clones.map((v, i) => map(i));\n        }\n        return this._clones.map((v, i) => v === position ? map(i) : null).filter(item => item);\n    }\n    /**\n     * Sets the current animation speed.\n     * @param speed The animation speed in milliseconds or nothing to leave it unchanged.\n     * @returns The current animation speed in milliseconds.\n     */\n    speed(speed) {\n        if (speed !== undefined) {\n            this._speed = speed;\n        }\n        return this._speed;\n    }\n    /**\n     * Gets the coordinate of an item.\n     * @todo The name of this method is missleanding.\n     * @param position The absolute position of the item within `minimum()` and `maximum()`.\n     * @returns The coordinate of the item in pixel or all coordinates.\n     */\n    coordinates(position) {\n        let multiplier = 1, newPosition = position - 1, coordinate, result;\n        if (position === undefined) {\n            result = this._coordinates.map((item, index) => {\n                return this.coordinates(index);\n            });\n            return result;\n        }\n        if (this.settings.center) {\n            if (this.settings.rtl) {\n                multiplier = -1;\n                newPosition = position + 1;\n            }\n            coordinate = this._coordinates[position];\n            coordinate += (this.width() - coordinate + (this._coordinates[newPosition] || 0)) / 2 * multiplier;\n        }\n        else {\n            coordinate = this._coordinates[newPosition] || 0;\n        }\n        coordinate = Math.ceil(coordinate);\n        return coordinate;\n    }\n    /**\n     * Calculates the speed for a translation.\n     * @param from The absolute position of the start item.\n     * @param to The absolute position of the target item.\n     * @param factor [factor=undefined] - The time factor in milliseconds.\n     * @returns The time in milliseconds for the translation.\n     */\n    _duration(from, to, factor) {\n        if (factor === 0) {\n            return 0;\n        }\n        return Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((+factor || this.settings.smartSpeed));\n    }\n    /**\n     * Slides to the specified item.\n     * @param position The position of the item.\n     * @param speed The time in milliseconds for the transition.\n     */\n    to(position, speed) {\n        let current = this.current(), revert = null, distance = position - this.relative(current), maximum = this.maximum(), delayForLoop = 0;\n        const direction = +(distance > 0) - +(distance < 0), items = this._items.length, minimum = this.minimum();\n        if (this.settings.loop) {\n            if (!this.settings.rewind && Math.abs(distance) > items / 2) {\n                distance += direction * -1 * items;\n            }\n            position = current + distance;\n            revert = ((position - minimum) % items + items) % items + minimum;\n            if (revert !== position && revert - distance <= maximum && revert - distance > 0) {\n                current = revert - distance;\n                position = revert;\n                delayForLoop = 30;\n                this.reset(current);\n                this.sendChanges();\n            }\n        }\n        else if (this.settings.rewind) {\n            maximum += 1;\n            position = (position % maximum + maximum) % maximum;\n        }\n        else {\n            position = Math.max(minimum, Math.min(maximum, position));\n        }\n        setTimeout(() => {\n            this.speed(this._duration(current, position, speed));\n            this.current(position);\n            this.update();\n        }, delayForLoop);\n    }\n    /**\n     * Slides to the next item.\n     * @param speed The time in milliseconds for the transition.\n     */\n    next(speed) {\n        speed = speed || false;\n        this.to(this.relative(this.current()) + 1, speed);\n    }\n    /**\n     * Slides to the previous item.\n     * @param speed The time in milliseconds for the transition.\n     */\n    prev(speed) {\n        speed = speed || false;\n        this.to(this.relative(this.current()) - 1, speed);\n    }\n    /**\n     * Handles the end of an animation.\n     * @param event - The event arguments.\n     */\n    onTransitionEnd(event) {\n        // if css2 animation then event object is undefined\n        if (event !== undefined) {\n            // event.stopPropagation();\n            // // Catch only owl-stage transitionEnd event\n            // if ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)\t) {\n            // \treturn false;\n            // }\n            return false;\n        }\n        this.leave('animating');\n        this._trigger('translated');\n    }\n    /**\n     * Gets viewport width.\n     * @returns - The width in pixel.\n     */\n    _viewport() {\n        let width;\n        if (this._width) {\n            width = this._width;\n        }\n        else {\n            this.logger.log('Can not detect viewport width.');\n        }\n        return width;\n    }\n    /**\n     * Sets _items\n     * @param content The list of slides put into CarouselSlideDirectives.\n     */\n    setItems(content) {\n        this._items = content;\n    }\n    /**\n     * Sets slidesData using this._items\n     */\n    _defineSlidesData() {\n        // Maybe creating and using loadMap would be better in LazyLoadService.\n        // Hovewer in that case when 'resize' event fires, prop 'load' of all slides will get 'false' and such state of prop will be seen by View during its updating. Accordingly the code will remove slides's content from DOM even if it was loaded before.\n        // Thus it would be needed to add that content into DOM again.\n        // In order to avoid additional removing/adding loaded slides's content we use loadMap here and set restore state of prop 'load' before the View will get it.\n        let loadMap;\n        if (this.slidesData && this.slidesData.length) {\n            loadMap = new Map();\n            this.slidesData.forEach(item => {\n                if (item.load) {\n                    loadMap.set(item.id, item.load);\n                }\n            });\n        }\n        this.slidesData = this._items.map(slide => {\n            return {\n                id: `${slide.id}`,\n                isActive: false,\n                tplRef: slide.tplRef,\n                dataMerge: slide.dataMerge,\n                width: 0,\n                isCloned: false,\n                load: loadMap ? loadMap.get(slide.id) : false,\n                hashFragment: slide.dataHash\n            };\n        });\n    }\n    /**\n     * Sets current classes for slide\n     * @param slide Slide of carousel\n     * @returns object with names of css-classes which are keys and true/false values\n     */\n    setCurSlideClasses(slide) {\n        // CSS classes: added/removed per current state of component properties\n        const currentClasses = {\n            'active': slide.isActive,\n            'center': slide.isCentered,\n            'cloned': slide.isCloned,\n            'animated': slide.isAnimated,\n            'owl-animated-in': slide.isDefAnimatedIn,\n            'owl-animated-out': slide.isDefAnimatedOut\n        };\n        if (this.settings.animateIn) {\n            currentClasses[this.settings.animateIn] = slide.isCustomAnimatedIn;\n        }\n        if (this.settings.animateOut) {\n            currentClasses[this.settings.animateOut] = slide.isCustomAnimatedOut;\n        }\n        return currentClasses;\n    }\n    /**\n     * Operators to calculate right-to-left and left-to-right.\n     * @param a - The left side operand.\n     * @param o - The operator.\n     * @param b - The right side operand.\n     * @returns true/false meaning right-to-left or left-to-right\n     */\n    _op(a, o, b) {\n        const rtl = this.settings.rtl;\n        switch (o) {\n            case '<':\n                return rtl ? a > b : a < b;\n            case '>':\n                return rtl ? a < b : a > b;\n            case '>=':\n                return rtl ? a <= b : a >= b;\n            case '<=':\n                return rtl ? a >= b : a <= b;\n            default:\n                break;\n        }\n    }\n    /**\n     * Triggers a public event.\n     * @todo Remove `status`, `relatedTarget` should be used instead.\n     * @param name The event name.\n     * @param data The event data.\n     * @param namespace The event namespace.\n     * @param state The state which is associated with the event.\n     * @param enter Indicates if the call enters the specified state or not.\n     */\n    _trigger(name, data, namespace, state, enter) {\n        switch (name) {\n            case 'initialized':\n                this._initializedCarousel$.next(name);\n                break;\n            case 'change':\n                this._changeSettingsCarousel$.next(data);\n                break;\n            case 'changed':\n                this._changedSettingsCarousel$.next(data);\n                break;\n            case 'drag':\n                this._dragCarousel$.next(name);\n                break;\n            case 'dragged':\n                this._draggedCarousel$.next(name);\n                break;\n            case 'resize':\n                this._resizeCarousel$.next(name);\n                break;\n            case 'resized':\n                this._resizedCarousel$.next(name);\n                break;\n            case 'refresh':\n                this._refreshCarousel$.next(name);\n                break;\n            case 'refreshed':\n                this._refreshedCarousel$.next(name);\n                break;\n            case 'translate':\n                this._translateCarousel$.next(name);\n                break;\n            case 'translated':\n                this._translatedCarousel$.next(name);\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n     * Enters a state.\n     * @param name - The state name.\n     */\n    enter(name) {\n        [name].concat(this._states.tags[name] || []).forEach((stateName) => {\n            if (this._states.current[stateName] === undefined) {\n                this._states.current[stateName] = 0;\n            }\n            this._states.current[stateName]++;\n        });\n    }\n    ;\n    /**\n     * Leaves a state.\n     * @param name - The state name.\n     */\n    leave(name) {\n        [name].concat(this._states.tags[name] || []).forEach((stateName) => {\n            if (this._states.current[stateName] === 0 || !!this._states.current[stateName]) {\n                this._states.current[stateName]--;\n            }\n        });\n    }\n    ;\n    /**\n     * Registers an event or state.\n     * @param object - The event or state to register.\n     */\n    register(object) {\n        if (object.type === Type.State) {\n            if (!this._states.tags[object.name]) {\n                this._states.tags[object.name] = object.tags;\n            }\n            else {\n                this._states.tags[object.name] = this._states.tags[object.name].concat(object.tags);\n            }\n            this._states.tags[object.name] = this._states.tags[object.name].filter((tag, i) => {\n                return this._states.tags[object.name].indexOf(tag) === i;\n            });\n        }\n    }\n    /**\n     * Suppresses events.\n     * @param events The events to suppress.\n     */\n    _suppress(events) {\n        events.forEach(event => {\n            this._supress[event] = true;\n        });\n    }\n    /**\n     * Releases suppressed events.\n     * @param events The events to release.\n     */\n    _release(events) {\n        events.forEach(event => {\n            delete this._supress[event];\n        });\n    }\n    /**\n     * Gets unified pointer coordinates from event.\n     * @todo #261\n     * @param event The `mousedown` or `touchstart` event.\n     * @returns Object Coords which contains `x` and `y` coordinates of current pointer position.\n     */\n    pointer(event) {\n        const result = { x: null, y: null };\n        event = event.originalEvent || event || window.event;\n        event = event.touches && event.touches.length ?\n            event.touches[0] : event.changedTouches && event.changedTouches.length ?\n            event.changedTouches[0] : event;\n        if (event.pageX) {\n            result.x = event.pageX;\n            result.y = event.pageY;\n        }\n        else {\n            result.x = event.clientX;\n            result.y = event.clientY;\n        }\n        return result;\n    }\n    /**\n     * Determines if the input is a Number or something that can be coerced to a Number\n     * @param number The input to be tested\n     * @returns An indication if the input is a Number or can be coerced to a Number\n     */\n    _isNumeric(number) {\n        return !isNaN(parseFloat(number));\n    }\n    /**\n     * Determines whether value is number or boolean type\n     * @param value The input to be tested\n     * @returns An indication if the input is a Number or can be coerced to a Number, or Boolean\n     */\n    _isNumberOrBoolean(value) {\n        return this._isNumeric(value) || typeof value === 'boolean';\n    }\n    /**\n     * Determines whether value is number or string type\n     * @param value The input to be tested\n     * @returns An indication if the input is a Number or can be coerced to a Number, or String\n     */\n    _isNumberOrString(value) {\n        return this._isNumeric(value) || typeof value === 'string';\n    }\n    /**\n     * Determines whether value is number or string type\n     * @param value The input to be tested\n     * @returns An indication if the input is a Number or can be coerced to a Number, or String\n     */\n    _isStringOrBoolean(value) {\n        return typeof value === 'string' || typeof value === 'boolean';\n    }\n    /**\n     * Gets the difference of two vectors.\n     * @todo #261\n     * @param first The first vector.\n     * @param second The second vector.\n     * @returns The difference.\n     */\n    difference(first, second) {\n        if (null === first || null === second) {\n            return {\n                x: 0,\n                y: 0,\n            };\n        }\n        return {\n            x: first.x - second.x,\n            y: first.y - second.y\n        };\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselService, deps: [{ token: OwlLogger }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: OwlLogger }] });\n\nclass NavigationService {\n    carouselService;\n    /**\n     * Subscrioption to merge Observable  from CarouselService\n     */\n    navSubscription;\n    /**\n     * Indicates whether the plugin is initialized or not.\n     */\n    _initialized = false;\n    /**\n     * The current paging indexes.\n     */\n    _pages = [];\n    /**\n     * Data for navigation elements of the user interface.\n     */\n    _navData = {\n        disabled: false,\n        prev: {\n            disabled: false,\n            htmlText: ''\n        },\n        next: {\n            disabled: false,\n            htmlText: ''\n        },\n    };\n    /**\n     * Data for dot elements of the user interface.\n     */\n    _dotsData = {\n        disabled: false,\n        dots: []\n    };\n    constructor(carouselService) {\n        this.carouselService = carouselService;\n        this.spyDataStreams();\n    }\n    ngOnDestroy() {\n        this.navSubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(state => {\n            this.initialize();\n            this._updateNavPages();\n            this.draw();\n            this.update();\n            this.carouselService.sendChanges();\n        }));\n        // mostly changes in carouselService and carousel at all causes carouselService.to(). It moves stage right-left by its code and calling needed functions\n        // Thus this method by calling carouselService.current(position) notifies about changes\n        const changedSettings$ = this.carouselService.getChangedState().pipe(filter(data => data.property.name === 'position'), tap(data => {\n            this.update();\n            // should be the call of the function written at the end of comment\n            // but the method carouselServive.to() has setTimeout(f, 0) which contains carouselServive.update() which calls sendChanges() method.\n            // carouselService.navData and carouselService.dotsData update earlier than carouselServive.update() gets called\n            // updates of carouselService.navData and carouselService.dotsData are being happening withing carouselService.current(position) method which calls next() of _changedSettingsCarousel$\n            // carouselService.current(position) is being calling earlier than carouselServive.update();\n            // this.carouselService.sendChanges();\n        }));\n        const refreshedCarousel$ = this.carouselService.getRefreshedState().pipe(tap(() => {\n            this._updateNavPages();\n            this.draw();\n            this.update();\n            this.carouselService.sendChanges();\n        }));\n        const navMerge$ = merge(initializedCarousel$, changedSettings$, refreshedCarousel$);\n        this.navSubscription = navMerge$.subscribe(() => { });\n    }\n    /**\n       * Initializes the layout of the plugin and extends the carousel.\n       */\n    initialize() {\n        this._navData.disabled = true;\n        this._navData.prev.htmlText = this.carouselService.settings.navText[0];\n        this._navData.next.htmlText = this.carouselService.settings.navText[1];\n        this._dotsData.disabled = true;\n        this.carouselService.navData = this._navData;\n        this.carouselService.dotsData = this._dotsData;\n    }\n    /**\n     * Calculates internal states and updates prop _pages\n     */\n    _updateNavPages() {\n        let i, j, k;\n        const lower = this.carouselService.clones().length / 2, upper = lower + this.carouselService.items().length, maximum = this.carouselService.maximum(true), pages = [], settings = this.carouselService.settings;\n        let size = settings.center || settings.autoWidth || settings.dotsData\n            ? 1 : Math.floor(Number(settings.dotsEach)) || Math.floor(settings.items);\n        size = +size;\n        if (settings.slideBy !== 'page') {\n            settings.slideBy = Math.min(+settings.slideBy, settings.items);\n        }\n        if (settings.dots || settings.slideBy === 'page') {\n            for (i = lower, j = 0, k = 0; i < upper; i++) {\n                if (j >= size || j === 0) {\n                    pages.push({\n                        start: Math.min(maximum, i - lower),\n                        end: i - lower + size - 1\n                    });\n                    if (Math.min(maximum, i - lower) === maximum) {\n                        break;\n                    }\n                    j = 0, ++k;\n                }\n                j += this.carouselService.mergers(this.carouselService.relative(i));\n            }\n        }\n        this._pages = pages;\n    }\n    /**\n       * Draws the user interface.\n       * @todo The option `dotsData` wont work.\n       */\n    draw() {\n        let difference;\n        const settings = this.carouselService.settings, items = this.carouselService.items(), disabled = items.length <= settings.items;\n        this._navData.disabled = !settings.nav || disabled;\n        this._dotsData.disabled = !settings.dots || disabled;\n        if (settings.dots) {\n            difference = this._pages.length - this._dotsData.dots.length;\n            if (settings.dotsData && difference !== 0) {\n                this._dotsData.dots = [];\n                items.forEach(item => {\n                    this._dotsData.dots.push({\n                        active: false,\n                        id: `dot-${item.id}`,\n                        innerContent: item.dotContent,\n                        showInnerContent: true\n                    });\n                });\n            }\n            else if (difference > 0) {\n                const startI = this._dotsData.dots.length > 0 ? this._dotsData.dots.length : 0;\n                for (let i = 0; i < difference; i++) {\n                    this._dotsData.dots.push({\n                        active: false,\n                        id: `dot-${i + startI}`,\n                        innerContent: '',\n                        showInnerContent: false\n                    });\n                }\n            }\n            else if (difference < 0) {\n                this._dotsData.dots.splice(difference, Math.abs(difference));\n            }\n        }\n        this.carouselService.navData = this._navData;\n        this.carouselService.dotsData = this._dotsData;\n    }\n    ;\n    /**\n     * Updates navigation buttons's and dots's states\n     */\n    update() {\n        this._updateNavButtons();\n        this._updateDots();\n    }\n    /**\n     * Changes state of nav buttons (disabled, enabled)\n     */\n    _updateNavButtons() {\n        const settings = this.carouselService.settings, loop = settings.loop || settings.rewind, index = this.carouselService.relative(this.carouselService.current());\n        if (settings.nav) {\n            this._navData.prev.disabled = !loop && index <= this.carouselService.minimum(true);\n            this._navData.next.disabled = !loop && index >= this.carouselService.maximum(true);\n        }\n        this.carouselService.navData = this._navData;\n    }\n    /**\n     * Changes active dot if page becomes changed\n     */\n    _updateDots() {\n        let curActiveDotI;\n        if (!this.carouselService.settings.dots) {\n            return;\n        }\n        this._dotsData.dots.forEach(item => {\n            if (item.active === true) {\n                item.active = false;\n            }\n        });\n        curActiveDotI = this._current();\n        if (this._dotsData.dots.length) {\n            this._dotsData.dots[curActiveDotI].active = true;\n        }\n        this.carouselService.dotsData = this._dotsData;\n    }\n    /**\n       * Gets the current page position of the carousel.\n       * @returns the current page position of the carousel\n       */\n    _current() {\n        const current = this.carouselService.relative(this.carouselService.current());\n        let finalCurrent;\n        const pages = this._pages.filter((page, index) => {\n            return page.start <= current && page.end >= current;\n        }).pop();\n        finalCurrent = this._pages.findIndex(page => {\n            return page.start === pages.start && page.end === pages.end;\n        });\n        return finalCurrent;\n    }\n    ;\n    /**\n       * Gets the current succesor/predecessor position.\n     * @param sussessor position of slide\n       * @returns the current succesor/predecessor position\n       */\n    _getPosition(successor) {\n        let position, length;\n        const settings = this.carouselService.settings;\n        if (settings.slideBy === 'page') {\n            position = this._current();\n            length = this._pages.length;\n            successor ? ++position : --position;\n            position = this._pages[((position % length) + length) % length].start;\n        }\n        else {\n            position = this.carouselService.relative(this.carouselService.current());\n            length = this.carouselService.items().length;\n            successor ? position += +settings.slideBy : position -= +settings.slideBy;\n        }\n        return position;\n    }\n    ;\n    /**\n       * Slides to the next item or page.\n       * @param speed The time in milliseconds for the transition.\n       */\n    next(speed) {\n        this.carouselService.to(this._getPosition(true), speed);\n    }\n    ;\n    /**\n     * Slides to the previous item or page.\n     * @param speed The time in milliseconds for the transition.\n     */\n    prev(speed) {\n        this.carouselService.to(this._getPosition(false), speed);\n    }\n    ;\n    /**\n     * Slides to the specified item or page.\n     * @param position - The position of the item or page.\n     * @param speed - The time in milliseconds for the transition.\n     * @param standard - Whether to use the standard behaviour or not. Default meaning false\n     */\n    to(position, speed, standard) {\n        let length;\n        if (!standard && this._pages.length) {\n            length = this._pages.length;\n            this.carouselService.to(this._pages[((position % length) + length) % length].start, speed);\n        }\n        else {\n            this.carouselService.to(position, speed);\n        }\n    }\n    ;\n    /**\n     * Moves carousel after user's clicking on any dots\n     */\n    moveByDot(dotId) {\n        const index = this._dotsData.dots.findIndex(dot => dotId === dot.id);\n        this.to(index, this.carouselService.settings.dotsSpeed);\n    }\n    /**\n     * rewinds carousel to slide with needed id\n     * @param id id of slide\n     */\n    toSlideById(id) {\n        const position = this.carouselService.slidesData.findIndex(slide => slide.id === id && slide.isCloned === false);\n        if (position === -1 || position === this.carouselService.current()) {\n            return;\n        }\n        this.carouselService.to(this.carouselService.relative(position), false);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: NavigationService, deps: [{ token: CarouselService }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: NavigationService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: NavigationService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }] });\n\n// import { Injectable } from '@angular/core';\n// function _window(): any {\n//    // return the global native browser window object\n//    return window;\n// }\n// @Injectable()\n// export class WindowRefService {\n//    get nativeWindow(): any {\n//       return _window();\n//    }\n// }\n/**\n * Create a new injection token for injecting the window into a component.\n */\nconst WINDOW = new InjectionToken('WindowToken');\n/**\n * Define abstract class for obtaining reference to the global window object.\n */\nclass WindowRef {\n    get nativeWindow() {\n        throw new Error('Not implemented.');\n    }\n}\n/**\n * Define class that implements the abstract class and returns the native window object.\n */\nclass BrowserWindowRef extends WindowRef {\n    constructor() {\n        super();\n    }\n    /**\n     * @returns window object\n     */\n    get nativeWindow() {\n        return window;\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserWindowRef, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserWindowRef });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserWindowRef, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [] });\n/**\n * Create an factory function that returns the native window object.\n * @param browserWindowRef Native window object\n * @param platformId id of platform\n * @returns type of platform of empty object\n */\nfunction windowFactory(browserWindowRef, platformId) {\n    if (isPlatformBrowser(platformId)) {\n        return browserWindowRef.nativeWindow;\n    }\n    const obj = {\n        setTimeout: (func, time) => { },\n        clearTimeout: (a) => { }\n    };\n    return obj;\n}\n/**\n * Create a injectable provider for the WindowRef token that uses the BrowserWindowRef class.\n */\nconst browserWindowProvider = {\n    provide: WindowRef,\n    useClass: BrowserWindowRef\n};\n/**\n * Create an injectable provider that uses the windowFactory function for returning the native window object.\n */\nconst windowProvider = {\n    provide: WINDOW,\n    useFactory: windowFactory,\n    deps: [WindowRef, PLATFORM_ID]\n};\n/**\n * Create an array of providers.\n */\nconst WINDOW_PROVIDERS = [browserWindowProvider, windowProvider];\n\n/**\n * Create a new injection token for injecting the Document into a component.\n */\nconst DOCUMENT = new InjectionToken('DocumentToken');\n/**\n * Define abstract class for obtaining reference to the global Document object.\n */\nclass DocumentRef {\n    get nativeDocument() {\n        throw new Error('Not implemented.');\n    }\n}\n/**\n * Define class that implements the abstract class and returns the native Document object.\n */\nclass BrowserDocumentRef extends DocumentRef {\n    constructor() {\n        super();\n    }\n    /**\n     * @returns Document object\n     */\n    get nativeDocument() {\n        return document;\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserDocumentRef, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserDocumentRef });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: BrowserDocumentRef, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [] });\n/**\n * Create an factory function that returns the native Document object.\n * @param browserDocumentRef Native Document object\n * @param platformId id of platform\n * @returns type of platform of empty object\n */\nfunction documentFactory(browserDocumentRef, platformId) {\n    if (isPlatformBrowser(platformId)) {\n        return browserDocumentRef.nativeDocument;\n    }\n    const doc = {\n        hidden: false,\n        visibilityState: 'visible'\n    };\n    return doc;\n}\n/**\n * Create a injectable provider for the DocumentRef token that uses the BrowserDocumentRef class.\n */\nconst browserDocumentProvider = {\n    provide: DocumentRef,\n    useClass: BrowserDocumentRef\n};\n/**\n * Create an injectable provider that uses the DocumentFactory function for returning the native Document object.\n */\nconst documentProvider = {\n    provide: DOCUMENT,\n    useFactory: documentFactory,\n    deps: [DocumentRef, PLATFORM_ID]\n};\n/**\n * Create an array of providers.\n */\nconst DOCUMENT_PROVIDERS = [browserDocumentProvider, documentProvider];\n\nclass AutoplayService {\n    carouselService;\n    ngZone;\n    /**\n     * Subscrioption to merge Observables from CarouselService\n     */\n    autoplaySubscription;\n    /**\n     * The autoplay timeout.\n     */\n    _timeout = null;\n    /**\n     * Indicates whenever the autoplay is paused.\n     */\n    _paused = false;\n    /**\n     * Shows whether the code (the plugin) changed the option 'AutoplayTimeout' for own needs\n     */\n    _isArtificialAutoplayTimeout;\n    /**\n     * Shows whether the autoplay is paused for unlimited time by the developer.\n     * Use to prevent autoplaying in case of firing `mouseleave` by adding layers to `<body>` like `mat-menu` does\n     */\n    _isAutoplayStopped = false;\n    get isAutoplayStopped() {\n        return this._isAutoplayStopped;\n    }\n    set isAutoplayStopped(value) {\n        this._isAutoplayStopped = value;\n    }\n    winRef;\n    docRef;\n    constructor(carouselService, winRef, docRef, ngZone) {\n        this.carouselService = carouselService;\n        this.ngZone = ngZone;\n        this.winRef = winRef;\n        this.docRef = docRef;\n        this.spyDataStreams();\n    }\n    ngOnDestroy() {\n        this.autoplaySubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(() => {\n            if (this.carouselService.settings.autoplay) {\n                this.play();\n            }\n        }));\n        const changedSettings$ = this.carouselService.getChangedState().pipe(tap(data => {\n            this._handleChangeObservable(data);\n        }));\n        const resized$ = this.carouselService.getResizedState().pipe(tap(() => {\n            if (this.carouselService.settings.autoplay && !this._isAutoplayStopped) {\n                this.play();\n            }\n            else {\n                this.stop();\n            }\n        }));\n        // original Autoplay Plugin has listeners on play.owl.core and stop.owl.core events.\n        // They are triggered by Video Plugin\n        const autoplayMerge$ = merge(initializedCarousel$, changedSettings$, resized$);\n        this.autoplaySubscription = autoplayMerge$.subscribe(() => { });\n    }\n    /**\n       * Starts the autoplay.\n       * @param timeout The interval before the next animation starts.\n       * @param speed The animation speed for the animations.\n       */\n    play(timeout, speed) {\n        if (this._paused) {\n            this._paused = false;\n            this._setAutoPlayInterval(this.carouselService.settings.autoplayMouseleaveTimeout);\n        }\n        if (this.carouselService.is('rotating')) {\n            return;\n        }\n        this.carouselService.enter('rotating');\n        this._setAutoPlayInterval();\n    }\n    ;\n    /**\n       * Gets a new timeout\n       * @param timeout - The interval before the next animation starts.\n       * @param speed - The animation speed for the animations.\n       * @return\n       */\n    _getNextTimeout(timeout, speed) {\n        if (this._timeout) {\n            this.winRef.clearTimeout(this._timeout);\n        }\n        this._isArtificialAutoplayTimeout = timeout ? true : false;\n        return this.ngZone.runOutsideAngular(() => {\n            return this.winRef.setTimeout(() => {\n                this.ngZone.run(() => {\n                    if (this._paused || this.carouselService.is('busy') || this.carouselService.is('interacting') || this.docRef.hidden) {\n                        return;\n                    }\n                    this.carouselService.next(speed || this.carouselService.settings.autoplaySpeed);\n                });\n            }, timeout || this.carouselService.settings.autoplayTimeout);\n        });\n    }\n    ;\n    /**\n       * Sets autoplay in motion.\n       */\n    _setAutoPlayInterval(timeout) {\n        this._timeout = this._getNextTimeout(timeout);\n    }\n    ;\n    /**\n     * Stops the autoplay.\n     */\n    stop() {\n        if (!this.carouselService.is('rotating')) {\n            return;\n        }\n        this._paused = true;\n        this.winRef.clearTimeout(this._timeout);\n        this.carouselService.leave('rotating');\n    }\n    ;\n    /**\n       * Stops the autoplay.\n       */\n    pause() {\n        if (!this.carouselService.is('rotating')) {\n            return;\n        }\n        this._paused = true;\n    }\n    ;\n    /**\n     * Manages by autoplaying according to data passed by _changedSettingsCarousel$ Obsarvable\n     * @param data object with current position of carousel and type of change\n     */\n    _handleChangeObservable(data) {\n        if (data.property.name === 'settings') {\n            if (this.carouselService.settings.autoplay) {\n                this.play();\n            }\n            else {\n                this.stop();\n            }\n        }\n        else if (data.property.name === 'position') {\n            //console.log('play?', e);\n            if (this.carouselService.settings.autoplay) {\n                this._setAutoPlayInterval();\n            }\n        }\n    }\n    /**\n     * Starts autoplaying of the carousel in the case when user leaves the carousel before it starts translateing (moving)\n     */\n    _playAfterTranslated() {\n        of('translated').pipe(switchMap(data => this.carouselService.getTranslatedState()), first(), filter(() => this._isArtificialAutoplayTimeout), tap(() => this._setAutoPlayInterval())).subscribe(() => { });\n    }\n    /**\n     * Starts pausing\n     */\n    startPausing() {\n        if (this.carouselService.settings.autoplayHoverPause && this.carouselService.is('rotating')) {\n            this.pause();\n        }\n    }\n    /**\n     * Starts playing after mouse leaves carousel\n     */\n    startPlayingMouseLeave() {\n        if (this.carouselService.settings.autoplayHoverPause && this.carouselService.is('rotating')) {\n            this.play();\n            this._playAfterTranslated();\n        }\n    }\n    /**\n     * Starts playing after touch ends\n     */\n    startPlayingTouchEnd() {\n        if (this.carouselService.settings.autoplayHoverPause && this.carouselService.is('rotating')) {\n            this.play();\n            this._playAfterTranslated();\n        }\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoplayService, deps: [{ token: CarouselService }, { token: WINDOW }, { token: DOCUMENT }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoplayService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoplayService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [WINDOW]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.NgZone }] });\n\nclass LazyLoadService {\n    carouselService;\n    /**\n     * Subscrioption to merge Observable  from CarouselService\n     */\n    lazyLoadSubscription;\n    constructor(carouselService) {\n        this.carouselService = carouselService;\n        this.spyDataStreams();\n    }\n    ngOnDestroy() {\n        this.lazyLoadSubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(() => {\n            const isLazyLoad = this.carouselService.settings && !this.carouselService.settings.lazyLoad;\n            this.carouselService.slidesData.forEach(item => item.load = isLazyLoad ? true : false);\n        }));\n        const changeSettings$ = this.carouselService.getChangeState();\n        const resizedCarousel$ = this.carouselService.getResizedState();\n        const lazyLoadMerge$ = merge(initializedCarousel$, changeSettings$, resizedCarousel$).pipe(tap(data => this._defineLazyLoadSlides(data)));\n        this.lazyLoadSubscription = lazyLoadMerge$.subscribe(() => { });\n    }\n    _defineLazyLoadSlides(data) {\n        if (!this.carouselService.settings || !this.carouselService.settings.lazyLoad) {\n            return;\n        }\n        if ((data.property && data.property.name === 'position') || data === 'initialized' || data === \"resized\") {\n            const settings = this.carouselService.settings, clones = this.carouselService.clones().length;\n            let n = (settings.center && Math.ceil(settings.items / 2) || settings.items), i = ((settings.center && n * -1) || 0), position = (data.property && data.property.value !== undefined ? data.property.value : this.carouselService.current()) + i;\n            // load = $.proxy(function(i, v) { this.load(v) }, this);\n            //TODO: Need documentation for this new option\n            if (settings.lazyLoadEager > 0) {\n                n += settings.lazyLoadEager;\n                // If the carousel is looping also preload images that are to the \"left\"\n                if (settings.loop) {\n                    position -= settings.lazyLoadEager;\n                    n++;\n                }\n            }\n            while (i++ < n) {\n                this._load(clones / 2 + this.carouselService.relative(position));\n                if (clones) {\n                    this.carouselService.clones(this.carouselService.relative(position)).forEach(value => this._load(value));\n                }\n                position++;\n            }\n        }\n    }\n    /**\n       * Loads all resources of an item at the specified position.\n       * @param position - The absolute position of the item.\n       */\n    _load(position) {\n        if (this.carouselService.slidesData[position].load) {\n            return;\n        }\n        this.carouselService.slidesData[position].load = true;\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: LazyLoadService, deps: [{ token: CarouselService }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: LazyLoadService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: LazyLoadService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }] });\n\nclass AnimateService {\n    carouselService;\n    /**\n     * Subscrioption to merge Observable  from CarouselService\n     */\n    animateSubscription;\n    /**\n     * s\n     */\n    swapping = true;\n    /**\n     * active slide before translating\n     */\n    previous = undefined;\n    /**\n     * new active slide after translating\n     */\n    next = undefined;\n    constructor(carouselService) {\n        this.carouselService = carouselService;\n        this.spyDataStreams();\n    }\n    ngOnDestroy() {\n        this.animateSubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const changeSettings$ = this.carouselService.getChangeState().pipe(tap(data => {\n            if (data.property.name === 'position') {\n                this.previous = this.carouselService.current();\n                this.next = data.property.value;\n            }\n        }));\n        const dragCarousel$ = this.carouselService.getDragState();\n        const draggedCarousel$ = this.carouselService.getDraggedState();\n        const translatedCarousel$ = this.carouselService.getTranslatedState();\n        const dragTranslatedMerge$ = merge(dragCarousel$, draggedCarousel$, translatedCarousel$).pipe(tap(data => this.swapping = data === 'translated'));\n        const translateCarousel$ = this.carouselService.getTranslateState().pipe(tap(data => {\n            if (this.swapping && (this.carouselService._options.animateOut || this.carouselService._options.animateIn)) {\n                this._swap();\n            }\n        }));\n        const animateMerge$ = merge(changeSettings$, translateCarousel$, dragTranslatedMerge$).pipe();\n        this.animateSubscription = animateMerge$.subscribe(() => { });\n    }\n    /**\n       * Toggles the animation classes whenever an translations starts.\n       * @returns\n       */\n    _swap() {\n        if (this.carouselService.settings.items !== 1) {\n            return;\n        }\n        // if (!$.support.animation || !$.support.transition) {\n        // \treturn;\n        // }\n        this.carouselService.speed(0);\n        let left;\n        const previous = this.carouselService.slidesData[this.previous], next = this.carouselService.slidesData[this.next], incoming = this.carouselService.settings.animateIn, outgoing = this.carouselService.settings.animateOut;\n        if (this.carouselService.current() === this.previous) {\n            return;\n        }\n        if (outgoing) {\n            left = +this.carouselService.coordinates(this.previous) - +this.carouselService.coordinates(this.next);\n            this.carouselService.slidesData.forEach(slide => {\n                if (slide.id === previous.id) {\n                    slide.left = `${left}px`;\n                    slide.isAnimated = true;\n                    slide.isDefAnimatedOut = true;\n                    slide.isCustomAnimatedOut = true;\n                }\n            });\n        }\n        if (incoming) {\n            this.carouselService.slidesData.forEach(slide => {\n                if (slide.id === next.id) {\n                    slide.isAnimated = true;\n                    slide.isDefAnimatedIn = true;\n                    slide.isCustomAnimatedIn = true;\n                }\n            });\n        }\n    }\n    ;\n    /**\n     * Handles the end of 'animationend' event\n     * @param id Id of slides\n     */\n    clear(id) {\n        this.carouselService.slidesData.forEach(slide => {\n            if (slide.id === id) {\n                slide.left = '';\n                slide.isAnimated = false;\n                slide.isDefAnimatedOut = false;\n                slide.isCustomAnimatedOut = false;\n                slide.isDefAnimatedIn = false;\n                slide.isCustomAnimatedIn = false;\n                slide.classes = this.carouselService.setCurSlideClasses(slide);\n            }\n        });\n        this.carouselService.onTransitionEnd();\n    }\n    ;\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AnimateService, deps: [{ token: CarouselService }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AnimateService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AnimateService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }] });\n\nclass AutoHeightService {\n    carouselService;\n    /**\n     * Subscrioption to merge Observable  from CarouselService\n     */\n    autoHeightSubscription;\n    constructor(carouselService) {\n        this.carouselService = carouselService;\n        this.spyDataStreams();\n    }\n    ngOnDestroy() {\n        this.autoHeightSubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(data => {\n            if (this.carouselService.settings.autoHeight) {\n                this.update();\n            }\n            else {\n                this.carouselService.slidesData.forEach(slide => slide.heightState = 'full');\n            }\n        }));\n        const changedSettings$ = this.carouselService.getChangedState().pipe(tap(data => {\n            if (this.carouselService.settings.autoHeight && data.property.name === 'position') {\n                this.update();\n            }\n        }));\n        const refreshedCarousel$ = this.carouselService.getRefreshedState().pipe(tap(data => {\n            if (this.carouselService.settings.autoHeight) {\n                this.update();\n            }\n        }));\n        const autoHeight$ = merge(initializedCarousel$, changedSettings$, refreshedCarousel$);\n        this.autoHeightSubscription = autoHeight$.subscribe(() => { });\n    }\n    /**\n     * Updates the prop 'heightState' of slides\n     */\n    update() {\n        const items = this.carouselService.settings.items;\n        let start = this.carouselService.current(), end = start + items;\n        if (this.carouselService.settings.center) {\n            start = items % 2 === 1 ? start - (items - 1) / 2 : start - items / 2;\n            end = items % 2 === 1 ? start + items : start + items + 1;\n        }\n        this.carouselService.slidesData.forEach((slide, i) => {\n            slide.heightState = (i >= start && i < end) ? 'full' : 'nulled';\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoHeightService, deps: [{ token: CarouselService }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoHeightService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: AutoHeightService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }] });\n\nclass HashService {\n    carouselService;\n    route;\n    router;\n    /**\n     * Subscription to merge Observable from CarouselService\n     */\n    hashSubscription;\n    /**\n     * Current url fragment (hash)\n     */\n    currentHashFragment;\n    constructor(carouselService, route, router) {\n        this.carouselService = carouselService;\n        this.route = route;\n        this.router = router;\n        this.spyDataStreams();\n        if (!this.route) {\n            this.route = {\n                fragment: of('no route').pipe(take(1))\n            };\n        }\n        ;\n        if (!this.router) {\n            this.router = {\n                navigate: (commands, extras) => { return; }\n            };\n        }\n    }\n    ngOnDestroy() {\n        this.hashSubscription.unsubscribe();\n    }\n    /**\n     * Defines Observables which service must observe\n     */\n    spyDataStreams() {\n        const initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(() => this.listenToRoute()));\n        const changedSettings$ = this.carouselService.getChangedState().pipe(tap(data => {\n            if (this.carouselService.settings.URLhashListener && data.property.name === 'position') {\n                const newCurSlide = this.carouselService.current();\n                const newCurFragment = this.carouselService.slidesData[newCurSlide].hashFragment;\n                if (!newCurFragment || newCurFragment === this.currentHashFragment) {\n                    return;\n                }\n                this.router.navigate(['./'], { fragment: newCurFragment, relativeTo: this.route });\n            }\n        }));\n        const hashFragment$ = merge(initializedCarousel$, changedSettings$);\n        this.hashSubscription = hashFragment$.subscribe(() => { });\n    }\n    /**\n     * rewinds carousel to slide which has the same hashFragment as fragment of current url\n     * @param fragment fragment of url\n     */\n    rewind(fragment) {\n        const position = this.carouselService.slidesData.findIndex(slide => slide.hashFragment === fragment && slide.isCloned === false);\n        if (position === -1 || position === this.carouselService.current()) {\n            return;\n        }\n        this.carouselService.to(this.carouselService.relative(position), false);\n    }\n    /**\n     * Initiate listening to ActivatedRoute.fragment\n     */\n    listenToRoute() {\n        const count = this.carouselService.settings.startPosition === 'URLHash' ? 0 : 2;\n        this.route.fragment.pipe(skip(count))\n            .subscribe(fragment => {\n            this.currentHashFragment = fragment;\n            this.rewind(fragment);\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: HashService, deps: [{ token: CarouselService }, { token: i1.ActivatedRoute, optional: true }, { token: i1.Router, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: HashService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: HashService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: CarouselService }, { type: i1.ActivatedRoute, decorators: [{\n                    type: Optional\n                }] }, { type: i1.Router, decorators: [{\n                    type: Optional\n                }] }] });\n\nlet nextId = 0;\nclass CarouselSlideDirective {\n    tplRef;\n    /**\n     * Unique slide identifier. Must be unique for the entire document for proper accessibility support.\n     * Will be auto-generated if not provided.\n     */\n    id = `owl-slide-${nextId++}`;\n    /**\n     * Defines how much widths of common slide will current slide have\n     * e.g. if _mergeData=2, the slide will twice wider then slides with _mergeData=1\n     */\n    _dataMerge = 1;\n    set dataMerge(data) {\n        this._dataMerge = this.isNumeric(data) ? data : 1;\n    }\n    ;\n    get dataMerge() { return this._dataMerge; }\n    /**\n     * Width of slide\n     */\n    width = 0;\n    /**\n     * Inner content of dot for certain slide; can be html-markup\n     */\n    dotContent = '';\n    /**\n     * Hash (fragment) of url which corresponds to certain slide\n     */\n    dataHash = '';\n    constructor(tplRef) {\n        this.tplRef = tplRef;\n    }\n    /**\n       * Determines if the input is a Number or something that can be coerced to a Number\n       * @param - The input to be tested\n       * @returns - An indication if the input is a Number or can be coerced to a Number\n       */\n    isNumeric(number) {\n        return !isNaN(parseFloat(number));\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselSlideDirective, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\n    static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"17.0.2\", type: CarouselSlideDirective, selector: \"ng-template[carouselSlide]\", inputs: { id: \"id\", dataMerge: \"dataMerge\", width: \"width\", dotContent: \"dotContent\", dataHash: \"dataHash\" }, ngImport: i0 });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselSlideDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: 'ng-template[carouselSlide]' }]\n        }], ctorParameters: () => [{ type: i0.TemplateRef }], propDecorators: { id: [{\n                type: Input\n            }], dataMerge: [{\n                type: Input\n            }], width: [{\n                type: Input\n            }], dotContent: [{\n                type: Input\n            }], dataHash: [{\n                type: Input\n            }] } });\n\nclass ResizeService {\n    resizeObservable$;\n    /**\n     * Makes resizeSubject become Observable\n     * @returns Observable of resizeSubject\n     */\n    get onResize$() {\n        return this.resizeObservable$;\n    }\n    constructor(winRef, platformId) {\n        this.resizeObservable$ = isPlatformBrowser(platformId) ? fromEvent(winRef, 'resize') : (new Subject()).asObservable();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: ResizeService, deps: [{ token: WINDOW }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: ResizeService });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: ResizeService, decorators: [{\n            type: Injectable\n        }], ctorParameters: () => [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [WINDOW]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }] });\n\nclass StageComponent {\n    zone;\n    el;\n    renderer;\n    carouselService;\n    animateService;\n    /**\n     * Object with settings which make carousel draggable by touch or mouse\n     */\n    owlDraggable;\n    /**\n     * Data of owl-stage\n     */\n    stageData;\n    /**\n     *  Data of every slide\n     */\n    slidesData;\n    /**\n     * Function wich will be returned after attaching listener to 'mousemove' event\n     */\n    listenerMouseMove;\n    /**\n     * Function wich will be returned after attaching listener to 'touchmove' event\n     */\n    listenerTouchMove;\n    /**\n     * Function wich will be returned after attaching listener to 'mousemove' event\n     */\n    listenerOneMouseMove;\n    /**\n     * Function wich will be returned after attaching listener to 'touchmove' event\n     */\n    listenerOneTouchMove;\n    /**\n     * Function wich will be returned after attaching listener to 'mouseup' event\n     */\n    listenerMouseUp;\n    /**\n     * Function wich will be returned after attaching listener to 'touchend' event\n     */\n    listenerTouchEnd;\n    /**\n     * Function wich will be returned after attaching listener to 'click' event\n     */\n    listenerOneClick;\n    listenerATag;\n    /**\n     * Object with data needed for dragging\n     */\n    _drag = {\n        time: null,\n        target: null,\n        pointer: null,\n        stage: {\n            start: null,\n            current: null\n        },\n        direction: null,\n        active: false,\n        moving: false\n    };\n    /**\n     * Subject for notification when the carousel's rebuilding caused by resize event starts\n     */\n    _oneDragMove$ = new Subject();\n    /**\n     * Subsctiption to _oneDragMove$ Subject\n     */\n    _oneMoveSubsription;\n    preparePublicSlide = (slide) => {\n        const newSlide = { ...slide };\n        delete newSlide.tplRef;\n        return newSlide;\n    };\n    constructor(zone, el, renderer, carouselService, animateService) {\n        this.zone = zone;\n        this.el = el;\n        this.renderer = renderer;\n        this.carouselService = carouselService;\n        this.animateService = animateService;\n    }\n    onMouseDown(event) {\n        if (this.owlDraggable.isMouseDragable) {\n            this._onDragStart(event);\n        }\n    }\n    onTouchStart(event) {\n        if (event.targetTouches.length >= 2) {\n            return false;\n        }\n        if (this.owlDraggable.isTouchDragable) {\n            this._onDragStart(event);\n        }\n    }\n    onTouchCancel(event) {\n        this._onDragEnd(event);\n    }\n    onDragStart() {\n        if (this.owlDraggable.isMouseDragable) {\n            return false;\n        }\n    }\n    onSelectStart() {\n        if (this.owlDraggable.isMouseDragable) {\n            return false;\n        }\n    }\n    ngOnInit() {\n        this._oneMoveSubsription = this._oneDragMove$\n            .pipe(first())\n            .subscribe(() => {\n            this._sendChanges();\n        });\n    }\n    ngOnDestroy() {\n        this._oneMoveSubsription.unsubscribe();\n    }\n    /**\n     * Passes this to _oneMouseTouchMove();\n     */\n    bindOneMouseTouchMove = (ev) => {\n        this._oneMouseTouchMove(ev);\n    };\n    /**\n     * Passes this to _onDragMove();\n     */\n    bindOnDragMove = (ev) => {\n        this._onDragMove(ev);\n    };\n    /**\n     * Passes this to _onDragMove();\n     */\n    bindOnDragEnd = (ev) => {\n        // this.zone.run(() => {\n        this._onDragEnd(ev);\n        // });\n    };\n    /**\n       * Handles `touchstart` and `mousedown` events.\n       * @todo Horizontal swipe threshold as option\n       * @todo #261\n       * @param event - The event arguments.\n       */\n    _onDragStart(event) {\n        let stage = null;\n        if (event.which === 3) {\n            return;\n        }\n        stage = this._prepareDragging(event);\n        this._drag.time = new Date().getTime();\n        this._drag.target = event.target;\n        this._drag.stage.start = stage;\n        this._drag.stage.current = stage;\n        this._drag.pointer = this._pointer(event);\n        this.listenerMouseUp = this.renderer.listen(document, 'mouseup', this.bindOnDragEnd);\n        this.listenerTouchEnd = this.renderer.listen(document, 'touchend', this.bindOnDragEnd);\n        this.zone.runOutsideAngular(() => {\n            this.listenerOneMouseMove = this.renderer.listen(document, 'mousemove', this.bindOneMouseTouchMove);\n            this.listenerOneTouchMove = this.renderer.listen(document, 'touchmove', this.bindOneMouseTouchMove);\n        });\n    }\n    /**\n     * Attaches listeners to `touchmove` and `mousemove` events; initiates updating carousel after starting dragging\n     * @param event event objech of mouse or touch event\n     */\n    _oneMouseTouchMove(event) {\n        const delta = this._difference(this._drag.pointer, this._pointer(event));\n        if (this.listenerATag) {\n            this.listenerATag();\n        }\n        if (Math.abs(delta.x) < 3 && Math.abs(delta.y) < 3 && this._is('valid')) {\n            return;\n        }\n        if ((Math.abs(delta.x) < 3 && Math.abs(delta.x) < Math.abs(delta.y)) && this._is('valid')) {\n            return;\n        }\n        this.listenerOneMouseMove();\n        this.listenerOneTouchMove();\n        this._drag.moving = true;\n        this.blockClickAnchorInDragging(event);\n        this.listenerMouseMove = this.renderer.listen(document, 'mousemove', this.bindOnDragMove);\n        this.listenerTouchMove = this.renderer.listen(document, 'touchmove', this.bindOnDragMove);\n        event.preventDefault();\n        this._enterDragging();\n        this._oneDragMove$.next(event);\n        // this._sendChanges();\n    }\n    /**\n     * Attaches handler to HTMLAnchorElement for preventing click while carousel is being dragged\n     * @param event event object\n     */\n    blockClickAnchorInDragging(event) {\n        let target = event.target;\n        while (target && !(target instanceof HTMLAnchorElement)) {\n            target = target.parentElement;\n        }\n        if (target instanceof HTMLAnchorElement) {\n            this.listenerATag = this.renderer.listen(target, 'click', () => false);\n        }\n    }\n    /**\n     * Handles the `touchmove` and `mousemove` events.\n     * @todo #261\n     * @param event - The event arguments.\n     */\n    _onDragMove(event) {\n        let stage;\n        const stageOrExit = this.carouselService.defineNewCoordsDrag(event, this._drag);\n        if (stageOrExit === false) {\n            return;\n        }\n        stage = stageOrExit;\n        event.preventDefault();\n        this._drag.stage.current = stage;\n        this._animate(stage.x - this._drag.stage.start.x);\n    }\n    ;\n    /**\n     * Moves .owl-stage left-right\n     * @param coordinate coordinate to be set to .owl-stage\n     */\n    _animate(coordinate) {\n        this.renderer.setStyle(this.el.nativeElement.children[0], 'transform', `translate3d(${coordinate}px,0px,0px`);\n        this.renderer.setStyle(this.el.nativeElement.children[0], 'transition', '0s');\n    }\n    /**\n       * Handles the `touchend` and `mouseup` events.\n       * @todo #261\n       * @todo Threshold for click event\n       * @param event - The event arguments.\n       */\n    _onDragEnd(event) {\n        this.carouselService.owlDOMData.isGrab = false;\n        this.listenerOneMouseMove();\n        this.listenerOneTouchMove();\n        if (this._drag.moving) {\n            this.renderer.setStyle(this.el.nativeElement.children[0], 'transform', ``);\n            this.renderer.setStyle(this.el.nativeElement.children[0], 'transition', this.carouselService.speed(+this.carouselService.settings.dragEndSpeed || this.carouselService.settings.smartSpeed) / 1000 + 's');\n            this._finishDragging(event);\n            this.listenerMouseMove();\n            this.listenerTouchMove();\n        }\n        this._drag = {\n            time: null,\n            target: null,\n            pointer: null,\n            stage: {\n                start: null,\n                current: null\n            },\n            direction: null,\n            active: false,\n            moving: false\n        };\n        // this.carouselService.trigger('dragged');\n        this.listenerMouseUp();\n        this.listenerTouchEnd();\n    }\n    ;\n    /**\n       * Prepares data for dragging carousel. It starts after firing `touchstart` and `mousedown` events.\n       * @param event - The event arguments.\n       * @returns stage - object with 'x' and 'y' coordinates of .owl-stage\n       */\n    _prepareDragging(event) {\n        return this.carouselService.prepareDragging(event);\n    }\n    /**\n     * Attaches handler for 'click' event on any element in .owl-stage in order to prevent dragging when moving of cursor is less than 3px\n     */\n    _oneClickHandler = () => {\n        this.listenerOneClick = this.renderer.listen(this._drag.target, 'click', () => false);\n        this.listenerOneClick();\n    };\n    /**\n     * Finishes dragging\n     * @param event object event of 'mouseUp' of 'touchend' events\n     */\n    _finishDragging(event) {\n        this.carouselService.finishDragging(event, this._drag, this._oneClickHandler);\n    }\n    /**\n       * Gets unified pointer coordinates from event.\n       * @param event The `mousedown` or `touchstart` event.\n       * @returns Contains `x` and `y` coordinates of current pointer position.\n       */\n    _pointer(event) {\n        return this.carouselService.pointer(event);\n    }\n    /**\n       * Gets the difference of two vectors.\n       * @param first The first vector.\n       * @param second The second vector.\n       * @returns The difference.\n       */\n    _difference(firstC, second) {\n        return this.carouselService.difference(firstC, second);\n    }\n    /**\n       * Checks whether the carousel is in a specific state or not.\n       * @param specificState The state to check.\n       * @returns The flag which indicates if the carousel is busy.\n       */\n    _is(specificState) {\n        return this.carouselService.is(specificState);\n    }\n    /**\n    * Enters a state.\n    * @param name The state name.\n    */\n    _enter(name) {\n        this.carouselService.enter(name);\n    }\n    /**\n       * Sends all data needed for View.\n       */\n    _sendChanges() {\n        this.carouselService.sendChanges();\n    }\n    /**\n     * Handler for transitioend event\n     */\n    onTransitionEnd() {\n        this.carouselService.onTransitionEnd();\n    }\n    /**\n       * Enters into a 'dragging' state\n       */\n    _enterDragging() {\n        this.carouselService.enterDragging();\n    }\n    /**\n     * Handles the end of 'animationend' event\n     * @param id Id of slides\n     */\n    clear(id) {\n        this.animateService.clear(id);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: StageComponent, deps: [{ token: i0.NgZone }, { token: i0.ElementRef }, { token: i0.Renderer2 }, { token: CarouselService }, { token: AnimateService }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"17.0.2\", type: StageComponent, selector: \"owl-stage\", inputs: { owlDraggable: \"owlDraggable\", stageData: \"stageData\", slidesData: \"slidesData\" }, host: { listeners: { \"mousedown\": \"onMouseDown($event)\", \"touchstart\": \"onTouchStart($event)\", \"touchcancel\": \"onTouchCancel($event)\", \"dragstart\": \"onDragStart()\", \"selectstart\": \"onSelectStart()\" } }, ngImport: i0, template: `\n    <div>\n      <div class=\"owl-stage\" [ngStyle]=\"{'width': stageData.width + 'px',\n                                        'transform': stageData.transform,\n                                        'transition': stageData.transition,\n                                        'padding-left': stageData.paddingL ? stageData.paddingL + 'px' : '',\n                                        'padding-right': stageData.paddingR ? stageData.paddingR + 'px' : '' }\"\n          (transitionend)=\"onTransitionEnd()\">\n        <ng-container *ngFor=\"let slide of slidesData; let i = index\">\n          <div class=\"owl-item\" [ngClass]=\"slide.classes\"\n                                [ngStyle]=\"{'width': slide.width + 'px',\n                                            'margin-left': slide.marginL ? slide.marginL + 'px' : '',\n                                            'margin-right': slide.marginR ? slide.marginR + 'px' : '',\n                                            'left': slide.left}\"\n                                (animationend)=\"clear(slide.id)\"\n                                [@autoHeight]=\"slide.heightState\">\n            <ng-template *ngIf=\"slide.load\" [ngTemplateOutlet]=\"slide.tplRef\" [ngTemplateOutletContext]=\"{ $implicit: preparePublicSlide(slide), index: i }\"></ng-template>\n          </div><!-- /.owl-item -->\n        </ng-container>\n      </div><!-- /.owl-stage -->\n    </div>\n  `, isInline: true, dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: i3.NgTemplateOutlet, selector: \"[ngTemplateOutlet]\", inputs: [\"ngTemplateOutletContext\", \"ngTemplateOutlet\", \"ngTemplateOutletInjector\"] }, { kind: \"directive\", type: i3.NgStyle, selector: \"[ngStyle]\", inputs: [\"ngStyle\"] }], animations: [\n            trigger('autoHeight', [\n                state('nulled', style({ height: 0 })),\n                state('full', style({ height: '*' })),\n                transition('full => nulled', [\n                    // style({height: '*'}),\n                    animate('700ms 350ms')\n                ]),\n                transition('nulled => full', [\n                    // style({height: 0}),\n                    animate(350)\n                ]),\n            ])\n        ] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: StageComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'owl-stage',\n                    template: `\n    <div>\n      <div class=\"owl-stage\" [ngStyle]=\"{'width': stageData.width + 'px',\n                                        'transform': stageData.transform,\n                                        'transition': stageData.transition,\n                                        'padding-left': stageData.paddingL ? stageData.paddingL + 'px' : '',\n                                        'padding-right': stageData.paddingR ? stageData.paddingR + 'px' : '' }\"\n          (transitionend)=\"onTransitionEnd()\">\n        <ng-container *ngFor=\"let slide of slidesData; let i = index\">\n          <div class=\"owl-item\" [ngClass]=\"slide.classes\"\n                                [ngStyle]=\"{'width': slide.width + 'px',\n                                            'margin-left': slide.marginL ? slide.marginL + 'px' : '',\n                                            'margin-right': slide.marginR ? slide.marginR + 'px' : '',\n                                            'left': slide.left}\"\n                                (animationend)=\"clear(slide.id)\"\n                                [@autoHeight]=\"slide.heightState\">\n            <ng-template *ngIf=\"slide.load\" [ngTemplateOutlet]=\"slide.tplRef\" [ngTemplateOutletContext]=\"{ $implicit: preparePublicSlide(slide), index: i }\"></ng-template>\n          </div><!-- /.owl-item -->\n        </ng-container>\n      </div><!-- /.owl-stage -->\n    </div>\n  `,\n                    animations: [\n                        trigger('autoHeight', [\n                            state('nulled', style({ height: 0 })),\n                            state('full', style({ height: '*' })),\n                            transition('full => nulled', [\n                                // style({height: '*'}),\n                                animate('700ms 350ms')\n                            ]),\n                            transition('nulled => full', [\n                                // style({height: 0}),\n                                animate(350)\n                            ]),\n                        ])\n                    ]\n                }]\n        }], ctorParameters: () => [{ type: i0.NgZone }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: CarouselService }, { type: AnimateService }], propDecorators: { owlDraggable: [{\n                type: Input\n            }], stageData: [{\n                type: Input\n            }], slidesData: [{\n                type: Input\n            }], onMouseDown: [{\n                type: HostListener,\n                args: ['mousedown', ['$event']]\n            }], onTouchStart: [{\n                type: HostListener,\n                args: ['touchstart', ['$event']]\n            }], onTouchCancel: [{\n                type: HostListener,\n                args: ['touchcancel', ['$event']]\n            }], onDragStart: [{\n                type: HostListener,\n                args: ['dragstart']\n            }], onSelectStart: [{\n                type: HostListener,\n                args: ['selectstart']\n            }] } });\n\nclass CarouselComponent {\n    el;\n    resizeService;\n    carouselService;\n    navigationService;\n    autoplayService;\n    lazyLoadService;\n    animateService;\n    autoHeightService;\n    hashService;\n    logger;\n    changeDetectorRef;\n    slides;\n    translated = new EventEmitter();\n    dragging = new EventEmitter();\n    change = new EventEmitter();\n    changed = new EventEmitter();\n    initialized = new EventEmitter();\n    /**\n     * Width of carousel window (tag with class .owl-carousel), in wich we can see moving sliders\n     */\n    carouselWindowWidth;\n    /**\n     * Subscription to 'resize' event\n     */\n    resizeSubscription;\n    /**\n     * Subscription merge Observable, which merges all Observables in the component except 'resize' Observable and this.slides.changes()\n     */\n    _allObservSubscription;\n    /**\n     * Subscription to `this.slides.changes().\n     * It could be included in 'this._allObservSubscription', but that subcription get created during the initializing of component\n     * and 'this.slides' are undefined at that moment. So it's needed to wait for initialization of content.\n     */\n    _slidesChangesSubscription;\n    /**\n     * Current settings for the carousel.\n     */\n    owlDOMData;\n    /**\n     * Data of owl-stage\n     */\n    stageData;\n    /**\n     *  Data of every slide\n     */\n    slidesData = [];\n    /**\n     * Data of navigation block\n     */\n    navData;\n    /**\n     * Data of dots block\n     */\n    dotsData;\n    /**\n     * Data, wich are passed out of carousel after ending of transioning of carousel\n     */\n    slidesOutputData;\n    /**\n     * Shows whether carousel is loaded of not.\n     */\n    carouselLoaded = false;\n    /**\n     * User's options\n     */\n    options;\n    prevOptions;\n    /**\n     * Observable for getting current View Settings\n     */\n    _viewCurSettings$;\n    /**\n     * Observable for catching the end of transition of carousel\n     */\n    _translatedCarousel$;\n    /**\n     * Observable for catching the start of dragging of the carousel\n     */\n    _draggingCarousel$;\n    /**\n     * Observable for catching the start of changing of the carousel\n     */\n    _changeCarousel$;\n    /**\n     * Observable for catching the moment when the data about slides changed, more exactly when the position changed.\n     */\n    _changedCarousel$;\n    /**\n     * Observable for catching the initialization of changing the carousel\n     */\n    _initializedCarousel$;\n    /**\n     * Observable for merging all Observables and creating one subscription\n     */\n    _carouselMerge$;\n    docRef;\n    constructor(el, resizeService, carouselService, navigationService, autoplayService, lazyLoadService, animateService, autoHeightService, hashService, logger, changeDetectorRef, docRef) {\n        this.el = el;\n        this.resizeService = resizeService;\n        this.carouselService = carouselService;\n        this.navigationService = navigationService;\n        this.autoplayService = autoplayService;\n        this.lazyLoadService = lazyLoadService;\n        this.animateService = animateService;\n        this.autoHeightService = autoHeightService;\n        this.hashService = hashService;\n        this.logger = logger;\n        this.changeDetectorRef = changeDetectorRef;\n        this.docRef = docRef;\n    }\n    onVisibilityChange(ev) {\n        if (!this.carouselService.settings.autoplay)\n            return;\n        switch (this.docRef.visibilityState) {\n            case 'visible':\n                !this.autoplayService.isAutoplayStopped && this.autoplayService.play();\n                break;\n            case 'hidden':\n                this.autoplayService.pause();\n                break;\n            default:\n                break;\n        }\n    }\n    ;\n    ngOnInit() {\n        this.spyDataStreams();\n        this.carouselWindowWidth = this.el.nativeElement.querySelector('.owl-carousel').clientWidth;\n    }\n    ngOnChanges() {\n        if (this.prevOptions !== this.options) {\n            if (this.prevOptions && this.slides?.toArray().length) {\n                this.carouselService.setup(this.carouselWindowWidth, this.slides.toArray(), this.options);\n                this.carouselService.initialize(this.slides.toArray());\n            }\n            else if (this.prevOptions && !this.slides?.toArray().length) {\n                this.carouselLoaded = false;\n                this.logger.log(`There are no slides to show. So the carousel won't be re-rendered`);\n            }\n            else {\n                this.carouselLoaded = false;\n            }\n            this.prevOptions = this.options;\n        }\n    }\n    ngAfterContentInit() {\n        if (this.slides.toArray().length) {\n            this.carouselService.setup(this.carouselWindowWidth, this.slides.toArray(), this.options);\n            this.carouselService.initialize(this.slides.toArray());\n            this._winResizeWatcher();\n        }\n        else {\n            this.logger.log(`There are no slides to show. So the carousel won't be rendered`);\n        }\n        this._slidesChangesSubscription = this.slides.changes.pipe(tap((slides) => {\n            this.carouselService.setup(this.carouselWindowWidth, slides.toArray(), this.options);\n            this.carouselService.initialize(slides.toArray());\n            if (!slides.toArray().length) {\n                this.carouselLoaded = false;\n            }\n            if (slides.toArray().length && !this.resizeSubscription) {\n                this._winResizeWatcher();\n            }\n        })).subscribe(() => { });\n    }\n    ngOnDestroy() {\n        if (this.resizeSubscription) {\n            this.resizeSubscription.unsubscribe();\n        }\n        if (this._slidesChangesSubscription) {\n            this._slidesChangesSubscription.unsubscribe();\n        }\n        if (this._allObservSubscription) {\n            this._allObservSubscription.unsubscribe();\n        }\n    }\n    /**\n     * Joins the observable login in one place: sets values to some observables, merges this observables and\n     * subcribes to merge func\n     */\n    spyDataStreams() {\n        this._viewCurSettings$ = this.carouselService.getViewCurSettings().pipe(tap(data => {\n            this.owlDOMData = data.owlDOMData;\n            this.stageData = data.stageData;\n            this.slidesData = data.slidesData;\n            if (!this.carouselLoaded) {\n                this.carouselLoaded = true;\n            }\n            this.navData = data.navData;\n            this.dotsData = data.dotsData;\n            this.changeDetectorRef.markForCheck();\n        }));\n        this._initializedCarousel$ = this.carouselService.getInitializedState().pipe(tap(() => {\n            this.gatherTranslatedData();\n            this.initialized.emit(this.slidesOutputData);\n            // this.slidesOutputData = {};\n        }));\n        this._translatedCarousel$ = this.carouselService.getTranslatedState().pipe(tap(() => {\n            this.gatherTranslatedData();\n            this.translated.emit(this.slidesOutputData);\n            // this.slidesOutputData = {};\n        }));\n        this._changeCarousel$ = this.carouselService.getChangeState().pipe(tap(() => {\n            this.gatherTranslatedData();\n            this.change.emit(this.slidesOutputData);\n            // this.slidesOutputData = {};\n        }));\n        this._changedCarousel$ = this.carouselService.getChangeState().pipe(switchMap(value => {\n            const changedPosition = of(value).pipe(filter(() => value.property.name === 'position'), switchMap(() => from(this.slidesData)), skip(value.property.value), take(this.carouselService.settings.items), map(slide => {\n                const clonedIdPrefix = this.carouselService.clonedIdPrefix;\n                const id = slide.id.indexOf(clonedIdPrefix) >= 0 ? slide.id.slice(clonedIdPrefix.length) : slide.id;\n                return { ...slide, id: id, isActive: true };\n            }), toArray(), map(slides => {\n                return {\n                    slides: slides,\n                    startPosition: this.carouselService.relative(value.property.value)\n                };\n            }));\n            // const changedSetting: Observable<SlidesOutputData> = of(value).pipe(\n            //   filter(() => value.property.name === 'settings'),\n            //   map(() => {\n            //     return {\n            //       slides: [],\n            //       startPosition: this.carouselService.relative(value.property.value)\n            //     }\n            //   })\n            // )\n            return merge(changedPosition);\n        }), tap(slidesData => {\n            this.gatherTranslatedData();\n            this.changed.emit(slidesData.slides.length ? slidesData : this.slidesOutputData);\n            // console.log(this.slidesOutputData);\n            // this.slidesOutputData = {};\n        }));\n        this._draggingCarousel$ = this.carouselService.getDragState().pipe(tap(() => {\n            this.gatherTranslatedData();\n            this.dragging.emit({ dragging: true, data: this.slidesOutputData });\n        }), switchMap(() => this.carouselService.getDraggedState().pipe(map(() => !!this.carouselService.is('animating')))), switchMap(anim => {\n            if (anim) {\n                return this.carouselService.getTranslatedState().pipe(first());\n            }\n            else {\n                return of('not animating');\n            }\n        }), tap(() => {\n            this.dragging.emit({ dragging: false, data: this.slidesOutputData });\n        }));\n        this._carouselMerge$ = merge(this._viewCurSettings$, this._translatedCarousel$, this._draggingCarousel$, this._changeCarousel$, this._changedCarousel$, this._initializedCarousel$);\n        this._allObservSubscription = this._carouselMerge$.subscribe(() => { });\n    }\n    /**\n     * Init subscription to resize event and attaches handler for this event\n     */\n    _winResizeWatcher() {\n        if (Object.keys(this.carouselService._options.responsive).length) {\n            this.resizeSubscription = this.resizeService.onResize$\n                .pipe(filter(() => this.carouselWindowWidth !== this.el.nativeElement.querySelector('.owl-carousel').clientWidth), delay(this.carouselService.settings.responsiveRefreshRate))\n                .subscribe(() => {\n                this.carouselService.onResize(this.el.nativeElement.querySelector('.owl-carousel').clientWidth);\n                this.carouselWindowWidth = this.el.nativeElement.querySelector('.owl-carousel').clientWidth;\n            });\n        }\n    }\n    /**\n     * Handler for transitioend event\n     */\n    onTransitionEnd() {\n        this.carouselService.onTransitionEnd();\n    }\n    /**\n     * Handler for click event, attached to next button\n     */\n    next() {\n        if (!this.carouselLoaded)\n            return;\n        this.navigationService.next(this.carouselService.settings.navSpeed);\n    }\n    /**\n     * Handler for click event, attached to prev button\n     */\n    prev() {\n        if (!this.carouselLoaded)\n            return;\n        this.navigationService.prev(this.carouselService.settings.navSpeed);\n    }\n    /**\n     * Handler for click event, attached to dots\n     */\n    moveByDot(dotId) {\n        if (!this.carouselLoaded)\n            return;\n        this.navigationService.moveByDot(dotId);\n    }\n    /**\n     * rewinds carousel to slide with needed id\n     * @param id fragment of url\n     */\n    to(id) {\n        // if (!this.carouselLoaded || ((this.navData && this.navData.disabled) && (this.dotsData && this.dotsData.disabled))) return;\n        if (!this.carouselLoaded)\n            return;\n        this.navigationService.toSlideById(id);\n    }\n    /**\n     * Gathers and prepares data intended for passing to the user by means of firing event translatedCarousel\n     */\n    gatherTranslatedData() {\n        let startPosition;\n        const clonedIdPrefix = this.carouselService.clonedIdPrefix;\n        const activeSlides = this.slidesData\n            .filter(slide => slide.isActive === true)\n            .map(slide => {\n            const id = slide.id.indexOf(clonedIdPrefix) >= 0 ? slide.id.slice(clonedIdPrefix.length) : slide.id;\n            return {\n                id: id,\n                width: slide.width,\n                marginL: slide.marginL,\n                marginR: slide.marginR,\n                center: slide.isCentered\n            };\n        });\n        startPosition = this.carouselService.relative(this.carouselService.current());\n        this.slidesOutputData = {\n            startPosition: startPosition,\n            slides: activeSlides\n        };\n    }\n    /**\n     * Starts pausing\n     */\n    startPausing() {\n        this.autoplayService.startPausing();\n    }\n    /**\n     * Starts playing after mouse leaves carousel\n     */\n    startPlayML() {\n        this.autoplayService.startPlayingMouseLeave();\n    }\n    /**\n     * Starts playing after touch ends\n     */\n    startPlayTE() {\n        this.autoplayService.startPlayingTouchEnd();\n    }\n    stopAutoplay() {\n        this.autoplayService.isAutoplayStopped = true;\n        this.autoplayService.stop();\n    }\n    startAutoplay() {\n        this.autoplayService.isAutoplayStopped = false;\n        this.autoplayService.play();\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselComponent, deps: [{ token: i0.ElementRef }, { token: ResizeService }, { token: CarouselService }, { token: NavigationService }, { token: AutoplayService }, { token: LazyLoadService }, { token: AnimateService }, { token: AutoHeightService }, { token: HashService }, { token: OwlLogger }, { token: i0.ChangeDetectorRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });\n    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"17.0.2\", type: CarouselComponent, selector: \"owl-carousel-o\", inputs: { options: \"options\" }, outputs: { translated: \"translated\", dragging: \"dragging\", change: \"change\", changed: \"changed\", initialized: \"initialized\" }, host: { listeners: { \"document:visibilitychange\": \"onVisibilityChange($event)\" } }, providers: [\n            NavigationService,\n            AutoplayService,\n            CarouselService,\n            LazyLoadService,\n            AnimateService,\n            AutoHeightService,\n            HashService\n        ], queries: [{ propertyName: \"slides\", predicate: CarouselSlideDirective }], usesOnChanges: true, ngImport: i0, template: `\n    <div class=\"owl-carousel owl-theme\" #owlCarousel\n      [ngClass]=\"{'owl-rtl': owlDOMData?.rtl,\n                  'owl-loaded': owlDOMData?.isLoaded,\n                  'owl-responsive': owlDOMData?.isResponsive,\n                  'owl-drag': owlDOMData?.isMouseDragable,\n                  'owl-grab': owlDOMData?.isGrab}\"\n      (mouseover)=\"startPausing()\"\n      (mouseleave)=\"startPlayML()\"\n      (touchstart)=\"startPausing()\"\n      (touchend)=\"startPlayTE()\">\n\n      <div *ngIf=\"carouselLoaded\" class=\"owl-stage-outer\">\n        <owl-stage [owlDraggable]=\"{'isMouseDragable': owlDOMData?.isMouseDragable, 'isTouchDragable': owlDOMData?.isTouchDragable}\"\n                    [stageData]=\"stageData\"\n                    [slidesData]=\"slidesData\"></owl-stage>\n      </div> <!-- /.owl-stage-outer -->\n      <ng-container *ngIf=\"slides.toArray().length\">\n        <div class=\"owl-nav\" [ngClass]=\"{'disabled': navData?.disabled}\">\n          <div class=\"owl-prev\" [ngClass]=\"{'disabled': navData?.prev?.disabled}\" (click)=\"prev()\" [innerHTML]=\"navData?.prev?.htmlText\"></div>\n          <div class=\"owl-next\" [ngClass]=\"{'disabled': navData?.next?.disabled}\" (click)=\"next()\" [innerHTML]=\"navData?.next?.htmlText\"></div>\n        </div> <!-- /.owl-nav -->\n        <div class=\"owl-dots\" [ngClass]=\"{'disabled': dotsData?.disabled}\">\n          <div *ngFor=\"let dot of dotsData?.dots\" class=\"owl-dot\" [ngClass]=\"{'active': dot.active, 'owl-dot-text': dot.showInnerContent}\" (click)=\"moveByDot(dot.id)\">\n            <span [innerHTML]=\"dot.innerContent\"></span>\n          </div>\n        </div> <!-- /.owl-dots -->\n      </ng-container>\n    </div> <!-- /.owl-carousel owl-loaded -->\n  `, isInline: true, styles: [\".owl-theme{display:block}\\n\"], dependencies: [{ kind: \"directive\", type: i3.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { kind: \"directive\", type: i3.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }, { kind: \"directive\", type: i3.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"component\", type: StageComponent, selector: \"owl-stage\", inputs: [\"owlDraggable\", \"stageData\", \"slidesData\"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselComponent, decorators: [{\n            type: Component,\n            args: [{ selector: 'owl-carousel-o', template: `\n    <div class=\"owl-carousel owl-theme\" #owlCarousel\n      [ngClass]=\"{'owl-rtl': owlDOMData?.rtl,\n                  'owl-loaded': owlDOMData?.isLoaded,\n                  'owl-responsive': owlDOMData?.isResponsive,\n                  'owl-drag': owlDOMData?.isMouseDragable,\n                  'owl-grab': owlDOMData?.isGrab}\"\n      (mouseover)=\"startPausing()\"\n      (mouseleave)=\"startPlayML()\"\n      (touchstart)=\"startPausing()\"\n      (touchend)=\"startPlayTE()\">\n\n      <div *ngIf=\"carouselLoaded\" class=\"owl-stage-outer\">\n        <owl-stage [owlDraggable]=\"{'isMouseDragable': owlDOMData?.isMouseDragable, 'isTouchDragable': owlDOMData?.isTouchDragable}\"\n                    [stageData]=\"stageData\"\n                    [slidesData]=\"slidesData\"></owl-stage>\n      </div> <!-- /.owl-stage-outer -->\n      <ng-container *ngIf=\"slides.toArray().length\">\n        <div class=\"owl-nav\" [ngClass]=\"{'disabled': navData?.disabled}\">\n          <div class=\"owl-prev\" [ngClass]=\"{'disabled': navData?.prev?.disabled}\" (click)=\"prev()\" [innerHTML]=\"navData?.prev?.htmlText\"></div>\n          <div class=\"owl-next\" [ngClass]=\"{'disabled': navData?.next?.disabled}\" (click)=\"next()\" [innerHTML]=\"navData?.next?.htmlText\"></div>\n        </div> <!-- /.owl-nav -->\n        <div class=\"owl-dots\" [ngClass]=\"{'disabled': dotsData?.disabled}\">\n          <div *ngFor=\"let dot of dotsData?.dots\" class=\"owl-dot\" [ngClass]=\"{'active': dot.active, 'owl-dot-text': dot.showInnerContent}\" (click)=\"moveByDot(dot.id)\">\n            <span [innerHTML]=\"dot.innerContent\"></span>\n          </div>\n        </div> <!-- /.owl-dots -->\n      </ng-container>\n    </div> <!-- /.owl-carousel owl-loaded -->\n  `, providers: [\n                        NavigationService,\n                        AutoplayService,\n                        CarouselService,\n                        LazyLoadService,\n                        AnimateService,\n                        AutoHeightService,\n                        HashService\n                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [\".owl-theme{display:block}\\n\"] }]\n        }], ctorParameters: () => [{ type: i0.ElementRef }, { type: ResizeService }, { type: CarouselService }, { type: NavigationService }, { type: AutoplayService }, { type: LazyLoadService }, { type: AnimateService }, { type: AutoHeightService }, { type: HashService }, { type: OwlLogger }, { type: i0.ChangeDetectorRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }], propDecorators: { slides: [{\n                type: ContentChildren,\n                args: [CarouselSlideDirective]\n            }], translated: [{\n                type: Output\n            }], dragging: [{\n                type: Output\n            }], change: [{\n                type: Output\n            }], changed: [{\n                type: Output\n            }], initialized: [{\n                type: Output\n            }], options: [{\n                type: Input\n            }], onVisibilityChange: [{\n                type: HostListener,\n                args: ['document:visibilitychange', ['$event']]\n            }] } });\n\nclass OwlRouterLinkDirective {\n    router;\n    route;\n    // TODO(issue/24571): remove '!'.\n    queryParams;\n    // TODO(issue/24571): remove '!'.\n    fragment;\n    // TODO(issue/24571): remove '!'.\n    queryParamsHandling;\n    // TODO(issue/24571): remove '!'.\n    preserveFragment;\n    // TODO(issue/24571): remove '!'.\n    skipLocationChange;\n    // TODO(issue/24571): remove '!'.\n    replaceUrl;\n    stopLink = false;\n    commands = [];\n    // TODO(issue/24571): remove '!'.\n    preserve;\n    constructor(router, route, tabIndex, renderer, el) {\n        this.router = router;\n        this.route = route;\n        if (tabIndex == null) {\n            renderer.setAttribute(el.nativeElement, 'tabindex', '0');\n        }\n    }\n    set owlRouterLink(commands) {\n        if (commands != null) {\n            this.commands = Array.isArray(commands) ? commands : [commands];\n        }\n        else {\n            this.commands = [];\n        }\n    }\n    /**\n     * @deprecated 4.0.0 use `queryParamsHandling` instead.\n     */\n    set preserveQueryParams(value) {\n        if (isDevMode() && console && console.warn) {\n            console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');\n        }\n        this.preserve = value;\n    }\n    onClick() {\n        const extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        if (this.stopLink) {\n            return false;\n        }\n        this.router.navigateByUrl(this.urlTree, extras);\n        return true;\n    }\n    get urlTree() {\n        return this.router.createUrlTree(this.commands, {\n            relativeTo: this.route,\n            queryParams: this.queryParams,\n            fragment: this.fragment,\n            queryParamsHandling: this.queryParamsHandling,\n            preserveFragment: attrBoolValue(this.preserveFragment)\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlRouterLinkDirective, deps: [{ token: i1.Router }, { token: i1.ActivatedRoute }, { token: 'tabindex', attribute: true }, { token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\n    static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"17.0.2\", type: OwlRouterLinkDirective, selector: \":not(a)[owlRouterLink]\", inputs: { queryParams: \"queryParams\", fragment: \"fragment\", queryParamsHandling: \"queryParamsHandling\", preserveFragment: \"preserveFragment\", skipLocationChange: \"skipLocationChange\", replaceUrl: \"replaceUrl\", stopLink: \"stopLink\", owlRouterLink: \"owlRouterLink\", preserveQueryParams: \"preserveQueryParams\" }, host: { listeners: { \"click\": \"onClick()\" } }, ngImport: i0 });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlRouterLinkDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: ':not(a)[owlRouterLink]' }]\n        }], ctorParameters: () => [{ type: i1.Router }, { type: i1.ActivatedRoute }, { type: undefined, decorators: [{\n                    type: Attribute,\n                    args: ['tabindex']\n                }] }, { type: i0.Renderer2 }, { type: i0.ElementRef }], propDecorators: { queryParams: [{\n                type: Input\n            }], fragment: [{\n                type: Input\n            }], queryParamsHandling: [{\n                type: Input\n            }], preserveFragment: [{\n                type: Input\n            }], skipLocationChange: [{\n                type: Input\n            }], replaceUrl: [{\n                type: Input\n            }], stopLink: [{\n                type: Input\n            }], owlRouterLink: [{\n                type: Input\n            }], preserveQueryParams: [{\n                type: Input\n            }], onClick: [{\n                type: HostListener,\n                args: ['click']\n            }] } });\n/**\n * @description\n *\n * Lets you link to specific routes in your app.\n *\n * See `RouterLink` for more information.\n *\n * @ngModule RouterModule\n *\n * @publicApi\n */\nclass OwlRouterLinkWithHrefDirective {\n    router;\n    route;\n    locationStrategy;\n    // TODO(issue/24571): remove '!'.\n    target;\n    // TODO(issue/24571): remove '!'.\n    queryParams;\n    // TODO(issue/24571): remove '!'.\n    fragment;\n    // TODO(issue/24571): remove '!'.\n    queryParamsHandling;\n    // TODO(issue/24571): remove '!'.\n    preserveFragment;\n    // TODO(issue/24571): remove '!'.\n    skipLocationChange;\n    // TODO(issue/24571): remove '!'.\n    replaceUrl;\n    stopLink = false;\n    commands = [];\n    subscription;\n    // TODO(issue/24571): remove '!'.\n    preserve;\n    // the url displayed on the anchor element.\n    // TODO(issue/24571): remove '!'.\n    href;\n    constructor(router, route, locationStrategy) {\n        this.router = router;\n        this.route = route;\n        this.locationStrategy = locationStrategy;\n        this.subscription = router.events.subscribe((s) => {\n            if (s instanceof NavigationEnd) {\n                this.updateTargetUrlAndHref();\n            }\n        });\n    }\n    set owlRouterLink(commands) {\n        if (commands != null) {\n            this.commands = Array.isArray(commands) ? commands : [commands];\n        }\n        else {\n            this.commands = [];\n        }\n    }\n    set preserveQueryParams(value) {\n        if (isDevMode() && console && console.warn) {\n            console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n        }\n        this.preserve = value;\n    }\n    ngOnChanges(changes) { this.updateTargetUrlAndHref(); }\n    ngOnDestroy() { this.subscription.unsubscribe(); }\n    onClick(button, ctrlKey, metaKey, shiftKey) {\n        if (button !== 0 || ctrlKey || metaKey || shiftKey) {\n            return true;\n        }\n        if (typeof this.target === 'string' && this.target !== '_self') {\n            return true;\n        }\n        if (this.stopLink) {\n            return false;\n        }\n        const extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        this.router.navigateByUrl(this.urlTree, extras);\n        return false;\n    }\n    updateTargetUrlAndHref() {\n        this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree));\n    }\n    get urlTree() {\n        return this.router.createUrlTree(this.commands, {\n            relativeTo: this.route,\n            queryParams: this.queryParams,\n            fragment: this.fragment,\n            queryParamsHandling: this.queryParamsHandling,\n            preserveFragment: attrBoolValue(this.preserveFragment)\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlRouterLinkWithHrefDirective, deps: [{ token: i1.Router }, { token: i1.ActivatedRoute }, { token: i3.LocationStrategy }], target: i0.ɵɵFactoryTarget.Directive });\n    static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"17.0.2\", type: OwlRouterLinkWithHrefDirective, selector: \"a[owlRouterLink]\", inputs: { target: \"target\", queryParams: \"queryParams\", fragment: \"fragment\", queryParamsHandling: \"queryParamsHandling\", preserveFragment: \"preserveFragment\", skipLocationChange: \"skipLocationChange\", replaceUrl: \"replaceUrl\", stopLink: \"stopLink\", owlRouterLink: \"owlRouterLink\", preserveQueryParams: \"preserveQueryParams\" }, host: { listeners: { \"click\": \"onClick($event.button,$event.ctrlKey,$event.metaKey,$event.shiftKey)\" }, properties: { \"attr.target\": \"this.target\", \"href\": \"this.href\" } }, usesOnChanges: true, ngImport: i0 });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: OwlRouterLinkWithHrefDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: 'a[owlRouterLink]' }]\n        }], ctorParameters: () => [{ type: i1.Router }, { type: i1.ActivatedRoute }, { type: i3.LocationStrategy }], propDecorators: { target: [{\n                type: HostBinding,\n                args: ['attr.target']\n            }, {\n                type: Input\n            }], queryParams: [{\n                type: Input\n            }], fragment: [{\n                type: Input\n            }], queryParamsHandling: [{\n                type: Input\n            }], preserveFragment: [{\n                type: Input\n            }], skipLocationChange: [{\n                type: Input\n            }], replaceUrl: [{\n                type: Input\n            }], stopLink: [{\n                type: Input\n            }], href: [{\n                type: HostBinding\n            }], owlRouterLink: [{\n                type: Input\n            }], preserveQueryParams: [{\n                type: Input\n            }], onClick: [{\n                type: HostListener,\n                args: ['click', ['$event.button', '$event.ctrlKey', '$event.metaKey', '$event.shiftKey']]\n            }] } });\nfunction attrBoolValue(s) {\n    return s === '' || !!s;\n}\n\n/**\n * Data which will be passed out after ending of transition of carousel\n */\nclass SlidesOutputData {\n    startPosition;\n    slides;\n}\n;\n\nconst routes = [];\nclass CarouselModule {\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselModule, declarations: [CarouselComponent, CarouselSlideDirective, StageComponent, OwlRouterLinkDirective, OwlRouterLinkWithHrefDirective], imports: [CommonModule], exports: [CarouselComponent, CarouselSlideDirective, OwlRouterLinkDirective, OwlRouterLinkWithHrefDirective] });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselModule, providers: [WINDOW_PROVIDERS, ResizeService, DOCUMENT_PROVIDERS, OwlLogger], imports: [CommonModule] });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.2\", ngImport: i0, type: CarouselModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [\n                        CommonModule,\n                        // BrowserAnimationsModule, // there's an issue with this import while using lazy loading of module consuming this library. I don't remove it because it could be needed during future enhancement of this lib.\n                        // RouterModule.forChild(routes)\n                    ],\n                    declarations: [CarouselComponent, CarouselSlideDirective, StageComponent, OwlRouterLinkDirective, OwlRouterLinkWithHrefDirective],\n                    exports: [CarouselComponent, CarouselSlideDirective, OwlRouterLinkDirective, OwlRouterLinkWithHrefDirective],\n                    providers: [WINDOW_PROVIDERS, ResizeService, DOCUMENT_PROVIDERS, OwlLogger]\n                }]\n        }] });\n\nclass SlideModel {\n    /**\n     * Id of slide\n     */\n    id;\n    /**\n     * Active state of slide. If true slide gets css-class .active\n     */\n    isActive;\n    /**\n     * TemplateRef of slide. In other words its html-markup\n     */\n    tplRef;\n    /**\n     * Number of grid parts to be used\n     */\n    dataMerge;\n    /**\n     * Width of slide\n     */\n    width;\n    /**\n     * Css-rule 'margin-left'\n     */\n    marginL;\n    /**\n     * Css-rule 'margin-right'\n     */\n    marginR;\n    /**\n     * Make slide to be on center of the carousel\n     */\n    isCentered;\n    /**\n     * Mark slide to be on center of the carousel (has .center)\n     */\n    center;\n    /**\n     * Cloned slide. It's being used when 'loop'=true\n     */\n    isCloned;\n    /**\n     * Indicates whether slide should be lazy loaded\n     */\n    load;\n    /**\n     * Css-rule 'left'\n     */\n    left;\n    /**\n     * Changeable classes of slide\n     */\n    classes;\n    /**\n     * Shows whether slide could be animated and could have css-class '.animated'\n     */\n    isAnimated;\n    /**\n     * Shows whether slide could be animated-in and could have css-class '.owl-animated-in'\n     */\n    isDefAnimatedIn;\n    /**\n     * Shows whether slide could be animated-out and could have css-class '.owl-animated-out'\n     */\n    isDefAnimatedOut;\n    /**\n     * Shows whether slide could be animated-in and could have animation css-class defined by user\n     */\n    isCustomAnimatedIn;\n    /**\n     * Shows whether slide could be animated-out and could have animation css-class defined by user\n     */\n    isCustomAnimatedOut;\n    /**\n     * State for defining the height of slide.It's values could be 'full' and 'nulled'. 'Full' sets css-height to 'auto', 'nulled' sets height to '0'.\n     */\n    heightState;\n    /**\n     * Hash (fragment) of url which corresponds to slide\n     */\n    hashFragment;\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CarouselComponent, CarouselModule, CarouselSlideDirective, OwlRouterLinkDirective, OwlRouterLinkWithHrefDirective, SlideModel, SlidesOutputData };\n","import { scanInternals } from './scanInternals';\nimport { operate } from '../util/lift';\nexport function reduce(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, false, true));\n}\n","import { asyncScheduler } from '../scheduler/async';\nimport { delayWhen } from './delayWhen';\nimport { timer } from '../observable/timer';\nexport function delay(due, scheduler = asyncScheduler) {\n    const duration = timer(due, scheduler);\n    return delayWhen(() => duration);\n}\n","import { Observable } from '../Observable';\nimport { async as asyncScheduler } from '../scheduler/async';\nimport { isScheduler } from '../util/isScheduler';\nimport { isValidDate } from '../util/isDate';\nexport function timer(dueTime = 0, intervalOrScheduler, scheduler = asyncScheduler) {\n    let intervalDuration = -1;\n    if (intervalOrScheduler != null) {\n        if (isScheduler(intervalOrScheduler)) {\n            scheduler = intervalOrScheduler;\n        }\n        else {\n            intervalDuration = intervalOrScheduler;\n        }\n    }\n    return new Observable((subscriber) => {\n        let due = isValidDate(dueTime) ? +dueTime - scheduler.now() : dueTime;\n        if (due < 0) {\n            due = 0;\n        }\n        let n = 0;\n        return scheduler.schedule(function () {\n            if (!subscriber.closed) {\n                subscriber.next(n++);\n                if (0 <= intervalDuration) {\n                    this.schedule(undefined, intervalDuration);\n                }\n                else {\n                    subscriber.complete();\n                }\n            }\n        }, due);\n    });\n}\n","export function isValidDate(value) {\n    return value instanceof Date && !isNaN(value);\n}\n","<div *ngIf=\"isGroupsTournament() && hasGroupedPlayers()\" class=\"mt-6\">\r\n  <h4 class=\"text-lg font-bold text-white mb-4 text-center\">Groups Preview</h4>\r\n\r\n  <!-- عرض المجموعات في شبكة -->\r\n  <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\r\n    <div\r\n      *ngFor=\"let groupNumber of getGroupNumbers()\"\r\n      class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700\"\r\n    >\r\n      <div\r\n        class=\"bg-gradient-to-r from-blue-600 to-purple-600 p-3 rounded-t-lg\"\r\n      >\r\n        <h5 class=\"text-sm font-bold text-white text-center\">\r\n          Group {{ groupNumber }}\r\n        </h5>\r\n      </div>\r\n\r\n      <div class=\"p-3\">\r\n        <table class=\"w-full text-xs text-gray-100\">\r\n          <thead class=\"text-xs font-bold text-gray-100 uppercase bg-gray-800\">\r\n            <tr class=\"text-center\">\r\n              <th scope=\"col\" class=\"px-1 py-2\">Rank</th>\r\n              <th scope=\"col\" class=\"px-1 py-2\">Name</th>\r\n              <th scope=\"col\" class=\"px-1 py-2\">Points</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"\r\n                let player of getGroupedPlayers()[groupNumber];\r\n                let i = index\r\n              \"\r\n              class=\"border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-xs\"\r\n              [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n            >\r\n              <th\r\n                scope=\"row\"\r\n                class=\"px-1 py-2 font-medium text-white whitespace-nowrap\"\r\n              >\r\n                {{ player.rank }}\r\n              </th>\r\n              <td class=\"px-1 py-2 text-white\">\r\n                {{ player.fullName }}\r\n              </td>\r\n              <td class=\"px-1 py-2 text-center font-bold text-blue-400\">\r\n                {{ player.points }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <button\r\n          (click)=\"openGroupMatches(groupNumber)\"\r\n          class=\"w-full mt-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-xs font-bold py-2 px-3 rounded hover:from-blue-700 hover:to-purple-700 transition-all\"\r\n        >\r\n          Show Group {{ groupNumber }} Matches\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- مودال مباريات المجموعة -->\r\n<div\r\n  *ngIf=\"showMatchesModal\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\r\n  (click)=\"closeMatchesModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 backdrop-blur-sm p-6 rounded-lg shadow-lg w-full max-w-4xl mx-4 max-h-[80vh] overflow-y-auto\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <div class=\"flex justify-between items-center mb-4\">\r\n      <h2 class=\"text-xl font-bold text-white\">\r\n        Group {{ selectedGroup }} Matches\r\n      </h2>\r\n      <button\r\n        class=\"text-white hover:text-gray-300\"\r\n        (click)=\"closeMatchesModal()\"\r\n      >\r\n        <i class=\"fa-solid fa-times text-2xl\"></i>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"overflow-x-auto\">\r\n      <table class=\"w-full text-sm text-left rtl:text-right text-gray-100\">\r\n        <thead class=\"text-xs font-bold text-gray-100 uppercase bg-gray-800\">\r\n          <tr class=\"text-center\">\r\n            <th\r\n              *ngFor=\"let player of getGroupedPlayers()[selectedGroup!]\"\r\n              scope=\"col\"\r\n              class=\"px-3 py-3 cursor-pointer hover:bg-gray-700 transition-all min-w-[70px]\"\r\n            >\r\n              {{ player.fullName }}\r\n            </th>\r\n            <th scope=\"col\" class=\"px-4 py-3 text-white sticky-column\">\r\n              المباراة\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            *ngFor=\"\r\n              let player1 of getGroupedPlayers()[selectedGroup!];\r\n              let i = index\r\n            \"\r\n            class=\"text-center hover:bg-gray-600\"\r\n            [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n          >\r\n            <td\r\n              *ngFor=\"let player2 of getGroupedPlayers()[selectedGroup!]\"\r\n              class=\"px-2 py-4 transition-all\"\r\n            >\r\n              <span\r\n                *ngIf=\"player1.playerId === player2.playerId\"\r\n                class=\"font-bold text-white\"\r\n              >\r\n                N/A\r\n              </span>\r\n              <span *ngIf=\"player1.playerId !== player2.playerId\">\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    systemOfLeague === SystemOfLeague.Points;\r\n                    else classicResult\r\n                  \"\r\n                >\r\n                  <span\r\n                    [ngClass]=\"\r\n                      getMatchResult(player2, player1, selectedGroupMatches)\r\n                        .color\r\n                    \"\r\n                  >\r\n                    {{\r\n                      getMatchResult(player2, player1, selectedGroupMatches)\r\n                        .result\r\n                    }}\r\n                  </span>\r\n                </ng-container>\r\n                <ng-template #classicResult>\r\n                  <span\r\n                    [ngClass]=\"\r\n                      getClassicResult(player2, player1, selectedGroupMatches)\r\n                        .color\r\n                    \"\r\n                  >\r\n                    {{\r\n                      getClassicResult(player2, player1, selectedGroupMatches)\r\n                        .result\r\n                    }}\r\n                  </span>\r\n                </ng-template>\r\n              </span>\r\n            </td>\r\n            <td class=\"px-6 py-4 font-bold text-white sticky-column\">\r\n              {{ player1.fullName }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport {\r\n  Player,\r\n  Match,\r\n  SystemOfLeague,\r\n  LeagueType,\r\n  Group,\r\n} from '../../models/interfaces';\r\n\r\n@Component({\r\n  selector: 'app-league-groups-preview',\r\n  templateUrl: './league-groups-preview.component.html',\r\n  styleUrls: ['./league-groups-preview.component.css'],\r\n})\r\nexport class LeagueGroupsPreviewComponent implements OnInit {\r\n  @Input() groups: Group[] = [];\r\n  @Input() matches: Match[] = [];\r\n  @Input() systemOfLeague?: SystemOfLeague;\r\n  @Input() leagueType?: number;\r\n\r\n  SystemOfLeague = SystemOfLeague;\r\n  LeagueType = LeagueType;\r\n  selectedGroup: number | null = null;\r\n  showMatchesModal = false;\r\n  selectedGroupMatches: Match[] = [];\r\n\r\n  ngOnInit(): void {}\r\n\r\n  // تجميع اللاعبين حسب المجموعات من الـ groups مباشرة\r\n  getGroupedPlayers(): { [groupNumber: number]: Player[] } {\r\n    const groupedPlayers: { [groupNumber: number]: Player[] } = {};\r\n    this.groups.forEach((group) => {\r\n      groupedPlayers[group.groupNumber] = group.players;\r\n    });\r\n    return groupedPlayers;\r\n  }\r\n\r\n  // الحصول على مباريات مجموعة معينة\r\n  getGroupMatches(groupNumber: number): Match[] {\r\n    const group = this.groups.find((g) => g.groupNumber === groupNumber);\r\n    return group?.matches || [];\r\n  }\r\n\r\n  // الحصول على أرقام المجموعات مرتبة\r\n  getGroupNumbers(): number[] {\r\n    return this.groups.map((g) => g.groupNumber).sort((a, b) => a - b);\r\n  }\r\n\r\n  // التحقق من وجود مجموعات\r\n  hasGroupedPlayers(): boolean {\r\n    return this.groups && this.groups.length > 0;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(): boolean {\r\n    return (\r\n      this.leagueType === LeagueType.Groups ||\r\n      this.leagueType === 2 ||\r\n      String(this.leagueType) === 'Groups'\r\n    );\r\n  }\r\n\r\n  // الحصول على نتيجة المباراة بين لاعبين\r\n  getMatchResult(player1: Player, player2: Player, groupMatches: Match[]) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n\r\n    const match = groupMatches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n\r\n    let colorClass = 'text-white ';\r\n    if (player1Score > player2Score) {\r\n      colorClass = 'text-green-600 font-bold';\r\n    } else if (player1Score < player2Score) {\r\n      colorClass = 'text-red-600 font-bold';\r\n    } else if (player1Score == player2Score && player1Score != 0) {\r\n      colorClass = 'text-gray-400 font-bold text-yellow-400';\r\n    }\r\n\r\n    return { result: `${player1Score} - ${player2Score}`, color: colorClass };\r\n  }\r\n\r\n  // الحصول على نتيجة المباراة بالعربية\r\n  getClassicResult(player1: Player, player2: Player, groupMatches: Match[]) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-800' };\r\n    }\r\n    const match = groupMatches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n    if (player1Score > player2Score) {\r\n      return { result: 'فوز', color: 'text-green-600 font-bold' };\r\n    } else if (player1Score < player2Score) {\r\n      return { result: 'خسارة', color: 'text-red-600 font-bold' };\r\n    } else if (player1Score === player2Score && player1Score !== 0) {\r\n      return { result: 'تعادل', color: 'text-yellow-400 font-bold' };\r\n    }\r\n    return { result: '-', color: 'text-gray-500' };\r\n  }\r\n\r\n  // فتح مودال مباريات المجموعة\r\n  openGroupMatches(groupNumber: number) {\r\n    this.selectedGroup = groupNumber;\r\n    this.selectedGroupMatches = this.getGroupMatches(groupNumber);\r\n    this.showMatchesModal = true;\r\n  }\r\n\r\n  // إغلاق مودال المباريات\r\n  closeMatchesModal() {\r\n    this.showMatchesModal = false;\r\n    this.selectedGroup = null;\r\n    this.selectedGroupMatches = [];\r\n  }\r\n}\r\n","<div class=\"my-8\">\r\n  <h2 class=\"text-2xl font-bold text-center mb-4 text-white\">All Leagues</h2>\r\n\r\n  <!-- Custom Navigation Buttons -->\r\n  <div class=\"flex justify-center gap-4 mb-4\" *ngIf=\"leaguesRank.length > 0\">\r\n    <button\r\n      class=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-all disabled:bg-gray-500 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      (click)=\"previousSlide()\"\r\n      [disabled]=\"isFirstSlide()\"\r\n    >\r\n      <i class=\"fa-solid fa-chevron-left mr-2\"></i>Next\r\n    </button>\r\n    <button\r\n      class=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-all disabled:bg-gray-500 disabled:cursor-not-allowed disabled:opacity-50\"\r\n      (click)=\"nextSlide()\"\r\n      [disabled]=\"isLastSlide()\"\r\n    >\r\n      Prev<i class=\"fa-solid fa-chevron-right ml-2\"></i>\r\n    </button>\r\n  </div>\r\n\r\n  <owl-carousel-o\r\n    [options]=\"customOptions\"\r\n    #owlCarousel\r\n    (changed)=\"onCarouselChanged($event)\"\r\n    (initialized)=\"currentSlideIndex = 0\"\r\n    (dragged)=\"onCarouselChanged($event)\"\r\n  >\r\n    <ng-container *ngFor=\"let league of leaguesRank\">\r\n      <ng-template carouselSlide>\r\n        <div\r\n          class=\"border rounded-lg p-4 shadow-md mx-auto text-center bg-black bg-opacity-50 backdrop-blur-sm container\"\r\n        >\r\n          <h3 class=\"text-xl font-bold text-center text-white pt-2\">\r\n            {{ league.leagueName }}\r\n          </h3>\r\n          <p class=\"text-gray-300 text-center\">\r\n            {{ league.leagueDescription }}\r\n          </p>\r\n          <p class=\"text-center text-gray-300 font-bold\">\r\n            Date Of League : {{ league.createdOn | date : \"dd - MM - yyyy\" }}\r\n          </p>\r\n          <p class=\"text-center text-gray-300\">\r\n            System Of League :\r\n            <span\r\n              class=\"font-bold\"\r\n              [ngClass]=\"\r\n                league.systemOfLeague === SystemOfLeague.Points\r\n                  ? 'text-blue-400'\r\n                  : 'text-blue-400'\r\n              \"\r\n            >\r\n              {{\r\n                league.systemOfLeague === SystemOfLeague.Points\r\n                  ? \"Points \"\r\n                  : \"Classic \"\r\n              }}\r\n            </span>\r\n          </p>\r\n          <p class=\"text-center text-gray-300\">\r\n            Type Of League :\r\n            <span\r\n              class=\"font-bold\"\r\n              [ngClass]=\"getLeagueTypeClass(league.leagueType)\"\r\n            >\r\n              {{ getLeagueTypeText(league.leagueType) }}\r\n            </span>\r\n          </p>\r\n          <p\r\n            class=\"text-gray-300 text-center font-bold\"\r\n            *ngIf=\"league.isFinished == false\"\r\n          >\r\n            <span class=\"font-bold text-green-500\">Live Now!!</span>\r\n          </p>\r\n          <p\r\n            class=\"text-gray-300 font-bold text-center\"\r\n            *ngIf=\"league.isFinished == true\"\r\n          >\r\n            <span class=\"font-bold text-red-500\">Finished</span>\r\n          </p>\r\n\r\n          <!-- زر عرض المباريات الإقصائية للبطولات من نوع Groups -->\r\n          <div\r\n            *ngIf=\"isGroupsTournament(league.leagueType)\"\r\n            class=\"mt-4 text-center\"\r\n          >\r\n            <button\r\n              class=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 transition-all text-white rounded-lg font-semibold\"\r\n              (click)=\"openKnockoutModal(league.leagueId)\"\r\n            >\r\n              Show Knockout Matches\r\n            </button>\r\n          </div>\r\n\r\n          <!-- عرض معاينة المجموعات للبطولات من نوع Groups -->\r\n          <app-league-groups-preview\r\n            *ngIf=\"isGroupsTournament(league.leagueType)\"\r\n            [groups]=\"league.groups || []\"\r\n            [matches]=\"getLeagueMatches(league.leagueId)\"\r\n            [systemOfLeague]=\"league.systemOfLeague\"\r\n            [leagueType]=\"league.leagueType\"\r\n          >\r\n          </app-league-groups-preview>\r\n\r\n          <!-- عرض شجرة البطولة الإقصائية -->\r\n          <div\r\n            *ngIf=\"isGroupsTournament(league.leagueType) && showKnockoutMatches\"\r\n            class=\"mt-4\"\r\n          >\r\n            <app-bracket-tree [leagueId]=\"league.leagueId\"></app-bracket-tree>\r\n          </div>\r\n\r\n          <div\r\n            *ngIf=\"!isGroupsTournament(league.leagueType)\"\r\n            class=\"relative overflow-x-auto shadow-md sm:rounded-lg w-full\"\r\n          >\r\n            <button\r\n              class=\"my-4 px-2 bg-gray-600 hover:bg-gray-700 transition-all text-white py-2 rounded\"\r\n              (click)=\"openModal(league.leagueId)\"\r\n            >\r\n              Show Games With League\r\n            </button>\r\n\r\n            <table\r\n              class=\"w-full text-sm text-left rtl:text-right text-gray-400 min-w-full\"\r\n            >\r\n              <thead\r\n                class=\"text-xs uppercase bg-black bg-opacity-50 backdrop-blur-sm text-white\"\r\n              >\r\n                <tr class=\"text-center\">\r\n                  <th scope=\"col\" class=\"py-3 sm:px-2\">Rank</th>\r\n                  <th scope=\"col\" class=\"py-3 sm:px-2\">Name</th>\r\n                  <th scope=\"col\" class=\"py-3 sm:px-2\">Points</th>\r\n                  <th scope=\"col\" class=\"py-3 hidden sm:table-cell sm:px-2\">\r\n                    Win\r\n                  </th>\r\n                  <th scope=\"col\" class=\"py-3 hidden sm:table-cell sm:px-2\">\r\n                    Draw\r\n                  </th>\r\n                  <th scope=\"col\" class=\"py-3 hidden sm:table-cell sm:px-2\">\r\n                    Loss\r\n                  </th>\r\n                  <th scope=\"col\" class=\"py-3 sm:px-2\">Games</th>\r\n                  <th scope=\"col\" class=\"py-3 sm:px-2\">Win Rate</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr\r\n                  *ngFor=\"let player of league.players; let i = index\"\r\n                  class=\"border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px]\"\r\n                  [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n                >\r\n                  <th\r\n                    scope=\"row\"\r\n                    class=\"py-4 font-medium whitespace-nowrap text-white relative sm:px-2\"\r\n                  >\r\n                    <i\r\n                      class=\"fa-solid fa-crown absolute top-[50%] left-[5px] md:left-10 translate-y-[-50%]\"\r\n                      style=\"color: #ffd43b\"\r\n                      *ngIf=\"player.rank == 1\"\r\n                    ></i>\r\n                    {{ player.rank }}\r\n                  </th>\r\n                  <td class=\"py-4 text-white sm:px-2\">\r\n                    {{ player.fullName }}\r\n                  </td>\r\n                  <td class=\"py-4 text-center text-white sm:px-2\">\r\n                    {{ player.points }}\r\n                  </td>\r\n                  <td\r\n                    class=\"py-4 text-center text-green-500 hidden sm:table-cell sm:px-2\"\r\n                  >\r\n                    {{ player.wins }}\r\n                  </td>\r\n                  <td\r\n                    class=\"py-4 text-center text-yellow-400 hidden sm:table-cell sm:px-2\"\r\n                  >\r\n                    {{ player.draws }}\r\n                  </td>\r\n                  <td\r\n                    class=\"py-4 text-center text-red-500 hidden sm:table-cell sm:px-2\"\r\n                  >\r\n                    {{ player.losses }}\r\n                  </td>\r\n                  <td class=\"py-4 text-center text-white sm:px-2\">\r\n                    {{ player.matchesPlayed }}\r\n                  </td>\r\n                  <td\r\n                    class=\"py-4 text-center sm:px-2\"\r\n                    [ngClass]=\"\r\n                      player.winRate < 35\r\n                        ? 'text-red-500'\r\n                        : player.winRate >= 35 && player.winRate <= 69\r\n                        ? 'text-yellow-400'\r\n                        : 'text-green-500'\r\n                    \"\r\n                  >\r\n                    {{ player.winRate | number : \"1.2-2\" }} %\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n    </ng-container>\r\n  </owl-carousel-o>\r\n</div>\r\n\r\n<!-- Modal for League Games -->\r\n<div\r\n  *ngIf=\"isModalOpen\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\r\n  (click)=\"closeModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg shadow-lg w-full max-w-4xl mx-4 max-h-[80vh] overflow-y-auto\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <div class=\"flex justify-between items-center mb-4\">\r\n      <h2 class=\"text-xl font-bold text-white\">League Games</h2>\r\n      <button class=\"text-white hover:text-gray-300\" (click)=\"closeModal()\">\r\n        <i class=\"fa-solid fa-times text-2xl\"></i>\r\n      </button>\r\n    </div>\r\n    <div\r\n      class=\"table-container relative overflow-x-auto shadow-md sm:rounded-lg w-full\"\r\n    >\r\n      <table\r\n        class=\"w-full text-sm text-left rtl:text-right text-gray-400 min-w-full\"\r\n      >\r\n        <thead class=\"text-xs uppercase\">\r\n          <tr>\r\n            <th\r\n              *ngFor=\"let player of players; let i = index\"\r\n              scope=\"col\"\r\n              class=\"px-1 py-3 text-center text-white cursor-pointer hover:bg-gray-400 transition-all min-w-[70px] sticky-header sm:px-2\"\r\n              (click)=\"highlightColumn(player.playerId)\"\r\n              [ngClass]=\"\r\n                highlightedColumn == player.playerId\r\n                  ? 'highlighted-header'\r\n                  : 'text-white'\r\n              \"\r\n              [style.--cell-index]=\"i\"\r\n              [style.--total-cells]=\"players.length\"\r\n            >\r\n              {{ player.fullName }}\r\n            </th>\r\n            <th\r\n              scope=\"col\"\r\n              class=\"px-1 py-3 text-center text-white sticky-corner sm:px-2\"\r\n            >\r\n              المباراة\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            *ngFor=\"let player1 of players; let i = index\"\r\n            class=\"border-b text-center border-gray-700 hover:bg-gray-600\"\r\n            [ngClass]=\"i % 2 === 0 ? 'bg-gray-900' : 'bg-gray-950'\"\r\n          >\r\n            <td\r\n              *ngFor=\"let player2 of players\"\r\n              class=\"px-1 py-4 transition-all sm:px-2\"\r\n              [ngClass]=\"{\r\n                'highlighted-cell': highlightedColumn === player2.playerId\r\n              }\"\r\n            >\r\n              <span\r\n                *ngIf=\"player1.playerId === player2.playerId\"\r\n                class=\"font-bold text-white\"\r\n              >\r\n                N/A\r\n              </span>\r\n              <span *ngIf=\"player1.playerId !== player2.playerId\">\r\n                <ng-container\r\n                  *ngIf=\"\r\n                    currentModalSystemOfLeague === SystemOfLeague.Points;\r\n                    else classicResult\r\n                  \"\r\n                >\r\n                  <span [ngClass]=\"getMatchResult(player2, player1).color\">\r\n                    {{ getMatchResult(player2, player1).result }}\r\n                  </span>\r\n                </ng-container>\r\n                <ng-template #classicResult>\r\n                  <span [ngClass]=\"getClassicResult(player2, player1).color\">\r\n                    {{ getClassicResult(player2, player1).result }}\r\n                  </span>\r\n                </ng-template>\r\n              </span>\r\n            </td>\r\n            <td class=\"px-1 py-4 font-bold text-white sticky-column sm:px-2\">\r\n              {{ player1.fullName }}\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Knockout Matches Modal -->\r\n<div\r\n  *ngIf=\"isKnockoutModalOpen\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\r\n  (click)=\"closeKnockoutModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 backdrop-blur-sm rounded-lg shadow-lg w-full max-w-6xl max-h-[80vh] overflow-y-auto md:overflow-hidden\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <div class=\"flex justify-between items-center mb-4 px-4 pt-2\">\r\n      <h2 class=\"text-xl font-bold text-white\">Knockout Matches</h2>\r\n      <button\r\n        class=\"text-white hover:text-gray-300\"\r\n        (click)=\"closeKnockoutModal()\"\r\n      >\r\n        <i class=\"fa-solid fa-times text-2xl\"></i>\r\n      </button>\r\n    </div>\r\n    <div class=\"w-full\">\r\n      <app-bracket-tree [leagueId]=\"currentKnockoutLeagueId\"></app-bracket-tree>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { LeagueService } from './../../core/services/league.service';\r\nimport {\r\n  AllLeagueRank,\r\n  Player,\r\n  Match,\r\n  SystemOfLeague,\r\n  LeagueType,\r\n} from './../../models/interfaces';\r\nimport { OwlOptions, CarouselComponent } from 'ngx-owl-carousel-o';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-all-leagues',\r\n  templateUrl: './all-leagues.component.html',\r\n  styleUrls: ['./all-leagues.component.css'],\r\n})\r\nexport class AllLeaguesComponent implements OnInit {\r\n  @ViewChild('owlCarousel') owlCarousel!: CarouselComponent;\r\n  leaguesRank: AllLeagueRank[] = [];\r\n  players: Player[] = [];\r\n  highlightedColumn: number | null = null;\r\n  matches: Match[] = [];\r\n  LeagueId: number = 0;\r\n  isModalOpen: boolean = false;\r\n  currentModalSystemOfLeague?: SystemOfLeague;\r\n  SystemOfLeague = SystemOfLeague;\r\n  LeagueType = LeagueType;\r\n  showKnockoutMatches: boolean = false;\r\n  isKnockoutModalOpen: boolean = false;\r\n  currentKnockoutLeagueId: number = 0;\r\n  currentSlideIndex: number = 0;\r\n\r\n  constructor(\r\n    private leagueService: LeagueService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.leagueService.GetAllLeaguesRank().subscribe({\r\n      next: (response) => {\r\n        if (response) {\r\n          const sorted = this.sortLeaguesForDisplay(response);\r\n          this.leaguesRank = this.normalizeLeaguesForDisplay(sorted);\r\n        } else {\r\n          this.toastr.error(response);\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error(err.error.message);\r\n      },\r\n    });\r\n  }\r\n\r\n  // Method to handle carousel changes\r\n  onCarouselChanged(event: any): void {\r\n    if (event && event.startPosition !== undefined) {\r\n      this.currentSlideIndex = event.startPosition;\r\n    }\r\n  }\r\n\r\n  loadData() {\r\n    this.leagueService.GetAllLeaguesRank().subscribe({\r\n      next: (response) => {\r\n        const sorted = this.sortLeaguesForDisplay(response);\r\n        this.leaguesRank = this.normalizeLeaguesForDisplay(sorted);\r\n      },\r\n      error: (error) => {\r\n        this.toastr.error('حدث خطأ أثناء تحميل بيانات الدوريات');\r\n      },\r\n    });\r\n  }\r\n\r\n  // Sort leagues for display (newest first for carousel)\r\n  private sortLeaguesForDisplay(leagues: AllLeagueRank[]): AllLeagueRank[] {\r\n    return [...leagues].sort((a, b) => {\r\n      const dateA = new Date(a.createdOn).getTime();\r\n      const dateB = new Date(b.createdOn).getTime();\r\n      return dateB - dateA; // Descending order (newest first)\r\n    });\r\n  }\r\n\r\n  customOptions: OwlOptions = {\r\n    nav: false,\r\n    loop: false,\r\n    mouseDrag: true,\r\n    touchDrag: true,\r\n    pullDrag: true,\r\n    // dots: false,\r\n    navSpeed: 700,\r\n    // navText: ['Previous', 'Next'],\r\n    responsive: {\r\n      0: { items: 1 },\r\n      600: { items: 1 },\r\n      1000: { items: 1 },\r\n    },\r\n  };\r\n\r\n  openModal(id: number): void {\r\n    this.LeagueId = id;\r\n    this.isModalOpen = true;\r\n\r\n    // Use existing data from leaguesRank instead of making a separate request\r\n    const league = this.leaguesRank.find((l) => l.leagueId === id);\r\n    if (league) {\r\n      this.players = league.players || [];\r\n      this.matches = league.matches || [];\r\n      this.currentModalSystemOfLeague = this.coerceSystemType(\r\n        league.systemOfLeague\r\n      );\r\n    } else {\r\n      this.players = [];\r\n      this.matches = [];\r\n      this.currentModalSystemOfLeague = undefined;\r\n    }\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.isModalOpen = false;\r\n    this.LeagueId = 0;\r\n    this.highlightedColumn = null;\r\n    this.players = [];\r\n    this.matches = [];\r\n  }\r\n\r\n  getMatchResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-400' };\r\n    }\r\n\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n\r\n    let colorClass = 'text-white';\r\n    if (player1Score > player2Score) {\r\n      colorClass = 'text-green-600 font-bold';\r\n    } else if (player1Score < player2Score) {\r\n      colorClass = 'text-red-600 font-bold';\r\n    } else if (player1Score === player2Score && player1Score !== 0) {\r\n      colorClass = 'text-yellow-400 font-bold';\r\n    }\r\n\r\n    return { result: `${player1Score} - ${player2Score}`, color: colorClass };\r\n  }\r\n\r\n  getClassicResult(player1: Player, player2: Player) {\r\n    if (player1.playerId === player2.playerId) {\r\n      return { result: 'N/A', color: 'text-gray-400' };\r\n    }\r\n    const match = this.matches.find(\r\n      (m) =>\r\n        (m.player1Name === player1.fullName &&\r\n          m.player2Name === player2.fullName) ||\r\n        (m.player1Name === player2.fullName &&\r\n          m.player2Name === player1.fullName)\r\n    );\r\n    if (!match) {\r\n      return { result: '-', color: 'text-gray-500' };\r\n    }\r\n    const player1Score =\r\n      match.player1Name === player1.fullName ? match.score1 : match.score2;\r\n    const player2Score =\r\n      match.player2Name === player2.fullName ? match.score2 : match.score1;\r\n    if (player1Score > player2Score) {\r\n      return { result: 'فوز', color: 'text-green-600 font-bold' };\r\n    } else if (player1Score < player2Score) {\r\n      return { result: 'خسارة', color: 'text-red-600 font-bold' };\r\n    } else if (player1Score === player2Score && player1Score !== 0) {\r\n      return { result: 'تعادل', color: 'text-yellow-400 font-bold' };\r\n    }\r\n    return { result: '-', color: 'text-gray-500' };\r\n  }\r\n\r\n  highlightColumn(playerId: number) {\r\n    this.highlightedColumn =\r\n      this.highlightedColumn === playerId ? null : playerId;\r\n  }\r\n\r\n  toggleKnockoutMatches(): void {\r\n    this.showKnockoutMatches = !this.showKnockoutMatches;\r\n  }\r\n\r\n  openKnockoutModal(leagueId: number): void {\r\n    this.currentKnockoutLeagueId = leagueId;\r\n    this.isKnockoutModalOpen = true;\r\n  }\r\n\r\n  closeKnockoutModal(): void {\r\n    this.isKnockoutModalOpen = false;\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  onClickOutside(event: Event) {\r\n    const table = document.querySelector('table');\r\n    if (table && !table.contains(event.target as Node) && this.isModalOpen) {\r\n      this.highlightedColumn = null;\r\n    }\r\n  }\r\n\r\n  // دالة مساعدة لإرجاع systemOfLeague لدوري معين\r\n  getSystemOfLeagueForLeague(league: any): SystemOfLeague | undefined {\r\n    return this.coerceSystemType(league?.systemOfLeague);\r\n  }\r\n\r\n  // دالة للحصول على مباريات دوري معين\r\n  getLeagueMatches(leagueId: number): Match[] {\r\n    const league = this.leaguesRank.find((l) => l.leagueId === leagueId);\r\n    if (!league) return [];\r\n\r\n    // للدوريات العادية، نرجع matches\r\n    if (!this.isGroupsTournament(league.leagueType)) {\r\n      return league.matches || [];\r\n    }\r\n\r\n    // لدوريات المجموعات، نجمع matches و knockoutMatches\r\n    const allMatches: Match[] = [];\r\n    if (league.matches) {\r\n      allMatches.push(...league.matches);\r\n    }\r\n    if (league.knockoutMatches) {\r\n      allMatches.push(...league.knockoutMatches);\r\n    }\r\n    return allMatches;\r\n  }\r\n\r\n  // تعديل دوال النتائج لتأخذ systemOfLeague كـ parameter\r\n  getDisplayResult(\r\n    player1: Player,\r\n    player2: Player,\r\n    systemOfLeague: SystemOfLeague | undefined\r\n  ) {\r\n    if (systemOfLeague === SystemOfLeague.Classic) {\r\n      return this.getClassicResult(player1, player2);\r\n    }\r\n    return this.getMatchResult(player1, player2);\r\n  }\r\n\r\n  // Navigation methods\r\n  previousSlide(): void {\r\n    this.owlCarousel?.prev();\r\n  }\r\n\r\n  nextSlide(): void {\r\n    this.owlCarousel?.next();\r\n  }\r\n\r\n  // Check if we're at the first slide\r\n  isFirstSlide(): boolean {\r\n    if (this.leaguesRank.length === 0) return true;\r\n    return this.currentSlideIndex === 0;\r\n  }\r\n\r\n  // Check if we're at the last slide\r\n  isLastSlide(): boolean {\r\n    if (this.leaguesRank.length === 0) return true;\r\n    return this.currentSlideIndex >= this.leaguesRank.length - 1;\r\n  }\r\n\r\n  // التحقق من أن البطولة من نوع المجموعات\r\n  isGroupsTournament(leagueType: any): boolean {\r\n    return (\r\n      leagueType === LeagueType.Groups ||\r\n      leagueType === 2 ||\r\n      leagueType === 'Groups' ||\r\n      leagueType === 'groups'\r\n    );\r\n  }\r\n\r\n  // دالة مساعدة للحصول على نص نوع الدوري\r\n  getLeagueTypeText(leagueType: any): string {\r\n    if (leagueType === LeagueType.Single || leagueType === 'Single') {\r\n      return 'League';\r\n    } else if (leagueType === LeagueType.Multi || leagueType === 'Multi') {\r\n      return 'Multi';\r\n    } else if (\r\n      leagueType === LeagueType.Groups ||\r\n      leagueType === 'Groups' ||\r\n      leagueType === 'groups'\r\n    ) {\r\n      return 'Groups';\r\n    }\r\n    return 'Unknown';\r\n  }\r\n\r\n  // دالة مساعدة للحصول على CSS class لنوع الدوري\r\n  getLeagueTypeClass(leagueType: any): string {\r\n    return 'text-blue-400';\r\n  }\r\n\r\n  // Normalize systemOfLeague across responses (number or string)\r\n  private coerceSystemType(value: unknown): SystemOfLeague | undefined {\r\n    if (typeof value === 'number') {\r\n      if (value === SystemOfLeague.Points || value === SystemOfLeague.Classic) {\r\n        return value as SystemOfLeague;\r\n      }\r\n      return undefined;\r\n    }\r\n\r\n    if (typeof value === 'string') {\r\n      const v = value.toLowerCase();\r\n      if (v === 'points' || v === '0') return SystemOfLeague.Points;\r\n      if (v === 'classic' || v === '1') return SystemOfLeague.Classic;\r\n      return undefined;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  // Normalize list items so template comparisons work reliably\r\n  private normalizeLeaguesForDisplay(\r\n    leagues: AllLeagueRank[]\r\n  ): AllLeagueRank[] {\r\n    return leagues.map((l) => ({\r\n      ...l,\r\n      systemOfLeague: this.coerceSystemType(l.systemOfLeague) as SystemOfLeague,\r\n    }));\r\n  }\r\n}\r\n","<div class=\"container mx-auto\">\r\n  <div class=\"text-center my-[30px]\">\r\n    <h2 class=\"font-bold fa-1 text-white\">\r\n      هذه الكروت الممنوعة من الموقع الرسمي للعبة يوغي للتأكد\r\n      <a\r\n        href=\"https://www.db.yugioh-card.com/yugiohdb/forbidden_limited.action\"\r\n        target=\"_blank\"\r\n        class=\"text-blue-600 hover:text-blue-800\"\r\n      >\r\n        اضغط هنا\r\n      </a>\r\n      للذهاب الي الموقع\r\n    </h2>\r\n\r\n    <h2 class=\"font-bold fa-1 text-white\">\r\n      لعرض الورق الممنوع الخاص بنسخة جوي فقط\r\n      <span\r\n        class=\"text-blue-600 hover:text-blue-800 cursor-pointer\"\r\n        (click)=\"openAll()\"\r\n      >\r\n        اضغط هنا\r\n      </span>\r\n    </h2>\r\n  </div>\r\n\r\n  <!-- Spell Cards Section -->\r\n  <div class=\"text-center my-[30px]\">\r\n    <h2 class=\"font-bold fa-2xl text-green-500 custom-outline\">Spell Cards</h2>\r\n  </div>\r\n  <owl-carousel-o [options]=\"customOptions\">\r\n    <ng-container *ngFor=\"let spell of spellCards\">\r\n      <ng-template carouselSlide>\r\n        <div class=\"p-2 relative transition max-w-[150px] cursor-pointer\">\r\n          <img [src]=\"spell\" class=\"w-fit min-h-[190px]\" />\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <i\r\n            class=\"fa-solid fa-eye cursor-pointer\"\r\n            style=\"color: #fff\"\r\n            (click)=\"openModal(spell)\"\r\n          ></i>\r\n        </div>\r\n      </ng-template>\r\n    </ng-container>\r\n  </owl-carousel-o>\r\n\r\n  <!-- Trap Cards Section -->\r\n  <div class=\"text-center my-[30px]\">\r\n    <h2 class=\"font-bold text-3xl text-rose-500 custom-outline\">Trap Cards</h2>\r\n  </div>\r\n  <owl-carousel-o [options]=\"customOptions\">\r\n    <ng-container *ngFor=\"let trap of trapCards\">\r\n      <ng-template carouselSlide>\r\n        <div class=\"p-2 relative transition max-w-[150px] cursor-pointer\">\r\n          <img [src]=\"trap\" class=\"w-fit min-h-[190px]\" />\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <i\r\n            class=\"fa-solid fa-eye cursor-pointer\"\r\n            style=\"color: #fff\"\r\n            (click)=\"openModal(trap)\"\r\n          ></i>\r\n        </div>\r\n      </ng-template>\r\n    </ng-container>\r\n  </owl-carousel-o>\r\n\r\n  <!-- Monsters Section -->\r\n  <div class=\"text-center my-[30px]\">\r\n    <h2 class=\"font-bold fa-2xl text-yellow-500 custom-outline\">Monsters</h2>\r\n  </div>\r\n  <owl-carousel-o [options]=\"customOptions\">\r\n    <ng-container *ngFor=\"let monster of monsters\">\r\n      <ng-template carouselSlide>\r\n        <div\r\n          class=\"p-2 relative transition max-w-[150px] cursor-pointer\"\r\n        >\r\n          <img [src]=\"monster\" class=\"w-fit min-h-[190px]\" />\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <i\r\n            class=\"fa-solid fa-eye cursor-pointer\"\r\n            style=\"color: #fff\"\r\n            (click)=\"openModal(monster)\"\r\n          ></i>\r\n        </div>\r\n      </ng-template>\r\n    </ng-container>\r\n  </owl-carousel-o>\r\n\r\n  <!-- Modal for the Selected Image -->\r\n  <div\r\n    *ngIf=\"isModalOpen\"\r\n    class=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\"\r\n    (click)=\"closeModal()\"\r\n  >\r\n    <div class=\"relative\">\r\n      <img\r\n        [src]=\"selectedImage\"\r\n        class=\"max-w-[90vw] max-h-[90vh] object-contain w-[400px]\"\r\n        (click)=\"$event.stopPropagation()\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <!-- Modal for All-->\r\n  <div\r\n    *ngIf=\"isModalOpenAll\"\r\n    class=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\"\r\n    (click)=\"closeModal()\"\r\n  >\r\n    <div class=\"relative\">\r\n      <img\r\n        src=\"./assets/images/all2.png\"\r\n        class=\"max-w-[250vw] max-h-[250vh] object-contain w-[400px] sm:w-[700px]\"\r\n        (click)=\"$event.stopPropagation()\"\r\n      />\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { OwlOptions } from 'ngx-owl-carousel-o';\r\n\r\n@Component({\r\n  selector: 'app-forbidden-cards',\r\n  templateUrl: './forbidden-cards.component.html',\r\n  styleUrls: ['./forbidden-cards.component.css'],\r\n})\r\nexport class ForbiddenCardsComponent implements OnInit {\r\n  spellCards: string[] = [\r\n    './assets/images/Spell Cards/1.jpg',\r\n    './assets/images/Spell Cards/4.jpg',\r\n    './assets/images/Spell Cards/5.jpg',\r\n    './assets/images/Spell Cards/6.jpg',\r\n    './assets/images/Spell Cards/12.jpg',\r\n    './assets/images/Spell Cards/14.jpg',\r\n    './assets/images/Spell Cards/15.jpg',\r\n    './assets/images/Spell Cards/16.jpg',\r\n    './assets/images/Spell Cards/18.jpg',\r\n    './assets/images/Spell Cards/19.jpg',\r\n    './assets/images/Spell Cards/20.jpg',\r\n    './assets/images/Spell Cards/21.jpg',\r\n    './assets/images/Spell Cards/24.jpg',\r\n    './assets/images/Spell Cards/25.jpg',\r\n    './assets/images/Spell Cards/26.jpg',\r\n    './assets/images/Spell Cards/13.jpg',\r\n    './assets/images/Spell Cards/2.jpg',\r\n    './assets/images/Spell Cards/3.jpg',\r\n    './assets/images/Spell Cards/7.jpg',\r\n    './assets/images/Spell Cards/17.jpg',\r\n    './assets/images/Spell Cards/8.jpg',\r\n    './assets/images/Spell Cards/9.jpg',\r\n    './assets/images/Spell Cards/10.jpg',\r\n    './assets/images/Spell Cards/11.jpg',\r\n    './assets/images/Spell Cards/22.jpg',\r\n    './assets/images/Spell Cards/23.jpg',\r\n  ];\r\n  trapCards: string[] = [\r\n    './assets/images/Trap Cards/11.jpg',\r\n    './assets/images/Trap Cards/2.jpg',\r\n    './assets/images/Trap Cards/1.jpg',\r\n    './assets/images/Trap Cards/3.jpg',\r\n    './assets/images/Trap Cards/4.jpg',\r\n    './assets/images/Trap Cards/5.jpg',\r\n    './assets/images/Trap Cards/6.jpg',\r\n    './assets/images/Trap Cards/7.jpg',\r\n    './assets/images/Trap Cards/8.jpg',\r\n    './assets/images/Trap Cards/9.jpg',\r\n    './assets/images/Trap Cards/10.jpg',\r\n    './assets/images/Trap Cards/12.jpg',\r\n    './assets/images/Trap Cards/13.jpg',\r\n  ];\r\n  monsters: string[] = [\r\n    './assets/images/Monster/13.jpg',\r\n    './assets/images/Monster/3.jpg',\r\n    './assets/images/Monster/4.jpg',\r\n    './assets/images/Monster/2.jpg',\r\n    './assets/images/Monster/1.jpg',\r\n    './assets/images/Monster/5.jpg',\r\n    './assets/images/Monster/6.jpg',\r\n    './assets/images/Monster/7.jpg',\r\n    './assets/images/Monster/8.jpg',\r\n    './assets/images/Monster/9.jpg',\r\n    './assets/images/Monster/10.jpg',\r\n    './assets/images/Monster/11.jpg',\r\n    './assets/images/Monster/12.jpg',\r\n  ];\r\n\r\n  selectedImage: string | null = null;\r\n  isModalOpen = false;\r\n  isModalOpenAll = false;\r\n  ngOnInit(): void {}\r\n\r\n  customOptions: OwlOptions = {\r\n    loop: false,\r\n    mouseDrag: true,\r\n    touchDrag: true,\r\n    pullDrag: true,\r\n    dots: false,\r\n    navSpeed: 700,\r\n    navText: ['', ''],\r\n    responsive: {\r\n      0: {\r\n        items: 3,\r\n      },\r\n      400: {\r\n        items: 3,\r\n      },\r\n      740: {\r\n        items: 3,\r\n      },\r\n      940: {\r\n        items: 10,\r\n      },\r\n    },\r\n    nav: true,\r\n  };\r\n\r\n  openModal(image: string): void {\r\n    this.selectedImage = image;\r\n    this.isModalOpen = true;\r\n  }\r\n  openAll(): void {\r\n    this.isModalOpenAll = true;\r\n  }\r\n\r\n  closeModal(): void {\r\n    this.isModalOpen = false;\r\n    this.isModalOpenAll = false;\r\n    this.selectedImage = null;\r\n  }\r\n}\r\n","<div class=\"container mx-auto p-4 overflow-hidden h-screen\">\r\n  <div class=\"flex flex-col h-full bg-transparent\">\r\n    <!-- Fixed Header with Toggle Switch -->\r\n    <div\r\n      class=\"fixed top-[70px] left-0 right-0 z-40 p-4 bg-black bg-opacity-90 backdrop-blur-sm border-b border-gray-600 header-container\"\r\n    >\r\n      <div class=\"flex items-center justify-between\">\r\n        <div class=\"flex items-center space-x-3\">\r\n          <div class=\"flex items-center space-x-2 toggle-container\">\r\n            <label class=\"toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                [checked]=\"isFriendlyMode\"\r\n                (change)=\"toggleMessageMode()\"\r\n              />\r\n              <span class=\"slider\"></span>\r\n            </label>\r\n            <span class=\"text-sm text-gray-300\">ودية</span>\r\n          </div>\r\n        </div>\r\n        <button\r\n          (click)=\"toggleMessageMode()\"\r\n          class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n        >\r\n          {{ toggleButtonText }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Loading Indicator -->\r\n    <div\r\n      *ngIf=\"isLoading\"\r\n      class=\"flex justify-center items-center p-8\"\r\n      style=\"margin-top: 80px\"\r\n    >\r\n      <div\r\n        class=\"loading-spinner rounded-full h-8 w-8 border-b-2 border-white\"\r\n      ></div>\r\n      <span class=\"ml-2 text-white\">جاري التحميل...</span>\r\n    </div>\r\n\r\n    <!-- Messages Container - Scrollable Area with padding for fixed header and footer -->\r\n    <div\r\n      *ngIf=\"!isLoading\"\r\n      #messagesContainer\r\n      class=\"flex-1 p-4 overflow-y-auto messages-container\"\r\n      style=\"margin-top: 80px; margin-bottom: 80px\"\r\n      (scroll)=\"onScroll()\"\r\n    >\r\n      <!-- Official Messages -->\r\n      <div *ngIf=\"!isFriendlyMode\">\r\n        <div *ngFor=\"let message of messages\" class=\"mb-4 message-container\">\r\n          <!-- Player Messages (Right) -->\r\n          <div *ngIf=\"!message.isFromAdmin\" class=\"flex justify-end\">\r\n            <div\r\n              class=\"max-w-xs bg-green-500 bg-opacity-50 text-white rounded-lg p-3 shadow-md backdrop-blur-sm message-bubble\"\r\n            >\r\n              <p class=\"text-sm\">{{ message.content }}</p>\r\n              <p class=\"text-xs mt-1 text-gray-300\">\r\n                {{ message.sentAt | date : \"MMM d, y, hh:mm a\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <!-- Admin Messages (Left) -->\r\n          <div *ngIf=\"message.isFromAdmin\" class=\"flex justify-start\">\r\n            <div\r\n              class=\"max-w-xs bg-gray-300 bg-opacity-50 text-white rounded-lg p-3 shadow-md backdrop-blur-sm message-bubble\"\r\n            >\r\n              <p class=\"text-sm\">{{ message.content }}</p>\r\n              <p class=\"text-xs mt-1 text-gray-300\">\r\n                {{ message.sentAt | date : \"MMM d, y, hh:mm a\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Friendly Messages -->\r\n      <div *ngIf=\"isFriendlyMode\">\r\n        <div\r\n          *ngFor=\"let message of friendlyMessages\"\r\n          class=\"mb-4 message-container\"\r\n        >\r\n          <!-- Player Messages (Right) -->\r\n          <div *ngIf=\"!message.isFromAdmin\" class=\"flex justify-end\">\r\n            <div\r\n              class=\"max-w-xs bg-blue-500 bg-opacity-50 text-white rounded-lg p-3 shadow-md backdrop-blur-sm message-bubble\"\r\n            >\r\n              <p class=\"text-sm\">{{ message.content }}</p>\r\n              <p class=\"text-xs mt-1 text-gray-300\">\r\n                {{ message.sentAt | date : \"MMM d, y, hh:mm a\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <!-- Admin Messages (Left) -->\r\n          <div *ngIf=\"message.isFromAdmin\" class=\"flex justify-start\">\r\n            <div\r\n              class=\"max-w-xs bg-purple-300 bg-opacity-50 text-white rounded-lg p-3 shadow-md backdrop-blur-sm message-bubble\"\r\n            >\r\n              <p class=\"text-sm\">{{ message.content }}</p>\r\n              <p class=\"text-xs mt-1 text-gray-300\">\r\n                {{ message.sentAt | date : \"MMM d, y, hh:mm a\" }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Empty State -->\r\n      <div\r\n        *ngIf=\"currentMessages.length === 0 && !isLoading\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <div class=\"text-gray-400 text-lg\">\r\n          لا توجد {{ isFriendlyMode ? \"رسائل ودية\" : \"رسائل رسمية\" }} حالياً\r\n        </div>\r\n        <div class=\"text-gray-500 text-sm mt-2\">\r\n          ابدأ المحادثة بإرسال رسالة جديدة\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Fixed Message Input -->\r\n    <div\r\n      class=\"fixed bottom-0 left-0 right-0 z-50 p-4 bg-black bg-opacity-90 backdrop-blur-sm border-t border-gray-600\"\r\n    >\r\n      <form (ngSubmit)=\"sendMessage()\" class=\"flex items-center gap-2\">\r\n        <input\r\n          type=\"text\"\r\n          [(ngModel)]=\"newMessage\"\r\n          name=\"newMessage\"\r\n          [placeholder]=\"\r\n            isFriendlyMode ? 'اكتب رسالة ودية...' : 'اكتب رسالة رسمية...'\r\n          \"\r\n          class=\"flex-1 p-2 bg-black bg-opacity-50 text-white border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-300 placeholder-gray-400\"\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          class=\"bg-gray-800 text-white p-2 rounded-lg hover:bg-gray-700 disabled:bg-gray-600 transition-colors\"\r\n          [disabled]=\"!newMessage.trim()\"\r\n        >\r\n          إرسال\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  ElementRef,\r\n  AfterViewChecked,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { MessageService } from 'src/app/core/services/message.service';\r\nimport { FriendlyMessageService } from 'src/app/core/services/friendly-message.service';\r\nimport { Message } from 'src/app/models/interfaces';\r\nimport { FriendlyMessageDto } from 'friendly-message-types';\r\n\r\n@Component({\r\n  selector: 'app-player-inbox',\r\n  templateUrl: './player-inbox.component.html',\r\n  styleUrls: ['./player-inbox.component.css'],\r\n})\r\nexport class PlayerInboxComponent implements OnInit, AfterViewChecked {\r\n  messages: Message[] = [];\r\n  friendlyMessages: FriendlyMessageDto[] = [];\r\n  newMessage: string = '';\r\n  isFriendlyMode: boolean = false; // Default to official messages\r\n  isLoading: boolean = false;\r\n  @ViewChild('messagesContainer') messagesContainer!: ElementRef;\r\n  private isUserAtBottom: boolean = true;\r\n\r\n  constructor(\r\n    private messageService: MessageService,\r\n    private friendlyMessageService: FriendlyMessageService,\r\n    private toastr: ToastrService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadMessages();\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    this.cdr.detectChanges();\r\n    if (this.isUserAtBottom) {\r\n      this.scrollToBottom();\r\n    }\r\n  }\r\n\r\n  loadMessages(): void {\r\n    this.isLoading = true;\r\n\r\n    if (this.isFriendlyMode) {\r\n      this.loadFriendlyMessages();\r\n    } else {\r\n      this.loadOfficialMessages();\r\n    }\r\n  }\r\n\r\n  private loadOfficialMessages(): void {\r\n    this.messageService.getPlayerMessages().subscribe({\r\n      next: (response) => {\r\n        this.isLoading = false;\r\n        if (response && response.messages) {\r\n          this.messages = response.messages\r\n            .filter((message) => !message.isDeleted)\r\n            .sort(\r\n              (a, b) =>\r\n                new Date(a.sentAt).getTime() - new Date(b.sentAt).getTime()\r\n            );\r\n          this.cdr.detectChanges();\r\n        } else {\r\n          this.toastr.info('لا يوجد رسائل رسمية الآن');\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        this.toastr.error('حصل خطأ أثناء جلب الرسائل الرسمية');\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadFriendlyMessages(): void {\r\n    this.friendlyMessageService.getPlayerMessages(0).subscribe({\r\n      next: (response) => {\r\n        this.isLoading = false;\r\n        if (response && response.messages) {\r\n          this.friendlyMessages = response.messages.sort(\r\n            (a, b) =>\r\n              new Date(a.sentAt).getTime() - new Date(b.sentAt).getTime()\r\n          );\r\n          this.cdr.detectChanges();\r\n        } else {\r\n          this.toastr.info('لا يوجد رسائل ودية الآن');\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.isLoading = false;\r\n        this.toastr.error('حصل خطأ أثناء جلب الرسائل الودية');\r\n      },\r\n    });\r\n  }\r\n\r\n  sendMessage(): void {\r\n    if (!this.newMessage.trim()) {\r\n      this.toastr.warning('الرجاء كتابة رسالة');\r\n      return;\r\n    }\r\n\r\n    if (this.isFriendlyMode) {\r\n      this.sendFriendlyMessage();\r\n    } else {\r\n      this.sendOfficialMessage();\r\n    }\r\n  }\r\n\r\n  private sendOfficialMessage(): void {\r\n    this.messageService.sendMessage(this.newMessage).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          this.toastr.success('تم إرسال الرسالة الرسمية');\r\n          this.newMessage = '';\r\n          this.loadMessages();\r\n          this.cdr.detectChanges();\r\n        } else {\r\n          this.toastr.error(response.message || 'فشل إرسال الرسالة الرسمية');\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.toastr.error('حصل خطأ أثناء إرسال الرسالة الرسمية');\r\n      },\r\n    });\r\n  }\r\n\r\n  private sendFriendlyMessage(): void {\r\n    this.friendlyMessageService\r\n      .sendMessageToAdmin(0, this.newMessage)\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success) {\r\n            this.toastr.success('تم إرسال الرسالة الودية');\r\n            this.newMessage = '';\r\n            this.loadMessages();\r\n            this.cdr.detectChanges();\r\n          } else {\r\n            this.toastr.error(response.message || 'فشل إرسال الرسالة الودية');\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.toastr.error('حصل خطأ أثناء إرسال الرسالة الودية');\r\n        },\r\n      });\r\n  }\r\n\r\n  toggleMessageMode(): void {\r\n    this.isFriendlyMode = !this.isFriendlyMode;\r\n    this.messages = [];\r\n    this.friendlyMessages = [];\r\n    this.newMessage = '';\r\n    this.loadMessages();\r\n    // بعد السويتش نخلي الوضع أسفل، ثم يقدر المستخدم يطلع بحرية\r\n    this.isUserAtBottom = true;\r\n  }\r\n\r\n  get currentMessages(): any[] {\r\n    return this.isFriendlyMode ? this.friendlyMessages : this.messages;\r\n  }\r\n\r\n  get messageTypeLabel(): string {\r\n    return this.isFriendlyMode ? 'رسائل ودية' : 'رسائل رسمية';\r\n  }\r\n\r\n  get toggleButtonText(): string {\r\n    return this.isFriendlyMode\r\n      ? 'التبديل للرسائل الرسمية'\r\n      : 'التبديل للرسائل الودية';\r\n  }\r\n\r\n  private scrollToBottom(): void {\r\n    if (this.messagesContainer) {\r\n      const container = this.messagesContainer.nativeElement;\r\n      container.scrollTop = container.scrollHeight;\r\n    }\r\n  }\r\n\r\n  onScroll(): void {\r\n    if (!this.messagesContainer) return;\r\n    const container = this.messagesContainer.nativeElement as HTMLElement;\r\n    const position = container.scrollTop + container.clientHeight;\r\n    const height = container.scrollHeight;\r\n    const threshold = 2; // سماحية صغيرة\r\n    this.isUserAtBottom = position >= height - threshold;\r\n  }\r\n}\r\n","<div class=\"md:container mx-auto p-4\">\r\n  <!-- Header -->\r\n  <div class=\"mb-6\">\r\n    <h1 class=\"text-3xl font-bold text-white mb-2\">🎮 Friendlies</h1>\r\n    <p class=\"text-gray-400\">View friendly matches and player statistics</p>\r\n  </div>\r\n\r\n  <!-- Navigation Tabs -->\r\n  <div class=\"mb-6\">\r\n    <div class=\"flex gap-3\">\r\n      <button\r\n        (click)=\"setActiveTab('players')\"\r\n        [class.bg-blue-600]=\"activeTab === 'players'\"\r\n        [class.bg-gray-600]=\"activeTab !== 'players'\"\r\n        class=\"px-4 py-2 rounded-lg text-white font-semibold\"\r\n      >\r\n        👥 Players\r\n      </button>\r\n      <button\r\n        (click)=\"setActiveTab('matches')\"\r\n        [class.bg-blue-600]=\"activeTab === 'matches'\"\r\n        [class.bg-gray-600]=\"activeTab !== 'matches'\"\r\n        class=\"px-4 py-2 rounded-lg text-white font-semibold\"\r\n      >\r\n        ⚽ Matches\r\n      </button>\r\n      <button\r\n        (click)=\"setActiveTab('shutouts')\"\r\n        [class.bg-blue-600]=\"activeTab === 'shutouts'\"\r\n        [class.bg-gray-600]=\"activeTab !== 'shutouts'\"\r\n        class=\"px-4 py-2 rounded-lg text-white font-semibold\"\r\n      >\r\n        🔥 الصايمة \r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Content Area -->\r\n  <div class=\"bg-gray-800 rounded-lg p-3\">\r\n    <!-- Players Tab -->\r\n    <div *ngIf=\"activeTab === 'players'\">\r\n      <div class=\"mb-4\">\r\n        <h2 class=\"text-xl font-semibold text-white mb-2\">Players</h2>\r\n        <p class=\"text-gray-400\">\r\n          View all friendly players and their statistics\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Search Bar and Sorting Options -->\r\n      <div class=\"mb-4\">\r\n        <!-- Clear Search Button - Separate Row -->\r\n        <div class=\"mb-2\" *ngIf=\"playerSearchTerm.trim()\">\r\n          <button\r\n            (click)=\"clearPlayerSearch()\"\r\n            class=\"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors duration-200 flex items-center gap-2 text-sm\"\r\n          >\r\n            <svg\r\n              class=\"h-4 w-4\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                stroke-linecap=\"round\"\r\n                stroke-linejoin=\"round\"\r\n                stroke-width=\"2\"\r\n                d=\"M6 18L18 6M6 6l12 12\"\r\n              ></path>\r\n            </svg>\r\n            Clear Search\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Search and Sorting Row -->\r\n        <div class=\"flex gap-2 items-end\">\r\n          <!-- Search Input -->\r\n          <div class=\"relative flex-1\">\r\n            <input\r\n              type=\"text\"\r\n              [(ngModel)]=\"playerSearchTerm\"\r\n              (ngModelChange)=\"onPlayerSearchChange()\"\r\n              placeholder=\"Search players by name...\"\r\n              class=\"w-full py-2 pl-10 min-w-[150px] bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            />\r\n            <div\r\n              class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\"\r\n            >\r\n              <svg\r\n                class=\"h-5 w-5 text-gray-400\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  stroke-linecap=\"round\"\r\n                  stroke-linejoin=\"round\"\r\n                  stroke-width=\"2\"\r\n                  d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                ></path>\r\n              </svg>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Sorting Options -->\r\n          <div class=\"flex flex-col\">\r\n            <select\r\n              [(ngModel)]=\"currentPlayerSort\"\r\n              (ngModelChange)=\"onPlayerSortChange()\"\r\n              class=\"bg-gray-800 border border-gray-600 rounded-md text-white text-sm py-3 min-w-[150px]\"\r\n            >\r\n              <option [ngValue]=\"PlayerSortOption.MostMatches\">\r\n                الأكثر لعباً للمباريات\r\n              </option>\r\n              <option [ngValue]=\"PlayerSortOption.MostWins\">\r\n                الأكثر فوزاً\r\n              </option>\r\n              <option [ngValue]=\"PlayerSortOption.MostPoints\">\r\n                الأكثر تحقيقاً للنقاط\r\n              </option>\r\n              <option [ngValue]=\"PlayerSortOption.BestWinRate\">\r\n                أفضل نسبة فوز\r\n              </option>\r\n              <option [ngValue]=\"PlayerSortOption.BestPointDifference\">\r\n                أفضل فرق نقاط\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Search Results Counter -->\r\n        <div *ngIf=\"playerSearchTerm.trim()\" class=\"mt-2 text-sm text-gray-400\">\r\n          Found {{ getFilteredPlayers().length }} player{{\r\n            getFilteredPlayers().length !== 1 ? \"s\" : \"\"\r\n          }}\r\n          matching \"{{ playerSearchTerm }}\"\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div *ngIf=\"isLoadingPlayers\" class=\"flex justify-center py-8\">\r\n        <div class=\"rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n\r\n      <!-- Players Grid -->\r\n      <div\r\n        *ngIf=\"!isLoadingPlayers\"\r\n        class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\"\r\n      >\r\n        <div\r\n          *ngFor=\"let player of getFilteredPlayers()\"\r\n          class=\"p-3 rounded-lg bg-gray-700 hover:bg-gray-600\"\r\n        >\r\n          <!-- First Row: Name and Total/Difference -->\r\n          <div class=\"flex items-center justify-between\">\r\n            <h3 class=\"text-white font-bold text-base\">\r\n              {{ player.fullName }}\r\n            </h3>\r\n            <div class=\"text-sm font-bold mb-3\">\r\n              <span\r\n                [class.text-green-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) > 0\r\n                \"\r\n                [class.text-red-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) < 0\r\n                \"\r\n                [class.text-yellow-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) === 0\r\n                \"\r\n              >\r\n                {{ getPlayerScoreDisplay(player.playerId) }}\r\n              </span>\r\n              <span\r\n                [class.text-green-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) > 0\r\n                \"\r\n                [class.text-red-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) < 0\r\n                \"\r\n                [class.text-yellow-400]=\"\r\n                  getPlayerScoreDifference(player.playerId) === 0\r\n                \"\r\n                class=\"ml-1\"\r\n              >\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Second Row: Matches/Stats and W/L/D -->\r\n          <div class=\"flex items-center justify-between\">\r\n            <div class=\"text-gray-400 text-sm font-semibold\">\r\n              {{ player.totalMatches }} matches •\r\n              {{ player.winRate.toFixed(1) }}%\r\n            </div>\r\n            <div class=\"flex items-center space-x-1\">\r\n              <span class=\"text-green-400 font-bold text-sm\"\r\n                >{{ player.totalWins }}W</span\r\n              >\r\n              <span class=\"text-red-400 font-bold text-sm px-3\"\r\n                >{{ player.totalLosses }}L</span\r\n              >\r\n              <span class=\"text-yellow-400 font-bold text-sm\"\r\n                >{{ player.totalDraws }}D</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- No Players -->\r\n      <div\r\n        *ngIf=\"!isLoadingPlayers && getFilteredPlayers().length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p *ngIf=\"!playerSearchTerm.trim()\" class=\"text-gray-400\">\r\n          No players found\r\n        </p>\r\n        <p *ngIf=\"playerSearchTerm.trim()\" class=\"red-400\">\r\n          No players found matching \"{{ playerSearchTerm }}\"\r\n        </p>\r\n      </div>\r\n\r\n\r\n    </div>\r\n\r\n    <!-- Matches Tab -->\r\n    <div *ngIf=\"activeTab === 'matches'\">\r\n      <!-- Filters Section -->\r\n      <div class=\"mb-6 p-4 bg-gray-700 rounded-lg\">\r\n        <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label class=\"block text-sm font-medium mb-1 text-gray-300\"\r\n              >Date Range</label\r\n            >\r\n            <select\r\n              [(ngModel)]=\"filterForm.dateFilter\"\r\n              (ngModelChange)=\"onFilterChange()\"\r\n              class=\"border border-gray-600 p-2 w-full rounded bg-gray-800 text-white\"\r\n            >\r\n              <option [ngValue]=\"DateFilter.AllTime\">All Time</option>\r\n              <option [ngValue]=\"DateFilter.Today\">Today</option>\r\n              <option [ngValue]=\"DateFilter.Last3Days\">Last 3 Days</option>\r\n              <option [ngValue]=\"DateFilter.LastWeek\">Last Week</option>\r\n              <option [ngValue]=\"DateFilter.LastMonth\">Last Month</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium mb-1 text-gray-300\"\r\n              >Player</label\r\n            >\r\n            <select\r\n              [(ngModel)]=\"filterForm.player1Id\"\r\n              (ngModelChange)=\"onFilterChange()\"\r\n              class=\"border border-gray-600 p-2 w-full rounded bg-gray-800 text-white\"\r\n            >\r\n              <option [ngValue]=\"0\">All Players</option>\r\n              <option\r\n                *ngFor=\"let player of players\"\r\n                [ngValue]=\"player.playerId\"\r\n              >\r\n                {{ player.fullName }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label class=\"block text-sm font-medium mb-1 text-gray-300\"\r\n              >Opponent</label\r\n            >\r\n            <select\r\n              [(ngModel)]=\"filterForm.player2Id\"\r\n              (ngModelChange)=\"onFilterChange()\"\r\n              class=\"border border-gray-600 p-2 w-full rounded bg-gray-800 text-white\"\r\n            >\r\n              <option [ngValue]=\"0\">All Players</option>\r\n              <option\r\n                *ngFor=\"let player of players\"\r\n                [ngValue]=\"player.playerId\"\r\n              >\r\n                {{ player.fullName }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div class=\"flex justify-center mt-4\">\r\n          <button\r\n            class=\"bg-gray-600 px-4 py-2 text-white rounded hover:bg-gray-700 transition\"\r\n            (click)=\"clearFilters()\"\r\n          >\r\n            Clear Filters\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div *ngIf=\"isLoadingMatches\" class=\"flex justify-center py-8\">\r\n        <div class=\"rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n\r\n      <!-- Matches Table -->\r\n      <div *ngIf=\"!isLoadingMatches\" class=\"overflow-x-auto\">\r\n        <table class=\"w-full text-white\">\r\n          <thead class=\"text-center\">\r\n            <tr class=\"border-b border-gray-600\">\r\n              <th class=\"p-3\">Date</th>\r\n              <th class=\"p-3\">\r\n                {{ filterForm.player1Id ? \"Selected Player\" : \"Player 1\" }}\r\n              </th>\r\n              <th class=\"p-3\">Score</th>\r\n              <th class=\"p-3\">\r\n                {{ filterForm.player1Id ? \"Opponent\" : \"Player 2\" }}\r\n              </th>\r\n              <th class=\"p-3\">Winner</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"let match of getPaginatedMatches()\"\r\n              class=\"border-b border-gray-700 hover:bg-gray-800\"\r\n            >\r\n              <td class=\"p-3\">\r\n                {{ match.playedOn | date : \"shortDate\" }}\r\n              </td>\r\n              <td class=\"p-3\">\r\n                {{ match.player1Name }}\r\n              </td>\r\n              <td class=\"p-3 text-center\">\r\n                <span class=\"font-bold text-lg\">\r\n                  {{ match.player1Score }} - {{ match.player2Score }}\r\n                </span>\r\n              </td>\r\n              <td class=\"p-3\">\r\n                {{ match.player2Name }}\r\n              </td>\r\n              <td class=\"p-3 text-center\">\r\n                <span\r\n                  [class.text-green-400]=\"\r\n                    match.winner === match.player1Name ||\r\n                    match.winner === match.player2Name\r\n                  \"\r\n                  [class.text-yellow-400]=\"match.winner === 'Draw'\"\r\n                  class=\"font-semibold\"\r\n                >\r\n                  {{ match.winner }}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- Pagination -->\r\n      <div\r\n        *ngIf=\"totalPages > 1 && !isLoadingMatches\"\r\n        class=\"flex justify-center mt-6\"\r\n      >\r\n        <div class=\"flex space-x-2\">\r\n          <button\r\n            class=\"bg-gray-600 px-3 py-2 text-white rounded hover:bg-gray-700 transition\"\r\n            [disabled]=\"currentPage === 1\"\r\n            (click)=\"changePage(currentPage - 1)\"\r\n          >\r\n            Previous\r\n          </button>\r\n\r\n          <span\r\n            *ngFor=\"let page of [].constructor(totalPages); let i = index\"\r\n            class=\"flex\"\r\n          >\r\n            <button\r\n              class=\"px-3 py-2 text-white rounded transition\"\r\n              [class.bg-blue-600]=\"currentPage === i + 1\"\r\n              [class.bg-gray-600]=\"currentPage !== i + 1\"\r\n              [class.hover:bg-blue-700]=\"currentPage === i + 1\"\r\n              [class.hover:bg-gray-700]=\"currentPage !== i + 1\"\r\n              (click)=\"changePage(i + 1)\"\r\n            >\r\n              {{ i + 1 }}\r\n            </button>\r\n          </span>\r\n\r\n          <button\r\n            class=\"bg-gray-600 px-3 py-2 text-white rounded hover:bg-gray-700 transition\"\r\n            [disabled]=\"currentPage === totalPages\"\r\n            (click)=\"changePage(currentPage + 1)\"\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!hasActiveFilters || !noMatchesFound\"\r\n        class=\"text-center mt-4 text-gray-300\"\r\n      >\r\n        Showing {{ (currentPage - 1) * itemsPerPage + 1 }} -\r\n        {{ Math.min(currentPage * itemsPerPage, getDisplayMatches().length) }}\r\n        of {{ getDisplayMatches().length }} matches\r\n      </div>\r\n\r\n      <!-- No Matches -->\r\n      <div\r\n        *ngIf=\"!isLoadingMatches && getPaginatedMatches().length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p *ngIf=\"!hasActiveFilters\" class=\"text-gray-400\">No matches found</p>\r\n        <p *ngIf=\"hasActiveFilters && noMatchesFound\" class=\"text-red-400\">\r\n          No matches found\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Shutouts Tab -->\r\n    <div *ngIf=\"activeTab === 'shutouts'\">\r\n      <div class=\"mb-4\">\r\n        <h2 class=\"text-xl font-semibold text-white mb-2\">Shutouts</h2>\r\n        <p class=\"text-gray-400\">{{ getSelectedPlayersText() }}</p>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div *ngIf=\"isLoadingShutouts\" class=\"flex justify-center py-8\">\r\n        <div class=\"rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n\r\n      <!-- Shutouts Table -->\r\n      <div\r\n        *ngIf=\"!isLoadingShutouts && (!hasActiveFilters || !noShutoutsFound)\"\r\n        class=\"overflow-x-auto\"\r\n      >\r\n        <table class=\"w-full text-white\">\r\n          <thead>\r\n            <tr class=\"border-b text-center border-gray-600\">\r\n              <th class=\"py-2\">Date</th>\r\n              <th class=\"py-2\">Winner</th>\r\n              <th class=\"text-center py-2\">Score</th>\r\n              <th class=\"py-2\">Loser</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"let shutout of getDisplayShutouts()\"\r\n              class=\"border-b border-gray-700 hover:bg-gray-700\"\r\n            >\r\n              <td class=\"py-2\">\r\n                {{ shutout.achievedOn | date : \"dd/M/yyyy\" }}\r\n              </td>\r\n              <td class=\"py-2 text-green-400 font-semibold\">\r\n                {{ shutout.winnerName }}\r\n              </td>\r\n              <td class=\"py-2 text-center\">\r\n                <span class=\"font-bold\"\r\n                  >{{ shutout.winnerScore }} - {{ shutout.loserScore }}</span\r\n                >\r\n              </td>\r\n              <td class=\"py-2 text-red-400 font-semibold\">\r\n                {{ shutout.loserName }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <!-- No Shutouts -->\r\n      <div\r\n        *ngIf=\"!isLoadingShutouts && getDisplayShutouts().length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p *ngIf=\"!hasActiveFilters\" class=\"text-gray-400\">No shutouts found</p>\r\n        <p *ngIf=\"hasActiveFilters && noShutoutsFound\" class=\"text-red-400\">\r\n          No shutouts found\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FriendlyMatchService } from '../../core/services/friendly-match.service';\r\nimport {\r\n  FriendlyPlayerDto,\r\n  FriendlyMatchHistoryDto,\r\n  ShutoutResultDto,\r\n  DateFilter,\r\n} from 'friendly-match-types';\r\n\r\n// Enum for player sorting options\r\nexport enum PlayerSortOption {\r\n  MostMatches = 'mostMatches',\r\n  MostWins = 'mostWins',\r\n  MostPoints = 'mostPoints',\r\n  BestWinRate = 'bestWinRate',\r\n  BestPointDifference = 'bestPointDifference',\r\n}\r\n\r\n@Component({\r\n  selector: 'app-friendlies-view',\r\n  templateUrl: './friendlies-view.component.html',\r\n  styleUrls: ['./friendlies-view.component.css'],\r\n})\r\nexport class FriendliesViewComponent implements OnInit {\r\n  // Tab management\r\n  activeTab: 'players' | 'matches' | 'shutouts' = 'matches';\r\n\r\n  // Data\r\n  players: FriendlyPlayerDto[] = [];\r\n  matches: FriendlyMatchHistoryDto[] = [];\r\n  shutouts: ShutoutResultDto[] = [];\r\n\r\n  // Loading states\r\n  isLoadingPlayers: boolean = false;\r\n  isLoadingMatches: boolean = false;\r\n  isLoadingShutouts: boolean = false;\r\n\r\n  // Filtered data\r\n  filteredMatches: FriendlyMatchHistoryDto[] = [];\r\n  filteredShutouts: ShutoutResultDto[] = [];\r\n\r\n  // Filter state tracking\r\n  hasActiveFilters: boolean = false;\r\n  noMatchesFound: boolean = false;\r\n  noShutoutsFound: boolean = false;\r\n\r\n  // Player search\r\n  playerSearchTerm: string = '';\r\n\r\n  // Player scores cache\r\n  playerScores: Map<number, { scored: number; conceded: number }> = new Map();\r\n\r\n  // Pagination\r\n  currentPage = 1;\r\n  itemsPerPage = 15;\r\n  totalPages = 0;\r\n  Math = Math; // Make Math available in template\r\n\r\n  // Filter options\r\n  filterForm = {\r\n    player1Id: 0,\r\n    player2Id: 0,\r\n    dateFilter: DateFilter.AllTime,\r\n  };\r\n  DateFilter = DateFilter; // Make enum available in template\r\n\r\n  // Player sorting\r\n  currentPlayerSort: PlayerSortOption = PlayerSortOption.MostMatches;\r\n  PlayerSortOption = PlayerSortOption; // Make enum available in template\r\n  sortedPlayers: FriendlyPlayerDto[] = [];\r\n\r\n  constructor(private friendlyMatchService: FriendlyMatchService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadInitialData();\r\n  }\r\n\r\n  loadInitialData(): void {\r\n    this.loadPlayers();\r\n    this.loadAllMatches();\r\n    this.loadAllShutouts();\r\n  }\r\n\r\n  // Tab management\r\n  setActiveTab(tab: 'players' | 'matches' | 'shutouts'): void {\r\n    this.activeTab = tab;\r\n\r\n    // Apply filters when switching to matches/shutouts tabs\r\n    if (tab === 'matches' || tab === 'shutouts') {\r\n      this.applyFilters();\r\n    }\r\n  }\r\n\r\n  // Player management\r\n  loadPlayers(): void {\r\n    this.isLoadingPlayers = true;\r\n    this.friendlyMatchService.getAllFriendlyPlayers().subscribe({\r\n      next: (players) => {\r\n        this.players = players;\r\n        this.isLoadingPlayers = false;\r\n\r\n        // Apply filters after all data is loaded\r\n        this.applyFilters();\r\n        this.sortPlayers(); // Sort players after loading\r\n      },\r\n      error: (error) => {\r\n        this.isLoadingPlayers = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  // Player sorting methods\r\n  sortPlayers(): void {\r\n    // Wait for matches to be loaded before sorting\r\n    if (this.matches.length === 0) {\r\n      this.sortedPlayers = [...this.players];\r\n      return;\r\n    }\r\n\r\n    this.sortedPlayers = [...this.players];\r\n\r\n    switch (this.currentPlayerSort) {\r\n      case PlayerSortOption.MostMatches:\r\n        this.sortByMostMatches();\r\n        break;\r\n      case PlayerSortOption.MostWins:\r\n        this.sortByMostWins();\r\n        break;\r\n      case PlayerSortOption.MostPoints:\r\n        this.sortByMostPoints();\r\n        break;\r\n      case PlayerSortOption.BestWinRate:\r\n        this.sortByBestWinRate();\r\n        break;\r\n      case PlayerSortOption.BestPointDifference:\r\n        this.sortByBestPointDifference();\r\n        break;\r\n      default:\r\n        this.sortByMostMatches();\r\n    }\r\n  }\r\n\r\n  sortByMostMatches(): void {\r\n    this.sortedPlayers.sort(\r\n      (a, b) => (b.totalMatches || 0) - (a.totalMatches || 0)\r\n    );\r\n  }\r\n\r\n  sortByMostWins(): void {\r\n    this.sortedPlayers.sort((a, b) => (b.totalWins || 0) - (a.totalWins || 0));\r\n  }\r\n\r\n  sortByMostPoints(): void {\r\n    this.sortedPlayers.sort((a, b) => {\r\n      const aTotalPoints = this.calculatePlayerTotalPoints(a);\r\n      const bTotalPoints = this.calculatePlayerTotalPoints(b);\r\n      return bTotalPoints - aTotalPoints;\r\n    });\r\n  }\r\n\r\n  sortByBestWinRate(): void {\r\n    this.sortedPlayers.sort((a, b) => (b.winRate || 0) - (a.winRate || 0));\r\n  }\r\n\r\n  sortByBestPointDifference(): void {\r\n    this.sortedPlayers.sort((a, b) => {\r\n      const aPointDiff = this.calculatePlayerPointDifference(a);\r\n      const bPointDiff = this.calculatePlayerPointDifference(b);\r\n      return bPointDiff - aPointDiff;\r\n    });\r\n  }\r\n\r\n  calculatePlayerTotalPoints(player: FriendlyPlayerDto): number {\r\n    // Calculate total points from actual matches\r\n    let totalPoints = 0;\r\n\r\n    this.matches.forEach((match) => {\r\n      if (match.player1Name === player.fullName) {\r\n        totalPoints += match.player1Score || 0;\r\n      } else if (match.player2Name === player.fullName) {\r\n        totalPoints += match.player2Score || 0;\r\n      }\r\n    });\r\n\r\n    return totalPoints;\r\n  }\r\n\r\n  calculatePlayerPointDifference(player: FriendlyPlayerDto): number {\r\n    // Calculate point difference from actual matches\r\n    let pointsScored = 0;\r\n    let pointsConceded = 0;\r\n\r\n    this.matches.forEach((match) => {\r\n      if (match.player1Name === player.fullName) {\r\n        pointsScored += match.player1Score || 0;\r\n        pointsConceded += match.player2Score || 0;\r\n      } else if (match.player2Name === player.fullName) {\r\n        pointsScored += match.player2Score || 0;\r\n        pointsConceded += match.player1Score || 0;\r\n      }\r\n    });\r\n\r\n    return pointsScored - pointsConceded;\r\n  }\r\n\r\n  onPlayerSortChange(): void {\r\n    this.sortPlayers();\r\n  }\r\n\r\n  getCurrentSortLabel(): string {\r\n    switch (this.currentPlayerSort) {\r\n      case PlayerSortOption.MostMatches:\r\n        return 'الأكثر لعباً للمباريات';\r\n      case PlayerSortOption.MostWins:\r\n        return 'الأكثر فوزاً';\r\n      case PlayerSortOption.MostPoints:\r\n        return 'الأكثر تحقيقاً للنقاط';\r\n      case PlayerSortOption.BestWinRate:\r\n        return 'أفضل نسبة فوز';\r\n      case PlayerSortOption.BestPointDifference:\r\n        return 'أفضل فرق نقاط';\r\n      default:\r\n        return 'الأكثر لعباً للمباريات';\r\n    }\r\n  }\r\n\r\n  // Player search methods\r\n  onPlayerSearchChange(): void {\r\n    // This method is called when the search term changes\r\n    // The filtering is handled in getFilteredPlayers() method\r\n  }\r\n\r\n  clearPlayerSearch(): void {\r\n    this.playerSearchTerm = '';\r\n  }\r\n\r\n  getFilteredPlayers(): FriendlyPlayerDto[] {\r\n    if (!this.playerSearchTerm.trim()) {\r\n      return this.sortedPlayers;\r\n    }\r\n\r\n    const searchTerm = this.playerSearchTerm.toLowerCase().trim();\r\n    return this.sortedPlayers.filter((player) =>\r\n      player.fullName.toLowerCase().includes(searchTerm)\r\n    );\r\n  }\r\n\r\n  // Match management\r\n  loadAllMatches(): void {\r\n    this.isLoadingMatches = true;\r\n    this.friendlyMatchService.getAllFriendlyMatches().subscribe({\r\n      next: (matches) => {\r\n        this.matches = matches;\r\n        this.calculatePlayerScores(matches);\r\n        this.isLoadingMatches = false;\r\n\r\n        // Calculate total pages for pagination\r\n        this.totalPages = Math.ceil(matches.length / this.itemsPerPage);\r\n\r\n        // Re-sort players after loading matches to update points calculations\r\n        if (this.players.length > 0) {\r\n          this.sortPlayers();\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.isLoadingMatches = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  loadAllShutouts(): void {\r\n    this.isLoadingShutouts = true;\r\n    this.friendlyMatchService.getAllShutoutResults().subscribe({\r\n      next: (shutouts) => {\r\n        this.shutouts = shutouts;\r\n        this.isLoadingShutouts = false;\r\n      },\r\n      error: (error) => {\r\n        this.isLoadingShutouts = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  // Score calculation methods\r\n  calculatePlayerScores(matches: FriendlyMatchHistoryDto[]): void {\r\n    this.playerScores.clear();\r\n\r\n    matches.forEach((match) => {\r\n      // Find player IDs by names\r\n      const player1 = this.players.find(\r\n        (p) => p.fullName === match.player1Name\r\n      );\r\n      const player2 = this.players.find(\r\n        (p) => p.fullName === match.player2Name\r\n      );\r\n\r\n      if (player1) {\r\n        const currentScore = this.playerScores.get(player1.playerId) || {\r\n          scored: 0,\r\n          conceded: 0,\r\n        };\r\n        currentScore.scored += match.player1Score;\r\n        currentScore.conceded += match.player2Score;\r\n        this.playerScores.set(player1.playerId, currentScore);\r\n      }\r\n\r\n      if (player2) {\r\n        const currentScore = this.playerScores.get(player2.playerId) || {\r\n          scored: 0,\r\n          conceded: 0,\r\n        };\r\n        currentScore.scored += match.player2Score;\r\n        currentScore.conceded += match.player1Score;\r\n        this.playerScores.set(player2.playerId, currentScore);\r\n      }\r\n    });\r\n  }\r\n\r\n  getPlayerScore(playerId: number): { scored: number; conceded: number } {\r\n    return this.playerScores.get(playerId) || { scored: 0, conceded: 0 };\r\n  }\r\n\r\n  getPlayerScoreDifference(playerId: number): number {\r\n    const score = this.getPlayerScore(playerId);\r\n    return score.scored - score.conceded;\r\n  }\r\n\r\n  getPlayerScoreDisplay(playerId: number): string {\r\n    const score = this.getPlayerScore(playerId);\r\n    const diff = this.getPlayerScoreDifference(playerId);\r\n    const diffSign = diff >= 0 ? '+' : '';\r\n    return `${score.scored} wins, ${score.conceded} losses (${diffSign}${diff})`;\r\n  }\r\n\r\n  // Utility methods\r\n  getDisplayMatches(): FriendlyMatchHistoryDto[] {\r\n    if (this.hasActiveFilters && this.noMatchesFound) {\r\n      return [];\r\n    }\r\n    return this.filteredMatches.length > 0\r\n      ? this.filteredMatches\r\n      : this.matches;\r\n  }\r\n\r\n  getDisplayShutouts(): ShutoutResultDto[] {\r\n    if (this.hasActiveFilters && this.noShutoutsFound) {\r\n      return [];\r\n    }\r\n    return this.filteredShutouts.length > 0\r\n      ? this.filteredShutouts\r\n      : this.shutouts;\r\n  }\r\n\r\n  isPlayerSelected(player: FriendlyPlayerDto): boolean {\r\n    return false; // No player selection, so no player is \"selected\"\r\n  }\r\n\r\n  getSelectedPlayersText(): string {\r\n    let text = 'All matches';\r\n\r\n    if (this.filterForm.player1Id || this.filterForm.player2Id) {\r\n      const filters = [];\r\n      if (this.filterForm.player1Id) {\r\n        const player1 = this.players.find(\r\n          (p) => p.playerId === this.filterForm.player1Id\r\n        );\r\n        if (player1) filters.push(player1.fullName);\r\n      }\r\n      if (this.filterForm.player2Id) {\r\n        const player2 = this.players.find(\r\n          (p) => p.playerId === this.filterForm.player2Id\r\n        );\r\n        if (player2) filters.push(player2.fullName);\r\n      }\r\n\r\n      if (filters.length === 1) {\r\n        text = `${filters[0]} matches (selected player shown on left)`;\r\n      } else if (filters.length === 2) {\r\n        text = `${filters[0]} vs ${filters[1]}`;\r\n      }\r\n    }\r\n\r\n    if (this.filterForm.dateFilter !== DateFilter.AllTime) {\r\n      const dateText = this.getDateFilterText(this.filterForm.dateFilter);\r\n      text += ` (${dateText})`;\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  getDateFilterText(dateFilter: DateFilter): string {\r\n    switch (dateFilter) {\r\n      case DateFilter.Today:\r\n        return 'Today';\r\n      case DateFilter.Last3Days:\r\n        return 'Last 3 Days';\r\n      case DateFilter.LastWeek:\r\n        return 'Last Week';\r\n      case DateFilter.LastMonth:\r\n        return 'Last Month';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  // Filter and pagination methods\r\n  onFilterChange(): void {\r\n    this.currentPage = 1;\r\n    this.applyFilters();\r\n  }\r\n\r\n  clearFilters(): void {\r\n    this.filterForm = {\r\n      player1Id: 0,\r\n      player2Id: 0,\r\n      dateFilter: DateFilter.AllTime,\r\n    };\r\n    this.currentPage = 1;\r\n    this.hasActiveFilters = false;\r\n    this.noMatchesFound = false;\r\n    this.noShutoutsFound = false;\r\n    this.applyFilters();\r\n  }\r\n\r\n  applyFilters(): void {\r\n    let filtered = [...this.matches];\r\n\r\n    // Check if there are active filters\r\n    this.hasActiveFilters =\r\n      this.filterForm.dateFilter !== DateFilter.AllTime ||\r\n      this.filterForm.player1Id !== 0 ||\r\n      this.filterForm.player2Id !== 0;\r\n\r\n    // Apply date filter\r\n    if (this.filterForm.dateFilter !== DateFilter.AllTime) {\r\n      const now = new Date();\r\n      let cutoffDate: Date;\r\n\r\n      switch (this.filterForm.dateFilter) {\r\n        case DateFilter.Today:\r\n          cutoffDate = new Date(\r\n            now.getFullYear(),\r\n            now.getMonth(),\r\n            now.getDate()\r\n          );\r\n          break;\r\n        case DateFilter.Last3Days:\r\n          cutoffDate = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case DateFilter.LastWeek:\r\n          cutoffDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case DateFilter.LastMonth:\r\n          cutoffDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        default:\r\n          cutoffDate = new Date(0);\r\n      }\r\n\r\n      filtered = filtered.filter(\r\n        (match) => new Date(match.playedOn) >= cutoffDate\r\n      );\r\n    }\r\n\r\n    // Apply player filters\r\n    if (this.filterForm.player1Id) {\r\n      const player1 = this.players.find(\r\n        (p) => p.playerId === this.filterForm.player1Id\r\n      );\r\n      if (player1) {\r\n        filtered = filtered.filter(\r\n          (match) =>\r\n            match.player1Name === player1.fullName ||\r\n            match.player2Name === player1.fullName\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.filterForm.player2Id) {\r\n      const player2 = this.players.find(\r\n        (p) => p.playerId === this.filterForm.player2Id\r\n      );\r\n      if (player2) {\r\n        filtered = filtered.filter(\r\n          (match) =>\r\n            match.player1Name === player2.fullName ||\r\n            match.player2Name === player2.fullName\r\n        );\r\n      }\r\n    }\r\n\r\n    // Sort by date (newest first)\r\n    filtered.sort(\r\n      (a, b) => new Date(b.playedOn).getTime() - new Date(a.playedOn).getTime()\r\n    );\r\n\r\n    this.filteredMatches = filtered;\r\n    this.noMatchesFound = this.hasActiveFilters && filtered.length === 0;\r\n    this.totalPages = Math.ceil(\r\n      this.getDisplayMatches().length / this.itemsPerPage\r\n    );\r\n\r\n    // Also apply filters to shutouts\r\n    let filteredShutouts = [...this.shutouts];\r\n\r\n    // Apply date filter to shutouts\r\n    if (this.filterForm.dateFilter !== DateFilter.AllTime) {\r\n      const now = new Date();\r\n      let cutoffDate: Date;\r\n\r\n      switch (this.filterForm.dateFilter) {\r\n        case DateFilter.Today:\r\n          cutoffDate = new Date(\r\n            now.getFullYear(),\r\n            now.getMonth(),\r\n            now.getDate()\r\n          );\r\n          break;\r\n        case DateFilter.Last3Days:\r\n          cutoffDate = new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case DateFilter.LastWeek:\r\n          cutoffDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        case DateFilter.LastMonth:\r\n          cutoffDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);\r\n          break;\r\n        default:\r\n          cutoffDate = new Date(0);\r\n      }\r\n\r\n      filteredShutouts = filteredShutouts.filter(\r\n        (shutout) => new Date(shutout.achievedOn) >= cutoffDate\r\n      );\r\n    }\r\n\r\n    // Apply player filters to shutouts\r\n    if (this.filterForm.player1Id) {\r\n      const player1 = this.players.find(\r\n        (p) => p.playerId === this.filterForm.player1Id\r\n      );\r\n      if (player1) {\r\n        filteredShutouts = filteredShutouts.filter(\r\n          (shutout) =>\r\n            shutout.winnerName === player1.fullName ||\r\n            shutout.loserName === player1.fullName\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.filterForm.player2Id) {\r\n      const player2 = this.players.find(\r\n        (p) => p.playerId === this.filterForm.player2Id\r\n      );\r\n      if (player2) {\r\n        filteredShutouts = filteredShutouts.filter(\r\n          (shutout) =>\r\n            shutout.winnerName === player2.fullName ||\r\n            shutout.loserName === player2.fullName\r\n        );\r\n      }\r\n    }\r\n\r\n    // Sort shutouts by date (newest first)\r\n    filteredShutouts.sort(\r\n      (a, b) =>\r\n        new Date(b.achievedOn).getTime() - new Date(a.achievedOn).getTime()\r\n    );\r\n\r\n    this.filteredShutouts = filteredShutouts;\r\n    this.noShutoutsFound =\r\n      this.hasActiveFilters && filteredShutouts.length === 0;\r\n\r\n    // Update total pages for pagination\r\n    this.totalPages = Math.ceil(\r\n      this.getDisplayMatches().length / this.itemsPerPage\r\n    );\r\n  }\r\n\r\n  getPaginatedMatches(): FriendlyMatchHistoryDto[] {\r\n    const startIndex = (this.currentPage - 1) * this.itemsPerPage;\r\n    const endIndex = startIndex + this.itemsPerPage;\r\n    const matches = this.getDisplayMatches().slice(startIndex, endIndex);\r\n\r\n    // If a player is selected, reorder matches to show selected player on the left\r\n    if (this.filterForm.player1Id) {\r\n      return matches.map((match) => this.reorderMatchForSelectedPlayer(match));\r\n    }\r\n\r\n    return matches;\r\n  }\r\n\r\n  reorderMatchForSelectedPlayer(\r\n    match: FriendlyMatchHistoryDto\r\n  ): FriendlyMatchHistoryDto {\r\n    const selectedPlayer = this.players.find(\r\n      (p) => p.playerId === this.filterForm.player1Id\r\n    );\r\n\r\n    if (!selectedPlayer) return match;\r\n\r\n    // If selected player is player2, swap the order\r\n    if (match.player2Name === selectedPlayer.fullName) {\r\n      return {\r\n        ...match,\r\n        player1Name: match.player2Name,\r\n        player2Name: match.player1Name,\r\n        player1Score: match.player2Score,\r\n        player2Score: match.player1Score,\r\n        // Keep winner as is since it's the actual winner name\r\n      };\r\n    }\r\n\r\n    return match;\r\n  }\r\n\r\n  changePage(page: number): void {\r\n    if (page >= 1 && page <= this.totalPages) {\r\n      this.currentPage = page;\r\n    }\r\n  }\r\n}\r\n","<div class=\"container mx-auto md:p-4 p-2 max-w-7xl\">\r\n  <!-- Header -->\r\n  <div class=\"mb-6\">\r\n    <h1 class=\"text-3xl font-bold text-white mb-2\">👥 Teams Tournament</h1>\r\n    <p class=\"text-gray-400\">View teams standings and tournament progress</p>\r\n  </div>\r\n\r\n  <!-- Tabs Navigation -->\r\n  <div class=\"mb-6\">\r\n    <div class=\"border-b border-gray-700\">\r\n      <nav class=\"-mb-px flex space-x-8\">\r\n        <button\r\n          (click)=\"activeTab = 'current'\"\r\n          [class]=\"\r\n            activeTab === 'current'\r\n              ? 'border-blue-500 font-bold text-blue-400 border-b-2 py-2 px-1 text-sm '\r\n              : 'border-transparent text-gray-100 hover:text-gray-300 hover:border-gray-300 border-b-2 py-2 px-1 text-sm font-medium'\r\n          \"\r\n        >\r\n          🏆 البطولة الحالية\r\n        </button>\r\n        <button\r\n          (click)=\"activeTab = 'archive'\"\r\n          [class]=\"\r\n            activeTab === 'archive'\r\n              ? 'border-blue-500 font-bold text-blue-400 border-b-2 py-2 px-1 text-sm '\r\n              : 'border-transparent text-gray-100 hover:text-gray-300 hover:border-gray-300 border-b-2 py-2 px-1 text-sm font-medium'\r\n          \"\r\n        >\r\n          📚 الأرشيف\r\n        </button>\r\n      </nav>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Current Tournament Tab -->\r\n  <div *ngIf=\"activeTab === 'current'\">\r\n    <!-- Loading State -->\r\n    <div *ngIf=\"isLoading\" class=\"flex justify-center py-12\">\r\n      <div\r\n        class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"\r\n      ></div>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div\r\n      *ngIf=\"errorMessage && !isLoading\"\r\n      class=\"bg-red-900 text-white p-4 rounded-lg mb-6\"\r\n    >\r\n      <h3 class=\"font-bold mb-2\">Error</h3>\r\n      <p>{{ errorMessage }}</p>\r\n      <button\r\n        (click)=\"loadActiveTournament()\"\r\n        class=\"mt-3 bg-red-700 hover:bg-red-600 px-4 py-2 rounded transition-colors\"\r\n      >\r\n        Try Again\r\n      </button>\r\n    </div>\r\n\r\n    <!-- No Active Tournament -->\r\n    <div\r\n      *ngIf=\"!isLoading && !errorMessage && !activeTournament\"\r\n      class=\"text-center py-12\"\r\n    >\r\n      <div class=\"bg-gray-800 rounded-lg p-8 max-w-md mx-auto\">\r\n        <h2 class=\"text-2xl font-bold text-white mb-4\">\r\n          📅 No Active Tournament\r\n        </h2>\r\n        <p class=\"text-gray-400 mb-4\">\r\n          There is currently no active teams tournament.\r\n        </p>\r\n        <p class=\"text-gray-500 text-sm\">\r\n          Check back later or contact the administrator.\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Tournament Content -->\r\n    <div *ngIf=\"!isLoading && !errorMessage && activeTournament\">\r\n      <!-- Tournament Info Card -->\r\n      <div class=\"bg-gray-800 rounded-lg p-6 mb-6\">\r\n        <div\r\n          class=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\"\r\n        >\r\n          <div>\r\n            <h2 class=\"text-2xl font-bold text-white mb-3\">\r\n              {{ activeTournament.name }}\r\n            </h2>\r\n            <div class=\"flex flex-wrap gap-4 text-sm\">\r\n              <span class=\"bg-gray-700 px-3 py-1 rounded-full\">\r\n                <strong>Status:</strong>\r\n                <span [class]=\"getStatusColor(activeTournament.status)\">\r\n                  {{ activeTournament.status }}\r\n                </span>\r\n              </span>\r\n              <span class=\"bg-gray-700 px-3 py-1 rounded-full\">\r\n                <strong>System:</strong> {{ activeTournament.systemOfScoring }}\r\n              </span>\r\n              <span class=\"bg-gray-700 px-3 py-1 rounded-full\">\r\n                <strong>Teams:</strong> {{ activeTournament.teamCount }}\r\n              </span>\r\n              <span class=\"bg-gray-700 px-3 py-1 rounded-full\">\r\n                <strong>Players per Team:</strong>\r\n                {{ activeTournament.playersPerTeam }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Champion Badge -->\r\n          <div\r\n            *ngIf=\"\r\n              activeTournament.status === 'Finished' &&\r\n              activeTournament.championTeamName\r\n            \"\r\n            class=\"mt-4 lg:mt-0\"\r\n          >\r\n            <div\r\n              class=\"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black px-6 py-3 rounded-lg font-bold text-center\"\r\n            >\r\n              🏆 Champion: {{ activeTournament.championTeamName }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stats Cards -->\r\n      <div class=\"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n        <div class=\"bg-blue-600 rounded-lg p-4 text-center text-white\">\r\n          <div class=\"text-2xl font-bold\">\r\n            {{ activeTournament.teams.length }}\r\n          </div>\r\n          <div class=\"text-blue-100 text-sm\">Teams</div>\r\n        </div>\r\n        <div class=\"bg-green-600 rounded-lg p-4 text-center text-white\">\r\n          <div class=\"text-2xl font-bold\">{{ getTotalPlayersCount() }}</div>\r\n          <div class=\"text-green-100 text-sm\">Players</div>\r\n        </div>\r\n        <div class=\"bg-purple-600 rounded-lg p-4 text-center text-white\">\r\n          <div class=\"text-2xl font-bold\">{{ getCompletedMatchesCount() }}</div>\r\n          <div class=\"text-purple-100 text-sm\">Completed</div>\r\n        </div>\r\n        <div class=\"bg-orange-600 rounded-lg p-4 text-center text-white\">\r\n          <div class=\"text-2xl font-bold\">{{ getTotalMatchesCount() }}</div>\r\n          <div class=\"text-orange-100 text-sm\">Total Matches</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Teams Grid -->\r\n      <div class=\"bg-black bg-opacity-50 rounded-lg md:p-6 p-2 mb-6\">\r\n        <h3 class=\"text-xl font-bold text-white mb-4\">👥 Teams & Players</h3>\r\n\r\n        <div\r\n          class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\"\r\n        >\r\n          <div\r\n            *ngFor=\"let team of activeTournament.teams\"\r\n            class=\"bg-black/90 rounded-lg p-4 transition-colors\"\r\n          >\r\n            <!-- Team Header -->\r\n            <div class=\"text-center mb-4\">\r\n              <h4 class=\"text-lg font-bold text-white mb-2\">\r\n                {{ team.teamName }}\r\n              </h4>\r\n              <div\r\n                class=\"inline-block bg-blue-600 text-white px-3 py-1 rounded-full font-bold\"\r\n              >\r\n                {{ team.totalPoints }} pts\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Team Stats -->\r\n            <div class=\"grid grid-cols-3 gap-2 mb-4 text-center text-sm\">\r\n              <div>\r\n                <div class=\"text-green-400 font-bold\">{{ team.wins }}</div>\r\n                <div class=\"text-gray-400\">Wins</div>\r\n              </div>\r\n              <div>\r\n                <div class=\"text-yellow-400 font-bold\">{{ team.draws }}</div>\r\n                <div class=\"text-gray-400\">Draws</div>\r\n              </div>\r\n              <div>\r\n                <div class=\"text-red-400 font-bold\">{{ team.losses }}</div>\r\n                <div class=\"text-gray-400\">Losses</div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Players List -->\r\n            <div>\r\n              <div class=\"space-y-2\">\r\n                <div\r\n                  *ngFor=\"let player of team.players\"\r\n                  class=\"bg-gray-800 text-gray-100 px-8 py-2 rounded flex items-center justify-between cursor-pointer hover:bg-gray-700 transition-colors\"\r\n                  (click)=\"showPlayerResults(player)\"\r\n                  title=\"Click to view player results\"\r\n                >\r\n                  <!-- Player Points (Left - Green) -->\r\n                  <div class=\"text-green-400 font-bold text-lg\">\r\n                    {{ getPlayerStats(player.playerId).totalPoints }}\r\n                  </div>\r\n\r\n                  <!-- Player Name (Center) -->\r\n                  <div class=\"text-center font-medium text-white\">\r\n                    {{ player.fullName }}\r\n                  </div>\r\n\r\n                  <!-- Player Points Against (Right - Red) -->\r\n                  <div class=\"text-red-400 font-bold text-lg\">\r\n                    {{ getPlayerStats(player.playerId).totalPointsAgainst }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Team Matches Buttons -->\r\n            <div class=\"mt-4\">\r\n              <h6\r\n                class=\"text-xs font-semibold text-gray-300 mb-2 text-center border-b border-gray-600 pb-1\"\r\n              >\r\n                Matches vs:\r\n              </h6>\r\n              <div class=\"space-y-2\">\r\n                <button\r\n                  *ngFor=\"let opponent of getTeamOpponents(team)\"\r\n                  (click)=\"showTeamMatches(team, opponent)\"\r\n                  class=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-2 py-1.5 rounded text-xs transition-colors font-medium\"\r\n                >\r\n                  vs {{ opponent.teamName }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Global Players (always visible under current tab) -->\r\n    <div class=\"bg-gray-800 rounded-lg md:p-6 p-2 mt-6\">\r\n      <h3 class=\"text-xl font-bold text-white mb-4\">👥 Players</h3>\r\n\r\n      <div *ngIf=\"isLoadingPlayers\" class=\"flex justify-center py-4\">\r\n        <div\r\n          class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"\r\n        ></div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingPlayers && allPlayers.length > 0\"\r\n        class=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-2\"\r\n      >\r\n        <div\r\n          *ngFor=\"let player of allPlayers\"\r\n          class=\"bg-gray-700 p-2 rounded text-center hover:bg-gray-600 transition-colors cursor-pointer\"\r\n        >\r\n          <div\r\n            class=\"text-xs font-semibold text-white mb-1 truncate\"\r\n            [title]=\"player.fullName\"\r\n          >\r\n            {{ player.fullName }}\r\n          </div>\r\n          <div class=\"text-xs text-gray-300 flex justify-center gap-2\">\r\n            <div class=\"flex items-center\">\r\n              <span class=\"bg-blue-600 text-white px-1 py-0.5 rounded\">{{\r\n                player.multiParticipations\r\n              }}</span>\r\n              <span class=\"text-gray-400 text-xs ml-1\">مشاركات</span>\r\n            </div>\r\n            <div class=\"flex items-center\">\r\n              <span class=\"bg-green-600 text-white px-1 py-0.5 rounded\">{{\r\n                player.multiTitlesWon\r\n              }}</span>\r\n              <span class=\"text-gray-400 text-xs ml-1\">ألقاب</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingPlayers && allPlayers.length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p class=\"text-gray-400\">No players found.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Archive Tab -->\r\n<div *ngIf=\"activeTab === 'archive'\" class=\"container mx-auto\">\r\n  <h2 class=\"text-2xl font-bold text-white mb-6\">🏆 Tournament Archive</h2>\r\n\r\n  <!-- Loading Archive -->\r\n  <div *ngIf=\"isLoadingArchive\" class=\"flex justify-center py-8\">\r\n    <div\r\n      class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\r\n    ></div>\r\n  </div>\r\n\r\n  <!-- Archive Content -->\r\n  <div *ngIf=\"!isLoadingArchive\">\r\n    <!-- Past Tournaments -->\r\n    <div class=\"bg-gray-800 rounded-lg md:p-6 p-2\">\r\n      <h3 class=\"text-xl font-bold text-white mb-4\">📚 Past Tournaments</h3>\r\n\r\n      <div *ngIf=\"isLoadingPastTournaments\" class=\"flex justify-center py-4\">\r\n        <div\r\n          class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"\r\n        ></div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingPastTournaments && pastTournaments.length > 0\"\r\n        class=\"space-y-6\"\r\n      >\r\n        <div\r\n          *ngFor=\"let tournament of pastTournaments\"\r\n          class=\"bg-gray-700 rounded-lg p-4\"\r\n        >\r\n          <div class=\"flex justify-between items-center mb-4\">\r\n            <h4 class=\"text-lg font-bold text-white\">\r\n              {{ tournament.name }}\r\n            </h4>\r\n            <div class=\"flex items-center gap-2\">\r\n              <span\r\n                *ngIf=\"tournament.championTeamName\"\r\n                class=\"bg-yellow-600 text-black px-3 py-1 rounded text-sm font-bold\"\r\n              >\r\n                🏆 {{ tournament.championTeamName }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Tournament Standings -->\r\n          <div\r\n            *ngIf=\"tournament.standings && tournament.standings.length > 0\"\r\n            class=\"overflow-x-auto\"\r\n          >\r\n            <table class=\"w-full text-sm\">\r\n              <thead>\r\n                <tr class=\"border-b border-gray-600\">\r\n                  <th class=\"text-center text-gray-300 py-2\">Pos</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">Team</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">Pts</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">W</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">D</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">L</th>\r\n                  <th class=\"text-center text-gray-300 py-2\">MP</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr\r\n                  *ngFor=\"let standing of tournament.standings; let i = index\"\r\n                  class=\"border-b border-gray-600 hover:bg-gray-600\"\r\n                >\r\n                  <td class=\"py-2 text-white font-bold\">\r\n                    {{ getTrophyIcon(i + 1) }} {{ i + 1 }}\r\n                  </td>\r\n                  <td class=\"py-2 text-white\">\r\n                    <button\r\n                      class=\"hover:text-blue-300\"\r\n                      (click)=\"openArchiveTeamPlayers(tournament, standing)\"\r\n                      title=\"عرض لاعبي هذا الفريق\"\r\n                    >\r\n                      {{ standing.teamName }}\r\n                    </button>\r\n                  </td>\r\n                  <td class=\"py-2 text-center text-white font-bold\">\r\n                    {{ standing.totalPoints }}\r\n                  </td>\r\n                  <td class=\"py-2 text-center text-green-400\">\r\n                    {{ standing.wins }}\r\n                  </td>\r\n                  <td class=\"py-2 text-center text-yellow-400\">\r\n                    {{ standing.draws }}\r\n                  </td>\r\n                  <td class=\"py-2 text-center text-red-400\">\r\n                    {{ standing.losses }}\r\n                  </td>\r\n                  <td class=\"py-2 text-center text-white\">\r\n                    {{ standing.matchesPlayed }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n\r\n          <div\r\n            *ngIf=\"!tournament.standings || tournament.standings.length === 0\"\r\n            class=\"text-center py-4\"\r\n          >\r\n            <p class=\"text-gray-400\">\r\n              No standings available for this tournament.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingPastTournaments && pastTournaments.length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p class=\"text-gray-400\">No past tournaments found.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Team Matches Modal -->\r\n<div\r\n  *ngIf=\"showTeamMatchesModal\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n  (click)=\"closeTeamMatchesModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 rounded-lg w-full max-w-6xl max-h-[90vh] relative\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <!-- Fixed Close Button -->\r\n    <button\r\n      (click)=\"closeTeamMatchesModal()\"\r\n      class=\"absolute top-4 right-5 z-10 p-2 text-gray-100 hover:text-white text-lg font-bold transition-colors bg-gray-800 bg-opacity-70 rounded-full h-8 flex items-center justify-center\"\r\n    >\r\n      Exit ×\r\n    </button>\r\n\r\n    <!-- Modal Content with Padding -->\r\n    <div class=\"p-6 overflow-y-auto max-h-[90vh]\">\r\n      <!-- Loading State -->\r\n      <div *ngIf=\"isLoadingMatches\" class=\"flex justify-center py-8\">\r\n        <div\r\n          class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\r\n        ></div>\r\n      </div>\r\n\r\n      <!-- Matches List -->\r\n      <div\r\n        *ngIf=\"!isLoadingMatches && teamMatches.length > 0\"\r\n        class=\"space-y-6\"\r\n      >\r\n        <div\r\n          *ngFor=\"let fixture of teamMatches\"\r\n          class=\"bg-black bg-opacity-80 rounded-lg p-4\"\r\n        >\r\n          <div class=\"flex justify-between px-3\">\r\n            <h4\r\n              class=\"text-lg font-bold text-white mb-3 bg-black bg-opacity-50 pb-2\"\r\n            >\r\n              {{ fixture.team1Name }}\r\n            </h4>\r\n\r\n            <h4\r\n              class=\"text-lg font-bold text-white mb-3 bg-black bg-opacity-50 pb-2\"\r\n            >\r\n              {{ fixture.team2Name }}\r\n            </h4>\r\n          </div>\r\n\r\n          <!-- Completed Matches First -->\r\n          <div\r\n            class=\"mb-4\"\r\n            *ngIf=\"getCompletedMatches(fixture.matches).length > 0\"\r\n          >\r\n            <div class=\"grid gap-3\">\r\n              <div\r\n                *ngFor=\"let match of getCompletedMatches(fixture.matches)\"\r\n                class=\"bg-black bg-opacity-50 p-3 rounded flex justify-between items-center\"\r\n              >\r\n                <div class=\"flex-1\">\r\n                  <span class=\"text-white font-semibold\">{{\r\n                    match.player1Name\r\n                  }}</span>\r\n                </div>\r\n\r\n                <div class=\"px-4 text-center\">\r\n                  <div class=\"font-bold text-lg\">\r\n                    <span\r\n                      [class]=\"\r\n                        (match.score1 || 0) > (match.score2 || 0)\r\n                          ? 'text-green-400'\r\n                          : (match.score1 || 0) < (match.score2 || 0)\r\n                          ? 'text-red-400'\r\n                          : 'text-yellow-400'\r\n                      \"\r\n                    >\r\n                      {{ match.score1 || 0 }}\r\n                    </span>\r\n                    <span class=\"text-white mx-2\">-</span>\r\n                    <span\r\n                      [class]=\"\r\n                        (match.score2 || 0) > (match.score1 || 0)\r\n                          ? 'text-green-400'\r\n                          : (match.score2 || 0) < (match.score1 || 0)\r\n                          ? 'text-red-400'\r\n                          : 'text-yellow-400'\r\n                      \"\r\n                    >\r\n                      {{ match.score2 || 0 }}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"flex-1 text-right\">\r\n                  <span class=\"text-white font-semibold\">{{\r\n                    match.player2Name\r\n                  }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Pending Matches Second -->\r\n          <div *ngIf=\"getPendingMatches(fixture.matches).length > 0\">\r\n            <div class=\"grid gap-3\">\r\n              <div\r\n                *ngFor=\"let match of getPendingMatches(fixture.matches)\"\r\n                class=\"bg-black bg-opacity-50 p-3 rounded flex justify-between items-center\"\r\n              >\r\n                <div class=\"flex-1\">\r\n                  <span class=\"text-white font-semibold\">{{\r\n                    match.player1Name\r\n                  }}</span>\r\n                </div>\r\n\r\n                <div class=\"px-4 text-center\">\r\n                  <div class=\"text-gray-400 text-sm\">Pending</div>\r\n                </div>\r\n\r\n                <div class=\"flex-1 text-right\">\r\n                  <span class=\"text-white font-semibold\">{{\r\n                    match.player2Name\r\n                  }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- No Matches Message -->\r\n      <div\r\n        *ngIf=\"!isLoadingMatches && teamMatches.length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p class=\"text-gray-400\">No matches found for this team.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Player Individual Results Modal -->\r\n<div\r\n  *ngIf=\"showPlayerResultsModal\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n  (click)=\"closePlayerResultsModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 rounded-lg w-full max-w-2xl max-h-[80vh] relative\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <!-- Fixed Close Button -->\r\n    <button\r\n      (click)=\"closePlayerResultsModal()\"\r\n      class=\"absolute top-4 right-5 z-10 p-2 text-gray-100 hover:text-white text-lg font-bold transition-colors bg-gray-800 bg-opacity-70 rounded-full h-8 flex items-center justify-center\"\r\n    >\r\n      Exit ×\r\n    </button>\r\n\r\n    <!-- Modal Content -->\r\n    <div class=\"p-6 overflow-y-auto\" style=\"max-height: calc(80vh - 6rem)\">\r\n      <!-- Modal Header -->\r\n      <div class=\"text-center mb-6\">\r\n        <h3 class=\"text-xl font-semibold text-white\">\r\n          {{ selectedPlayer?.fullName }} Results\r\n        </h3>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div *ngIf=\"isLoadingPlayerMatches\" class=\"flex justify-center py-8\">\r\n        <div\r\n          class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\r\n        ></div>\r\n      </div>\r\n\r\n      <!-- Simple Matches List -->\r\n      <div\r\n        *ngIf=\"!isLoadingPlayerMatches && playerIndividualMatches.length > 0\"\r\n        class=\"space-y-3\"\r\n      >\r\n        <div\r\n          *ngFor=\"let match of playerIndividualMatches\"\r\n          class=\"bg-black bg-opacity-90 rounded-lg p-4\"\r\n        >\r\n          <!-- Match Row with Equal Spacing -->\r\n          <div class=\"grid grid-cols-4 gap-4 items-center\">\r\n            <!-- Opponent Name (Left) -->\r\n            <div class=\"text-center\">\r\n              <div class=\"text-white font-medium text-sm\">\r\n                {{ match.opponentName }}\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Score Result (Center Right) -->\r\n            <div class=\"text-center\">\r\n              <span\r\n                *ngIf=\"match.isCompleted\"\r\n                class=\"text-base font-semibold text-white\"\r\n              >\r\n                {{ match.opponentScore }} - {{ match.playerScore }}\r\n              </span>\r\n              <span *ngIf=\"!match.isCompleted\" class=\"text-gray-400 text-xs\">\r\n                -- - --\r\n              </span>\r\n            </div>\r\n            <!-- Win/Loss Status (Center Left) -->\r\n            <div class=\"text-center\">\r\n              <span\r\n                *ngIf=\"match.isCompleted\"\r\n                [class]=\"\r\n                  match.playerScore > match.opponentScore\r\n                    ? 'bg-green-600 text-white'\r\n                    : match.playerScore < match.opponentScore\r\n                    ? 'bg-red-600 text-white'\r\n                    : 'bg-yellow-600 text-black'\r\n                \"\r\n                class=\"px-2 py-0.5 rounded-full text-xs font-medium\"\r\n              >\r\n                {{\r\n                  match.playerScore > match.opponentScore\r\n                    ? \"WIN\"\r\n                    : match.playerScore < match.opponentScore\r\n                    ? \"LOSS\"\r\n                    : \"DRAW\"\r\n                }}\r\n              </span>\r\n              <span *ngIf=\"!match.isCompleted\" class=\"text-gray-400 text-xs\">\r\n                PENDING\r\n              </span>\r\n            </div>\r\n\r\n            <!-- Selected Player Name (Right) -->\r\n            <div class=\"text-center\">\r\n              <div class=\"text-white font-medium text-sm\">\r\n                {{ match.playerName }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- No Matches Message -->\r\n      <div\r\n        *ngIf=\"!isLoadingPlayerMatches && playerIndividualMatches.length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p class=\"text-gray-400\">No matches found for this player.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Archive Team Players Modal -->\r\n<div\r\n  *ngIf=\"showArchiveTeamPlayersModal\"\r\n  class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\"\r\n  (click)=\"closeArchiveTeamPlayersModal()\"\r\n>\r\n  <div\r\n    class=\"bg-black bg-opacity-50 rounded-lg w-full max-w-2xl max-h-[80vh] relative\"\r\n    (click)=\"$event.stopPropagation()\"\r\n  >\r\n    <button\r\n      (click)=\"closeArchiveTeamPlayersModal()\"\r\n      class=\"absolute top-4 right-5 z-10 p-2 text-gray-100 hover:text-white text-lg font-bold transition-colors bg-gray-800 bg-opacity-70 rounded-full h-8 flex items-center justify-center\"\r\n    >\r\n      Exit ×\r\n    </button>\r\n\r\n    <div class=\"p-6 overflow-y-auto\" style=\"max-height: calc(80vh - 6rem)\">\r\n      <div class=\"text-center mb-6\">\r\n        <h3 class=\"text-xl font-semibold text-white\">\r\n          {{ selectedArchiveTeam?.teamName || \"Team Players\" }}\r\n        </h3>\r\n      </div>\r\n\r\n      <div *ngIf=\"isLoadingArchiveTeamPlayers\" class=\"flex justify-center py-8\">\r\n        <div\r\n          class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\r\n        ></div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingArchiveTeamPlayers && archiveTeamPlayers.length > 0\"\r\n        class=\"space-y-2\"\r\n      >\r\n        <div\r\n          *ngFor=\"let player of archiveTeamPlayers\"\r\n          class=\"bg-gray-800 text-gray-100 px-4 py-2 rounded\"\r\n        >\r\n          <div class=\"text-white font-medium\">{{ player.fullName }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        *ngIf=\"!isLoadingArchiveTeamPlayers && archiveTeamPlayers.length === 0\"\r\n        class=\"text-center py-8\"\r\n      >\r\n        <p class=\"text-gray-400\">لا يوجد لاعبين لهذا الفريق.</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { LeagueTableComponent } from './league-table/league-table.component';\r\nimport { RankingComponent } from './ranking/ranking.component';\r\nimport { GroupsTableComponent } from './groups-table/groups-table.component';\r\nimport { GroupsMatchesTableComponent } from './groups-matches-table/groups-matches-table.component';\r\nimport { AllLeaguesComponent } from './all-leagues/all-leagues.component';\r\nimport { ForbiddenCardsComponent } from './forbidden-cards/forbidden-cards.component';\r\nimport { PlayerInboxComponent } from './player-inbox/player-inbox.component';\r\nimport { FriendliesViewComponent } from './friendlies/friendlies-view.component';\r\nimport { TeamsComponent } from './teams/teams.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', redirectTo: 'ranking', pathMatch: 'full' },\r\n  {\r\n    path: 'league-table',\r\n    component: LeagueTableComponent,\r\n    data: { title: 'League Table' },\r\n  },\r\n  { path: 'ranking', component: RankingComponent, data: { title: 'Ranking' } },\r\n  {\r\n    path: 'groups-table',\r\n    component: GroupsTableComponent,\r\n    data: { title: 'Groups Table' },\r\n  },\r\n  {\r\n    path: 'groups-matches-table',\r\n    component: GroupsMatchesTableComponent,\r\n    data: { title: 'Groups Matches Table' },\r\n  },\r\n  {\r\n    path: 'allLeagues',\r\n    component: AllLeaguesComponent,\r\n    data: { title: 'All Leagues' },\r\n  },\r\n  {\r\n    path: 'forbidden',\r\n    component: ForbiddenCardsComponent,\r\n    data: { title: 'Forbidden Cards' },\r\n  },\r\n  {\r\n    path: 'inbox',\r\n    component: PlayerInboxComponent,\r\n    data: { title: 'Inbox' },\r\n  },\r\n  {\r\n    path: 'friendlies',\r\n    component: FriendliesViewComponent,\r\n    data: { title: 'Friendlies' },\r\n  },\r\n  { path: 'teams', component: TeamsComponent, data: { title: 'Teams' } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PlayerRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  MultiTournamentService,\r\n  MultiTournamentDto,\r\n  TeamMatchesDto,\r\n  TournamentStandingsDto,\r\n  ApiResponse,\r\n  TeamDetail,\r\n  PlayerDetail,\r\n  StandingItem,\r\n} from '../../core/services/multi-tournament.service';\r\n\r\n@Component({\r\n  selector: 'app-teams',\r\n  templateUrl: './teams.component.html',\r\n  styleUrls: ['./teams.component.css'],\r\n})\r\nexport class TeamsComponent implements OnInit {\r\n  activeTournament: MultiTournamentDto | null = null;\r\n  standings: TournamentStandingsDto | null = null;\r\n  tournamentMatches: TeamMatchesDto[] = [];\r\n\r\n  // Team Matches Modal\r\n  showTeamMatchesModal = false;\r\n  selectedTeam: any = null;\r\n  selectedOpponent: any = null;\r\n  teamMatches: TeamMatchesDto[] = [];\r\n  isLoadingMatches = false;\r\n\r\n  // Player Individual Results Modal\r\n  showPlayerResultsModal = false;\r\n  selectedPlayer: any = null;\r\n  playerIndividualMatches: any[] = [];\r\n  isLoadingPlayerMatches = false;\r\n\r\n  // Player Stats Cache\r\n  playerStatsCache: { [playerId: number]: any } = {};\r\n\r\n  // Archive Data\r\n  allPlayers: any[] = [];\r\n  pastTournaments: any[] = [];\r\n  isLoadingArchive = false;\r\n  isLoadingPlayers = false;\r\n  isLoadingPastTournaments = false;\r\n\r\n  // Archive Team Players Modal\r\n  showArchiveTeamPlayersModal = false;\r\n  selectedArchiveTournament: MultiTournamentDto | null = null;\r\n  selectedArchiveTeam: TeamDetail | null = null;\r\n  archiveTeamPlayers: PlayerDetail[] = [];\r\n  isLoadingArchiveTeamPlayers = false;\r\n\r\n  // Tab Management\r\n  activeTab: 'current' | 'archive' = 'current';\r\n\r\n  isLoading = false;\r\n  errorMessage = '';\r\n\r\n  constructor(private multiTournamentService: MultiTournamentService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadActiveTournament();\r\n    this.loadArchiveData();\r\n  }\r\n\r\n  loadActiveTournament(): void {\r\n    this.isLoading = true;\r\n    this.errorMessage = '';\r\n\r\n    this.multiTournamentService.getActiveTournament().subscribe({\r\n      next: (response: ApiResponse<MultiTournamentDto | null>) => {\r\n        if (response.success && response.data) {\r\n          this.activeTournament = response.data;\r\n          this.loadTournamentData();\r\n        } else {\r\n          this.activeTournament = null;\r\n        }\r\n        this.isLoading = false;\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading active tournament:', error);\r\n        this.errorMessage = 'Failed to load tournament data';\r\n        this.activeTournament = null;\r\n        this.isLoading = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadTournamentData(): void {\r\n    if (!this.activeTournament) return;\r\n\r\n    // Load standings\r\n    this.multiTournamentService\r\n      .getTournamentStandings(this.activeTournament.multiTournamentId)\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success && response.data) {\r\n            this.standings = response.data;\r\n          }\r\n        },\r\n        error: (error) => console.error('Error loading standings:', error),\r\n      });\r\n\r\n    // Load matches\r\n    this.multiTournamentService.getActiveTournamentMatches().subscribe({\r\n      next: (response) => {\r\n        if (response.success && response.data) {\r\n          this.tournamentMatches = response.data;\r\n          // مسح الـ cache عند تحديث المباريات\r\n          this.clearPlayerStatsCache();\r\n        }\r\n      },\r\n      error: (error) => console.error('Error loading matches:', error),\r\n    });\r\n  }\r\n\r\n  getStatusColor(status: string): string {\r\n    switch (status) {\r\n      case 'Created':\r\n        return 'text-yellow-400';\r\n      case 'Started':\r\n        return 'text-green-400';\r\n      case 'Finished':\r\n        return 'text-blue-400';\r\n      default:\r\n        return 'text-gray-400';\r\n    }\r\n  }\r\n\r\n  getTrophyIcon(position: number): string {\r\n    switch (position) {\r\n      case 1:\r\n        return '🥇';\r\n      case 2:\r\n        return '🥈';\r\n      case 3:\r\n        return '🥉';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  getCompletedMatchesCount(): number {\r\n    return this.tournamentMatches.reduce(\r\n      (total, fixture) =>\r\n        total + fixture.matches.filter((match) => match.isCompleted).length,\r\n      0\r\n    );\r\n  }\r\n\r\n  getTotalMatchesCount(): number {\r\n    return this.tournamentMatches.reduce(\r\n      (total, fixture) => total + fixture.matches.length,\r\n      0\r\n    );\r\n  }\r\n\r\n  getTotalPlayersCount(): number {\r\n    return (\r\n      this.activeTournament?.teams.reduce(\r\n        (total, team) => total + team.players.length,\r\n        0\r\n      ) || 0\r\n    );\r\n  }\r\n\r\n  // Team Matches Modal Methods\r\n  showTeamMatches(team: any, opponent: any): void {\r\n    this.selectedTeam = team;\r\n    this.selectedOpponent = opponent;\r\n    this.showTeamMatchesModal = true;\r\n    this.loadTeamMatches(team, opponent);\r\n  }\r\n\r\n  closeTeamMatchesModal(): void {\r\n    this.showTeamMatchesModal = false;\r\n    this.selectedTeam = null;\r\n    this.selectedOpponent = null;\r\n    this.teamMatches = [];\r\n  }\r\n\r\n  private loadTeamMatches(team: any, opponent: any): void {\r\n    if (!this.activeTournament || !this.tournamentMatches) return;\r\n\r\n    this.isLoadingMatches = true;\r\n\r\n    // Filter matches between the selected team and opponent\r\n    this.teamMatches = this.tournamentMatches.filter((fixture) => {\r\n      const team1Name = fixture.team1Name;\r\n      const team2Name = fixture.team2Name;\r\n      return (\r\n        (team1Name === team.teamName && team2Name === opponent.teamName) ||\r\n        (team1Name === opponent.teamName && team2Name === team.teamName)\r\n      );\r\n    });\r\n\r\n    this.isLoadingMatches = false;\r\n  }\r\n\r\n  // Get all opponents for a team (excluding the team itself)\r\n  getTeamOpponents(team: any): any[] {\r\n    if (!this.activeTournament) return [];\r\n    return this.activeTournament.teams.filter(\r\n      (t) => t.teamName !== team.teamName\r\n    );\r\n  }\r\n\r\n  // Player Individual Results Modal Methods\r\n  showPlayerResults(player: any): void {\r\n    this.selectedPlayer = player;\r\n    this.showPlayerResultsModal = true;\r\n    this.loadPlayerIndividualMatches(player);\r\n  }\r\n\r\n  closePlayerResultsModal(): void {\r\n    this.showPlayerResultsModal = false;\r\n    this.selectedPlayer = null;\r\n    this.playerIndividualMatches = [];\r\n  }\r\n\r\n  private loadPlayerIndividualMatches(player: any): void {\r\n    if (!this.activeTournament || !this.tournamentMatches) return;\r\n\r\n    this.isLoadingPlayerMatches = true;\r\n\r\n    // Filter all matches for this specific player\r\n    this.playerIndividualMatches = [];\r\n\r\n    this.tournamentMatches.forEach((fixture) => {\r\n      fixture.matches.forEach((match) => {\r\n        if (\r\n          match.player1Id === player.playerId ||\r\n          match.player2Id === player.playerId\r\n        ) {\r\n          // Create a match object with player info\r\n          const isPlayer1 = match.player1Id === player.playerId;\r\n          const playerName = isPlayer1 ? match.player1Name : match.player2Name;\r\n          const opponentName = isPlayer1\r\n            ? match.player2Name\r\n            : match.player1Name;\r\n          const playerScore = isPlayer1 ? match.score1 || 0 : match.score2 || 0;\r\n          const opponentScore = isPlayer1\r\n            ? match.score2 || 0\r\n            : match.score1 || 0;\r\n\r\n          this.playerIndividualMatches.push({\r\n            ...match,\r\n            playerName: playerName,\r\n            opponentName: opponentName,\r\n            playerScore: playerScore,\r\n            opponentScore: opponentScore,\r\n            isPlayer1: isPlayer1,\r\n            team1Name: fixture.team1Name,\r\n            team2Name: fixture.team2Name,\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    // Sort matches by completion status and then by date if available\r\n    this.playerIndividualMatches.sort((a, b) => {\r\n      if (a.isCompleted !== b.isCompleted) {\r\n        return b.isCompleted ? 1 : -1; // Completed matches first\r\n      }\r\n      return 0;\r\n    });\r\n\r\n    this.isLoadingPlayerMatches = false;\r\n  }\r\n\r\n  // Get player's team name\r\n  getPlayerTeamName(player: any): string {\r\n    if (!this.activeTournament || !player) return '';\r\n\r\n    const team = this.activeTournament.teams.find((t) =>\r\n      t.players.some((p) => p.playerId === player.playerId)\r\n    );\r\n\r\n    return team ? team.teamName : '';\r\n  }\r\n\r\n  /**\r\n   * حساب إحصائيات اللاعب من المباريات الموجودة\r\n   * يستخدم tournamentMatches لحساب الانتصارات والخسائر والنقاط\r\n   *\r\n   * مثال: إذا لعب لاعب مع خصم 4 مباريات:\r\n   * - كسب 2-2 (4 نقاط)\r\n   * - خسر 1-3 (1 نقطة)\r\n   * - كسب 3-1 (3 نقاط)\r\n   * - خسر 0-4 (0 نقاط)\r\n   *\r\n   * النتيجة: 8 نقاط باللون الأخضر، 8 نقاط باللون الأحمر\r\n   */\r\n  getPlayerStats(playerId: number): any {\r\n    // استخدام الـ cache إذا كانت البيانات محفوظة\r\n    if (this.playerStatsCache[playerId]) {\r\n      return this.playerStatsCache[playerId];\r\n    }\r\n\r\n    if (!this.tournamentMatches || this.tournamentMatches.length === 0) {\r\n      const stats = {\r\n        wins: 0,\r\n        losses: 0,\r\n        totalPoints: 0,\r\n        totalPointsAgainst: 0,\r\n        totalMatches: 0,\r\n      };\r\n      this.playerStatsCache[playerId] = stats;\r\n      return stats;\r\n    }\r\n\r\n    let wins = 0;\r\n    let losses = 0;\r\n    let totalPoints = 0;\r\n    let totalPointsAgainst = 0;\r\n    let totalMatches = 0;\r\n\r\n    // البحث في جميع المباريات عن مباريات هذا اللاعب\r\n    this.tournamentMatches.forEach((fixture) => {\r\n      fixture.matches.forEach((match) => {\r\n        if (\r\n          match.isCompleted &&\r\n          (match.player1Id === playerId || match.player2Id === playerId)\r\n        ) {\r\n          totalMatches++;\r\n\r\n          const isPlayer1 = match.player1Id === playerId;\r\n          const playerScore = isPlayer1 ? match.score1 || 0 : match.score2 || 0;\r\n          const opponentScore = isPlayer1\r\n            ? match.score2 || 0\r\n            : match.score1 || 0;\r\n          // استخدام النقاط من النتيجة (score) بدلاً من totalPoints\r\n          const playerPoints = playerScore;\r\n          const opponentPoints = opponentScore;\r\n\r\n          if (playerScore > opponentScore) {\r\n            wins++;\r\n          } else {\r\n            losses++;\r\n          }\r\n\r\n          totalPoints += playerPoints;\r\n          totalPointsAgainst += opponentPoints;\r\n        }\r\n      });\r\n    });\r\n\r\n    const stats = {\r\n      wins,\r\n      losses,\r\n      totalPoints,\r\n      totalPointsAgainst,\r\n      totalMatches,\r\n    };\r\n\r\n    // حفظ النتائج في الـ cache\r\n    this.playerStatsCache[playerId] = stats;\r\n    return stats;\r\n  }\r\n\r\n  /**\r\n   * مسح cache إحصائيات اللاعبين\r\n   */\r\n  private clearPlayerStatsCache(): void {\r\n    this.playerStatsCache = {};\r\n  }\r\n\r\n  // Archive Methods\r\n  loadArchiveData(): void {\r\n    this.isLoadingArchive = true;\r\n    this.loadAllPlayers();\r\n    this.loadPastTournaments();\r\n  }\r\n\r\n  private loadAllPlayers(): void {\r\n    this.isLoadingPlayers = true;\r\n    this.multiTournamentService.getAllPlayers().subscribe({\r\n      next: (response) => {\r\n        if (response.success && response.data) {\r\n          this.allPlayers = response.data;\r\n        } else {\r\n          // Fallback data for testing\r\n          this.allPlayers = [\r\n            {\r\n              fullName: 'Test Player 1',\r\n              multiParticipations: 5,\r\n              multiTitlesWon: 2,\r\n            },\r\n            {\r\n              fullName: 'Test Player 2',\r\n              multiParticipations: 3,\r\n              multiTitlesWon: 1,\r\n            },\r\n          ];\r\n        }\r\n        this.isLoadingPlayers = false;\r\n        this.checkArchiveLoadingComplete();\r\n      },\r\n      error: (error) => {\r\n        // Fallback data on error\r\n        this.allPlayers = [\r\n          {\r\n            fullName: 'Error Player 1',\r\n            multiParticipations: 0,\r\n            multiTitlesWon: 0,\r\n          },\r\n          {\r\n            fullName: 'Error Player 2',\r\n            multiParticipations: 0,\r\n            multiTitlesWon: 0,\r\n          },\r\n        ];\r\n        this.isLoadingPlayers = false;\r\n        this.checkArchiveLoadingComplete();\r\n      },\r\n    });\r\n  }\r\n\r\n  private loadPastTournaments(): void {\r\n    this.isLoadingPastTournaments = true;\r\n    this.multiTournamentService.getAllTournaments().subscribe({\r\n      next: (response) => {\r\n        if (response.success && response.data) {\r\n          // Filter finished tournaments and load their standings\r\n          this.pastTournaments = response.data.filter(\r\n            (t) => t.status === 'Finished'\r\n          );\r\n          this.loadTournamentsStandings();\r\n        } else {\r\n          // Fallback data for testing\r\n          this.pastTournaments = [\r\n            {\r\n              name: 'Test Tournament 1',\r\n              systemOfScoring: 'League',\r\n              status: 'Finished',\r\n              championTeamName: 'Test Champions',\r\n              standings: [\r\n                {\r\n                  teamName: 'Team A',\r\n                  totalPoints: 15,\r\n                  wins: 5,\r\n                  draws: 0,\r\n                  losses: 0,\r\n                  matchesPlayed: 5,\r\n                },\r\n                {\r\n                  teamName: 'Team B',\r\n                  totalPoints: 12,\r\n                  wins: 4,\r\n                  draws: 0,\r\n                  losses: 1,\r\n                  matchesPlayed: 5,\r\n                },\r\n              ],\r\n            },\r\n          ];\r\n        }\r\n        this.isLoadingPastTournaments = false;\r\n        this.checkArchiveLoadingComplete();\r\n      },\r\n      error: (error) => {\r\n        // Fallback data on error\r\n        this.pastTournaments = [\r\n          {\r\n            name: 'Error Tournament',\r\n            systemOfScoring: 'League',\r\n            status: 'Finished',\r\n            championTeamName: 'No Champion',\r\n            standings: [],\r\n          },\r\n        ];\r\n        this.isLoadingPastTournaments = false;\r\n        this.checkArchiveLoadingComplete();\r\n      },\r\n    });\r\n  }\r\n\r\n  private checkArchiveLoadingComplete(): void {\r\n    if (!this.isLoadingPlayers && !this.isLoadingPastTournaments) {\r\n      this.isLoadingArchive = false;\r\n    }\r\n  }\r\n\r\n  private loadTournamentsStandings(): void {\r\n    this.pastTournaments.forEach((tournament) => {\r\n      this.multiTournamentService\r\n        .getTournamentStandings(tournament.multiTournamentId)\r\n        .subscribe({\r\n          next: (response) => {\r\n            if (response.success && response.data) {\r\n              tournament.standings = response.data.standings;\r\n            }\r\n          },\r\n          error: (error) =>\r\n            console.error(\r\n              `Error loading standings for tournament ${tournament.multiTournamentId}:`,\r\n              error\r\n            ),\r\n        });\r\n    });\r\n  }\r\n\r\n  // ============================\r\n  // 📚 Archive: Team Players Modal\r\n  // ============================\r\n  openArchiveTeamPlayers(\r\n    tournament: MultiTournamentDto,\r\n    standing: StandingItem\r\n  ): void {\r\n    if (!tournament || !standing) {\r\n      return;\r\n    }\r\n\r\n    this.showArchiveTeamPlayersModal = true;\r\n    this.isLoadingArchiveTeamPlayers = true;\r\n    this.selectedArchiveTournament = tournament;\r\n    this.selectedArchiveTeam = null;\r\n    this.archiveTeamPlayers = [];\r\n\r\n    this.multiTournamentService\r\n      .getTournament(tournament.multiTournamentId)\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success && response.data) {\r\n            const fullTournament = response.data;\r\n            const team =\r\n              fullTournament.teams.find(\r\n                (t) =>\r\n                  t.multiTeamId === standing.multiTeamId ||\r\n                  t.teamName === standing.teamName\r\n              ) || null;\r\n\r\n            this.selectedArchiveTeam = team;\r\n            this.archiveTeamPlayers = team?.players ?? [];\r\n          }\r\n          this.isLoadingArchiveTeamPlayers = false;\r\n        },\r\n        error: () => {\r\n          this.isLoadingArchiveTeamPlayers = false;\r\n        },\r\n      });\r\n  }\r\n\r\n  closeArchiveTeamPlayersModal(): void {\r\n    this.showArchiveTeamPlayersModal = false;\r\n    this.isLoadingArchiveTeamPlayers = false;\r\n    this.selectedArchiveTournament = null;\r\n    this.selectedArchiveTeam = null;\r\n    this.archiveTeamPlayers = [];\r\n  }\r\n\r\n  /**\r\n   * ترتيب المباريات: المكتملة أولاً، ثم المعلقة\r\n   */\r\n  getCompletedMatches(matches: any[]): any[] {\r\n    return matches.filter((match) => match.isCompleted);\r\n  }\r\n\r\n  getPendingMatches(matches: any[]): any[] {\r\n    return matches.filter((match) => !match.isCompleted);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlayerRoutingModule } from './player-routing.module';\r\nimport { LeagueTableComponent } from './league-table/league-table.component';\r\nimport { RankingComponent } from './ranking/ranking.component';\r\nimport { GroupsTableComponent } from './groups-table/groups-table.component';\r\nimport { GroupsMatchesTableComponent } from './groups-matches-table/groups-matches-table.component';\r\nimport { LeagueGroupsPreviewComponent } from './league-groups-preview/league-groups-preview.component';\r\nimport { TournamentInfoComponent } from './tournament-info/tournament-info.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AllLeaguesComponent } from './all-leagues/all-leagues.component';\r\nimport { ForbiddenCardsComponent } from './forbidden-cards/forbidden-cards.component';\r\nimport { CarouselModule } from 'ngx-owl-carousel-o';\r\nimport { PlayerInboxComponent } from './player-inbox/player-inbox.component';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { BracketTreeComponent } from './bracket-tree/bracket-tree.component';\r\nimport { GroupDrawAnimationComponent } from './group-draw-animation/group-draw-animation.component';\r\nimport { FriendliesViewComponent } from './friendlies/friendlies-view.component';\r\nimport { TeamsComponent } from './teams/teams.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LeagueTableComponent,\r\n    RankingComponent,\r\n    GroupsTableComponent,\r\n    GroupsMatchesTableComponent,\r\n    LeagueGroupsPreviewComponent,\r\n    TournamentInfoComponent,\r\n    AllLeaguesComponent,\r\n    ForbiddenCardsComponent,\r\n    PlayerInboxComponent,\r\n    GroupDrawAnimationComponent,\r\n    FriendliesViewComponent,\r\n    TeamsComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    PlayerRoutingModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    CarouselModule,\r\n    SharedModule,\r\n    BracketTreeComponent,\r\n  ],\r\n  exports: [RankingComponent],\r\n})\r\nexport class PlayerModule {}\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}"],"x_google_ignoreList":[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,50]}