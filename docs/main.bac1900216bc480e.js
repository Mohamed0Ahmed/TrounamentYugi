(self.webpackChunkYugiTournamnet=self.webpackChunkYugiTournamnet||[]).push([[792],{8010:(F,k,l)=>{"use strict";l.d(k,{u:()=>P});var m=l(5312),y=l(4412),s=l(8141),e=l(8699),O=l(1626),C=l(9834);let P=(()=>{class c{constructor(b,x){this.http=b,this.router=x,this.baseUrl=m.c.apiUrl,this.isLoggedInSubject=new y.t(this.hasToken()),this.isLoggedIn$=this.isLoggedInSubject.asObservable(),this.userRole=null;const M=localStorage.getItem("token");M&&(this.userRole=this.getRoleFromToken(M),this.isLoggedInSubject.next(!0))}login(b,x){return this.http.post(`${this.baseUrl}/auth/login`,{email:b,password:x}).pipe((0,s.M)(M=>{M.success&&(localStorage.setItem("token",M.token),localStorage.setItem("userRole",M.userRole||"Admin"),this.userRole=M.userRole||"Admin",this.isLoggedInSubject.next(!0),this.router.navigate(["/admin"]))}))}playerLogin(b,x){return this.http.post(`${this.baseUrl}/auth/player-login`,{phoneNumber:b,password:x}).pipe((0,s.M)(M=>{if(M.success&&M.token){localStorage.setItem("token",M.token);const E=this.getRoleFromToken(M.token);this.userRole=E||"Player",localStorage.setItem("userRole",this.userRole),this.isLoggedInSubject.next(!0),this.router.navigate(["/player"])}}))}register(b,x,M,E){return this.http.post(`${this.baseUrl}/auth/register-player`,{phoneNumber:b,password:x,firstName:M,lastName:E})}resetPassword(b,x){return this.http.post(`${this.baseUrl}/auth/reset-password`,{phoneNumber:b,newPassword:x})}logout(){localStorage.removeItem("token"),this.userRole=null,this.isLoggedInSubject.next(!1),this.router.navigate(["/player"])}getRole(){return this.userRole}hasToken(){return!!localStorage.getItem("token")}getRoleFromToken(b){try{return JSON.parse(atob(b.split(".")[1])).role||null}catch{return null}}static{this.\u0275fac=function(x){return new(x||c)(e.KVO(O.Qq),e.KVO(C.Ix))}}static{this.\u0275prov=e.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},5430:(F,k,l)=>{"use strict";l.d(k,{_:()=>O});var m=l(7673),y=l(8141),s=l(9437),e=l(8699);let O=(()=>{class C{constructor(){this.cache=new Map,this.DEFAULT_TTL=3e5,this.PLAYER_TTL=36e5,this.LEAGUE_TTL=864e5,this.loadFromLocalStorage()}set(c,f,b=this.DEFAULT_TTL){const x={data:f,timestamp:Date.now(),ttl:b};this.cache.set(c,x),this.saveToLocalStorage()}get(c){const f=this.cache.get(c);return f?Date.now()-f.timestamp>f.ttl?(this.cache.delete(c),this.saveToLocalStorage(),null):f.data:null}has(c){return null!==this.get(c)}clear(){this.cache.clear(),this.saveToLocalStorage()}remove(c){this.cache.delete(c),this.saveToLocalStorage()}cacheRequest(c,f,b=this.DEFAULT_TTL){const x=this.get(c);return x?(0,m.of)(x):f.pipe((0,y.M)(M=>this.set(c,M,b)),(0,s.W)(M=>{throw console.error("Cache request failed:",M),M}))}cachePlayerRequest(c,f){return this.cacheRequest(c,f,this.PLAYER_TTL)}cacheLeagueRequest(c,f){return this.cacheRequest(c,f,this.LEAGUE_TTL)}cacheAllLeaguesRequest(c,f){const b=this.get(c);return b?(0,m.of)(b):f.pipe((0,y.M)(x=>{if(Array.isArray(x)&&x.length>0&&x[0].createdOn){const M=[...x].sort((E,N)=>{const L=new Date(E.createdOn).getTime();return new Date(N.createdOn).getTime()-L});this.set(c,M,this.LEAGUE_TTL)}else this.set(c,x,this.LEAGUE_TTL)}),(0,s.W)(x=>{throw console.error("Cache request failed:",x),x}))}invalidatePattern(c){for(const f of this.cache.keys())f.includes(c)&&this.cache.delete(f);this.saveToLocalStorage()}getNextPlayerUpdateTime(){const c=new Date;return new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours()+1,0,0,0)}getLastUpdateTime(c){const f=this.cache.get(c);return f?new Date(f.timestamp):null}saveToLocalStorage(){try{const c=Array.from(this.cache.entries());localStorage.setItem("app_cache",JSON.stringify(c))}catch(c){console.error("Failed to save cache to localStorage:",c)}}loadFromLocalStorage(){try{const c=localStorage.getItem("app_cache");if(c){const f=JSON.parse(c);this.cache=new Map(f);for(const[b,x]of this.cache.entries())Date.now()-x.timestamp>x.ttl&&this.cache.delete(b)}}catch(c){console.error("Failed to load cache from localStorage:",c)}}static{this.\u0275fac=function(f){return new(f||C)}}static{this.\u0275prov=e.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},7137:(F,k,l)=>{"use strict";l.d(k,{N:()=>O});var m=l(5312),y=l(8699),s=l(1626),e=l(5430);let O=(()=>{class C{constructor(c,f){this.http=c,this.cacheService=f,this.baseUrl=m.c.apiUrl}resetLeague(c){return this.http.post(`${this.baseUrl}/league/reset/${c}`,{})}startLeague(c){return this.http.post(`${this.baseUrl}/league/start`,c)}GetCurrentLeague(){return this.cacheService.cachePlayerRequest("current-league",this.http.get(`${this.baseUrl}/league/getCurrentLeague`))}getAdminCurrentLeague(){return this.http.get(`${this.baseUrl}/league/getCurrentLeague`)}GetAllLeaguesRank(){return this.cacheService.cacheAllLeaguesRequest("all-leagues-rank",this.http.get(`${this.baseUrl}/player/players/all`))}getAdminAllLeagues(){return this.http.get(`${this.baseUrl}/player/players/all`)}DeleteLeague(c){return this.http.delete(`${this.baseUrl}/league/delete/${c}`)}createGroupsAndMatches(c){return this.http.post(`${this.baseUrl}/league/${c}/create-groups`,{})}startKnockoutStage(c){return this.http.post(`${this.baseUrl}/league/${c}/start-knockouts`,{})}startSemiFinals(c){return this.http.post(`${this.baseUrl}/league/${c}/start-semifinals`,{})}startFinal(c){return this.http.post(`${this.baseUrl}/league/${c}/start-final`,{})}getLastLeaguesRankUpdateTime(){return this.cacheService.getLastUpdateTime("all-leagues-rank")}getLastCurrentLeagueUpdateTime(){return this.cacheService.getLastUpdateTime("current-league")}static{this.\u0275fac=function(f){return new(f||C)(y.KVO(s.Qq),y.KVO(e._))}}static{this.\u0275prov=y.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},9101:(F,k,l)=>{"use strict";l.d(k,{T:()=>P});var m=l(8141),y=l(5312),s=l(8699),e=l(1626),O=l(3665),C=l(5430);let P=(()=>{class c{constructor(b,x,M){this.http=b,this.playerService=x,this.cacheService=M,this.baseUrl=y.c.apiUrl}getMatches(){return this.cacheService.cachePlayerRequest("current-matches",this.http.get(`${this.baseUrl}/match`))}getAdminMatches(){return this.http.get(`${this.baseUrl}/match`)}updateMatch(b,x){return this.http.post(`${this.baseUrl}/match/${b}/result`,{winnerId:x}).pipe((0,m.M)(()=>{this.playerService.refreshPlayers()}))}resetMatch(b){return this.http.delete(`${this.baseUrl}/match/reset/${b}`).pipe((0,m.M)(()=>{this.playerService.refreshPlayers()}))}getLastMatchesUpdateTime(){return this.cacheService.getLastUpdateTime("current-matches")}static{this.\u0275fac=function(x){return new(x||c)(s.KVO(e.Qq),s.KVO(O.x),s.KVO(C._))}}static{this.\u0275prov=s.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},6375:(F,k,l)=>{"use strict";l.d(k,{b:()=>O});var m=l(5312),y=l(8699),s=l(1626),e=l(5430);let O=(()=>{class C{constructor(c,f){this.http=c,this.cacheService=f,this.baseUrl=m.c.apiUrl}sendMessage(c){return this.http.post(`${this.baseUrl}/Message/send`,{Content:c})}getMessages(){return this.http.get(`${this.baseUrl}/Message/inbox`)}getAdminMessages(){return this.http.get(`${this.baseUrl}/Message/inbox`)}toggleMarkMessage(c,f){return this.http.post(`${this.baseUrl}/Message/mark/${c}`,{Marked:f})}toggleDeleteMessage(c,f){return this.http.post(`${this.baseUrl}/Message/delete/${c}`,{Marked:f})}getPlayerMessages(){return this.http.get(`${this.baseUrl}/Message/my-messages`)}sendAdminReply(c,f){return this.http.post(`${this.baseUrl}/Message/reply/${c}`,{Content:f})}static{this.\u0275fac=function(f){return new(f||C)(y.KVO(s.Qq),y.KVO(e._))}}static{this.\u0275prov=y.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},5716:(F,k,l)=>{"use strict";l.d(k,{i:()=>O});var m=l(5312),y=l(8699),s=l(1626),e=l(5430);let O=(()=>{class C{constructor(c,f){this.http=c,this.cacheService=f,this.baseUrl=m.c.apiUrl}sendNote(c){return this.http.post(`${this.baseUrl}/note/write`,{Content:c})}getNotes(){return this.http.get(`${this.baseUrl}/note/notes`)}getAdminNotes(){return this.http.get(`${this.baseUrl}/note/notes`)}toggleMarHide(c,f){return this.http.post(`${this.baseUrl}/note/hide/${c}`,{Marked:f})}DeleteNote(c,f){return this.http.post(`${this.baseUrl}/note/delete/${c}`,{Marked:f})}static{this.\u0275fac=function(f){return new(f||C)(y.KVO(s.Qq),y.KVO(e._))}}static{this.\u0275prov=y.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()},3665:(F,k,l)=>{"use strict";l.d(k,{x:()=>P});var m=l(4412),y=l(8141),s=l(5312),e=l(8699),O=l(1626),C=l(5430);let P=(()=>{class c{constructor(b,x){this.http=b,this.cacheService=x,this.baseUrl=s.c.apiUrl,this.rankingSubject=new m.t([]),this.ranking$=this.rankingSubject.asObservable()}getrank(){return this.cacheService.cachePlayerRequest("player-ranking",this.http.get(`${this.baseUrl}/player/ranking`).pipe((0,y.M)(b=>this.rankingSubject.next(b))))}getPlayers(){return this.cacheService.cachePlayerRequest("players-list",this.http.get(`${this.baseUrl}/player`).pipe((0,y.M)(b=>this.rankingSubject.next(b))))}getAdminPlayers(){return this.http.get(`${this.baseUrl}/player`).pipe((0,y.M)(b=>this.rankingSubject.next(b)))}addPlayer(b){return this.http.post(`${this.baseUrl}/player`,{fullName:b}).pipe((0,y.M)(()=>{this.cacheService.invalidatePattern("player"),this.refreshPlayers()}))}deletePlayer(b){return this.http.delete(`${this.baseUrl}/player/${b}`).pipe((0,y.M)(()=>{this.cacheService.invalidatePattern("player"),this.refreshPlayers()}))}refreshRanking(){this.cacheService.remove("player-ranking"),this.http.get(`${this.baseUrl}/player/ranking`).subscribe(b=>{this.rankingSubject.next(b)})}refreshPlayers(){this.cacheService.remove("players-list"),this.http.get(`${this.baseUrl}/player`).subscribe(b=>{this.rankingSubject.next(b)})}getNextUpdateTime(){return this.cacheService.getNextPlayerUpdateTime()}getLastRankingUpdateTime(){return this.cacheService.getLastUpdateTime("player-ranking")}getLastPlayersUpdateTime(){return this.cacheService.getLastUpdateTime("players-list")}static{this.\u0275fac=function(x){return new(x||c)(e.KVO(O.Qq),e.KVO(C._))}}static{this.\u0275prov=e.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},4597:(F,k,l)=>{"use strict";l.d(k,{Ck:()=>s,KE:()=>y,gD:()=>m});var m=function(e){return e[e.League=0]="League",e[e.GroupStage=1]="GroupStage",e[e.QuarterFinals=2]="QuarterFinals",e[e.SemiFinals=3]="SemiFinals",e[e.Final=4]="Final",e}(m||{}),y=function(e){return e[e.Points=0]="Points",e[e.Classic=1]="Classic",e}(y||{}),s=function(e){return e[e.Single=0]="Single",e[e.Multi=1]="Multi",e[e.Groups=2]="Groups",e}(s||{})},1496:(F,k,l)=>{"use strict";l.r(k),l.d(k,{PlayerModule:()=>wt});var m=l(177),y=l(9834),s=l(4597),e=l(8699),O=l(3665),C=l(9101),P=l(5794),c=l(7137),f=l(4412),b=l(605),x=l(5312),M=l(1626),E=l(5430);let N=(()=>{class r{constructor(t,n){this.http=t,this.cacheService=n,this.isUpdating=!1,this.baseUrl=x.c.apiUrl,this.updateStatusSubject=new f.t({isUpdating:!1,lastUpdateTime:new Date(this.getNextHourTime().getTime()-36e5),nextUpdateTime:this.getNextHourTime(),timeUntilNextUpdate:""}),this.updateStatus$=this.updateStatusSubject.asObservable();const o=this.getNextHourTime(),g=new Date(o.getTime()-36e5);this.updateStatusSubject.next({isUpdating:!1,lastUpdateTime:g,nextUpdateTime:o,timeUntilNextUpdate:this.getTimeUntilNextUpdate()}),setTimeout(()=>{this.startAutoUpdate(),this.startStatusUpdates()},0)}getNextHourTime(){const t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()+1,0,0,0)}startAutoUpdate(){const t=new Date,o=this.getNextHourTime().getTime()-t.getTime();setTimeout(()=>{this.updatePlayerData(),this.startHourlyUpdates()},o)}startHourlyUpdates(){this.updateInterval=setInterval(()=>{this.updatePlayerData()},36e5)}updatePlayerData(){this.isUpdating||(this.isUpdating=!0,this.updateStatusSubject.next({...this.updateStatusSubject.value,isUpdating:!0}),this.http.get(`${this.baseUrl}/player/ranking`).subscribe({next:t=>{this.cacheService.set("player-ranking",t,36e5)},error:t=>{console.error("\u274c Failed to update player ranking:",t)}}),this.http.get(`${this.baseUrl}/player`).subscribe({next:t=>{this.cacheService.set("players-list",t,36e5)},error:t=>{console.error("\u274c Failed to update players list:",t)}}),setTimeout(()=>{this.isUpdating=!1;const t=this.getNextHourTime(),n=new Date(t.getTime()-36e5);this.updateStatusSubject.next({isUpdating:!1,lastUpdateTime:n,nextUpdateTime:t,timeUntilNextUpdate:this.getTimeUntilNextUpdate()})},5e3))}startStatusUpdates(){(0,b.Y)(6e4).subscribe(()=>{this.updateStatusSubject.next({...this.updateStatusSubject.value,timeUntilNextUpdate:this.getTimeUntilNextUpdate()})})}getTimeUntilNextUpdate(){const t=this.updateStatusSubject.value.nextUpdateTime,n=new Date,o=t.getTime()-n.getTime();return`${Math.floor(o/36e5)}:${Math.floor(o%36e5/6e4).toString().padStart(2,"0")}`}getUpdateStatus(){return this.updateStatusSubject.value}formatTime(t){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}stopAutoUpdate(){this.updateInterval&&clearInterval(this.updateInterval)}static{this.\u0275fac=function(n){return new(n||r)(e.KVO(M.Qq),e.KVO(E._))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),L=(()=>{class r{constructor(t){this.injector=t,this.updateSubscription=null,this.backgroundUpdateService=this.injector.get(N),this.updateStatus=this.backgroundUpdateService.getUpdateStatus()}ngOnInit(){setTimeout(()=>{this.updateSubscription=this.backgroundUpdateService.updateStatus$.subscribe(t=>{this.updateStatus=t})},100)}ngOnDestroy(){this.updateSubscription&&this.updateSubscription.unsubscribe()}formatTime(t){return this.backgroundUpdateService.formatTime(t)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(e.zZn))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-update-status"]],decls:17,vars:3,consts:[[1,"bg-black","bg-opacity-30","backdrop-blur-sm","rounded-lg","p-3","mb-4","text-center"],[1,"text-sm","text-gray-300"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-bold"],[1,"text-white"],[1,"flex","justify-between","items-center"],[1,"flex","justify-between","items-center","mt-1"],[1,"text-green-400","font-bold"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4,"\u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b:"),e.k0s(),e.j41(5,"span",4),e.EFF(6),e.k0s()(),e.j41(7,"div",5)(8,"span",3),e.EFF(9,"\u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0642\u0627\u062f\u0645:"),e.k0s(),e.j41(10,"span",4),e.EFF(11),e.k0s()(),e.j41(12,"div",6)(13,"span",3),e.EFF(14,"\u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0645\u062a\u0628\u0642\u064a:"),e.k0s(),e.j41(15,"span",7),e.EFF(16),e.k0s()()()()),2&n&&(e.R7$(6),e.JRh(o.formatTime(o.updateStatus.lastUpdateTime)),e.R7$(5),e.JRh(o.formatTime(o.updateStatus.nextUpdateTime)),e.R7$(5),e.JRh(o.updateStatus.timeUntilNextUpdate))},styles:[".update-status-container[_ngcontent-%COMP%]{transition:all .3s ease}.update-status-container[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000004d}"]})}}return r})();function U(r,i){1&r&&(e.j41(0,"div",4)(1,"div",5)(2,"h4",6),e.EFF(3," Groups Tournament Info "),e.k0s(),e.j41(4,"div",7)(5,"span",8),e.nrm(6,"i",9),e.EFF(7," Groups: 4 "),e.k0s(),e.j41(8,"span",10),e.nrm(9,"i",11),e.EFF(10," Winners Advance "),e.k0s(),e.j41(11,"span",12),e.nrm(12,"i",13),e.EFF(13," Knockout Stage "),e.k0s()()()())}function B(r,i){if(1&r&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,U,14,0,"div",3),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isGroupsTournament())}}function z(r,i){1&r&&(e.j41(0,"div",1)(1,"div",2)(2,"h3",14),e.EFF(3,"No Active Tournament"),e.k0s(),e.j41(4,"p",15),e.EFF(5,"There is currently no active tournament."),e.k0s()()())}let $=(()=>{class r{constructor(t,n){this.leagueService=t,this.toastr=n,this.currentLeague=null,this.LeagueType=s.Ck,this.SystemOfLeague=s.KE}ngOnInit(){this.loadCurrentLeague()}loadCurrentLeague(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.currentLeague=t.league},error:t=>{console.error("Error loading current league:",t),this.currentLeague=null}})}getLeagueTypeText(){if(!this.currentLeague)return"Unknown";switch(this.currentLeague.typeOfLeague){case s.Ck.Single:return"Single League";case s.Ck.Multi:return"Multi League";case s.Ck.Groups:return"Groups Tournament";default:return"Unknown"}}getSystemOfLeagueText(){return this.currentLeague?.systemOfLeague?0===this.currentLeague.systemOfLeague?"Points System":"Classic System":"Unknown"}isGroupsTournament(){return this.currentLeague?.typeOfLeague===s.Ck.Groups}getFormattedDate(){return this.currentLeague?.createdOn?new Date(this.currentLeague.createdOn).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"Unknown"}getTournamentStatus(){return this.currentLeague?this.currentLeague.isFinished?{text:"Finished",color:"text-red-500"}:{text:"Live Now!",color:"text-green-500"}:{text:"No Active Tournament",color:"text-gray-400"}}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(c.N),e.rXU(P.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-tournament-info"]],decls:2,vars:2,consts:[["class","mb-8",4,"ngIf"],[1,"mb-8"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","rounded-lg","p-6","text-center"],["class","mt-6",4,"ngIf"],[1,"mt-6"],[1,"bg-gradient-to-r","from-blue-600","to-purple-600","rounded-lg","p-4"],[1,"text-lg","font-bold","text-white","mb-2"],[1,"flex","justify-center","space-x-6","text-sm"],[1,"text-blue-200"],[1,"fas","fa-users","mr-1"],[1,"text-green-200"],[1,"fas","fa-trophy","mr-1"],[1,"text-yellow-200"],[1,"fas","fa-calendar","mr-1"],[1,"text-xl","font-bold","text-white","mb-2"],[1,"text-gray-300"]],template:function(n,o){1&n&&(e.DNE(0,B,3,1,"div",0),e.DNE(1,z,6,0,"div",0)),2&n&&(e.Y8G("ngIf",o.currentLeague),e.R7$(1),e.Y8G("ngIf",!o.currentLeague))},dependencies:[m.bT],styles:[".tournament-info[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:24px;margin-bottom:32px}.info-card[_ngcontent-%COMP%]{background:rgba(31,41,55,.5);border-radius:8px;padding:12px;text-align:center;transition:transform .2s ease,box-shadow .2s ease}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000004d}.info-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:.25rem;color:#fff}.info-text[_ngcontent-%COMP%]{font-weight:700;font-size:.875rem}.text-blue[_ngcontent-%COMP%]{color:#60a5fa}.text-green[_ngcontent-%COMP%]{color:#34d399}.text-yellow[_ngcontent-%COMP%]{color:#fbbf24}.text-red[_ngcontent-%COMP%]{color:#f87171}.text-gray[_ngcontent-%COMP%]{color:#9ca3af}.groups-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);border-radius:8px;padding:16px;margin-top:24px}.groups-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:#fff;margin-bottom:8px}.groups-details[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:24px;font-size:.875rem}.groups-detail[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.icon[_ngcontent-%COMP%]{margin-right:4px}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.groups-details[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.info-card[_ngcontent-%COMP%]{padding:8px}}.gradient-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed)}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.transition-all[_ngcontent-%COMP%]{transition:all .2s ease}.status-active[_ngcontent-%COMP%]{color:#10b981;font-weight:700}.status-finished[_ngcontent-%COMP%]{color:#ef4444;font-weight:700}.status-inactive[_ngcontent-%COMP%]{color:#9ca3af;font-weight:700}"]})}}return r})();function K(r,i){1&r&&(e.j41(0,"div",3)(1,"div",4)(2,"h1",5),e.EFF(3," The Tournament Will Start Soon! "),e.k0s()()())}function V(r,i){if(1&r){const t=e.RV6();e.j41(0,"th",19),e.bIt("click",function(){const g=e.eBV(t).$implicit,h=e.XpG(3);return e.Njj(h.highlightColumn(g.playerId))}),e.EFF(1),e.k0s()}if(2&r){const t=i.$implicit,n=e.XpG(3);e.Y8G("ngClass",n.highlightedColumn==t.playerId?"text-white bg-gray-700":"text-white"),e.R7$(1),e.SpI(" ",t.fullName," ")}}function W(r,i){1&r&&(e.j41(0,"span",26),e.EFF(1," N/A "),e.k0s())}function S(r,i){if(1&r&&(e.qex(0),e.j41(1,"span",29),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(3);e.R7$(1),e.Y8G("ngClass",o.getMatchResult(t,n).color),e.R7$(1),e.SpI(" ",o.getMatchResult(t,n).result," ")}}function A(r,i){if(1&r&&(e.j41(0,"span",29),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(3);e.Y8G("ngClass",o.getClassicResult(t,n).color),e.R7$(1),e.SpI(" ",o.getClassicResult(t,n).result," ")}}function H(r,i){if(1&r&&(e.j41(0,"span"),e.DNE(1,S,3,2,"ng-container",27),e.DNE(2,A,2,2,"ng-template",null,28,e.C5r),e.k0s()),2&r){const t=e.sdS(3),n=e.XpG(5);e.R7$(1),e.Y8G("ngIf",n.systemOfLeague===n.SystemOfLeague.Points)("ngIfElse",t)}}const Q=function(r){return{"shadow-lg shadow-gray-100":r}};function J(r,i){if(1&r&&(e.j41(0,"td",23),e.DNE(1,W,2,0,"span",24),e.DNE(2,H,4,2,"span",25),e.k0s()),2&r){const t=i.$implicit,n=e.XpG().$implicit,o=e.XpG(3);e.Y8G("ngClass",e.eq3(3,Q,o.highlightedColumn===t.playerId)),e.R7$(1),e.Y8G("ngIf",n.playerId===t.playerId),e.R7$(1),e.Y8G("ngIf",n.playerId!==t.playerId)}}function Z(r,i){if(1&r&&(e.j41(0,"tr",20),e.DNE(1,J,3,5,"td",21),e.j41(2,"td",22),e.EFF(3),e.k0s()()),2&r){const t=i.$implicit,n=i.index,o=e.XpG().$implicit,g=e.XpG(2);e.Y8G("ngClass",n%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(1),e.Y8G("ngForOf",g.getGroupedPlayers()[o]),e.R7$(2),e.SpI(" ",t.fullName," ")}}function q(r,i){if(1&r&&(e.j41(0,"div",9)(1,"div",10)(2,"h3",11),e.EFF(3),e.k0s()(),e.j41(4,"div",12)(5,"table",13)(6,"thead",14)(7,"tr",15),e.DNE(8,V,2,2,"th",16),e.j41(9,"th",17),e.EFF(10," \u0627\u0644\u0645\u0628\u0627\u0631\u0627\u0629 "),e.k0s()()(),e.j41(11,"tbody"),e.DNE(12,Z,4,3,"tr",18),e.k0s()()()()),2&r){const t=i.$implicit,n=e.XpG(2);e.R7$(3),e.SpI(" Group ",t," Matches "),e.R7$(5),e.Y8G("ngForOf",n.getGroupedPlayers()[t]),e.R7$(4),e.Y8G("ngForOf",n.getGroupedPlayers()[t])}}function ee(r,i){if(1&r&&(e.j41(0,"div",6)(1,"div",7),e.DNE(2,q,13,3,"div",8),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.getGroupNumbers())}}let Y=(()=>{class r{constructor(t,n,o,g){this.playerService=t,this.matchService=n,this.leagueService=o,this.toastr=g,this.players=[],this.matches=[],this.currentLeague=null,this.started=!0,this.highlightedColumn=null,this.SystemOfLeague=s.KE,this.LeagueType=s.Ck}ngOnInit(){this.loadCurrentLeague(),this.loadPlayers(),this.loadMatches(),this.loadLeagueSystem()}loadCurrentLeague(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.currentLeague=t.league},error:t=>{console.error("Error loading current league:",t),this.currentLeague=null}})}loadPlayers(){this.playerService.getrank().subscribe({next:t=>{this.players=t},error:t=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0644\u0627\u0639\u0628\u064a\u0646"),console.error(t)}})}loadMatches(){this.matchService.getMatches().subscribe({next:t=>{t&&(this.matches=t,this.started=this.matches.every(n=>0==n.score1&&0==n.score2))},error:t=>{this.toastr.error("\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0645\u0627\u062a\u0634\u0627\u062a")}})}loadLeagueSystem(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.systemOfLeague=t.league?.systemOfLeague},error:()=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0646\u0638\u0627\u0645 \u0627\u0644\u062f\u0648\u0631\u064a")}})}getGroupedPlayers(){const t={};return this.players.forEach(n=>{n.groupNumber&&(t[n.groupNumber]||(t[n.groupNumber]=[]),t[n.groupNumber].push(n))}),0===Object.keys(t).length&&[...this.players].sort((o,g)=>g.points-o.points).forEach((o,g)=>{const h=g%4+1;t[h]||(t[h]=[]),t[h].push(o)}),t}getGroupNumbers(){const t=this.getGroupedPlayers();return Object.keys(t).map(n=>parseInt(n)).sort((n,o)=>n-o)}hasGroupedPlayers(){const t=this.getGroupedPlayers();return Object.keys(t).length>0}isGroupsTournament(){return this.currentLeague?.typeOfLeague===s.Ck.Groups}getMatchResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const o=this.matches.find(w=>w.player1Name===t.fullName&&w.player2Name===n.fullName||w.player1Name===n.fullName&&w.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;let v="text-white ";return g>h?v="text-green-600 font-bold":g<h?v="text-red-600 font-bold":g==h&&0!=g&&(v="text-gray-400 font-bold text-yellow-400"),{result:`${g} - ${h}`,color:v}}getClassicResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const o=this.matches.find(v=>v.player1Name===t.fullName&&v.player2Name===n.fullName||v.player1Name===n.fullName&&v.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;return g>h?{result:"\u0641\u0648\u0632",color:"text-green-600 font-bold"}:g<h?{result:"\u062e\u0633\u0627\u0631\u0629",color:"text-red-600 font-bold"}:g===h&&0!==g?{result:"\u062a\u0639\u0627\u062f\u0644",color:"text-yellow-400 font-bold"}:{result:"-",color:"text-gray-500"}}highlightColumn(t){this.highlightedColumn=this.highlightedColumn===t?null:t}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(O.x),e.rXU(C.T),e.rXU(c.N),e.rXU(P.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-groups-matches-table"]],decls:4,vars:2,consts:[[1,"sm:container","mx-auto","p-4"],["class","flex justify-center text-white",4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"flex","justify-center","text-white"],[1,"w-1/2","text-center","mt-10"],[1,"mb-4","text-4xl","font-extrabold","leading-none","tracking-tight","md:text-5xl","lg:text-6xl","text-white"],[1,"space-y-8"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["class","bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700",4,"ngFor","ngForOf"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","rounded-lg","border","border-gray-700"],[1,"bg-gradient-to-r","from-blue-600","to-purple-600","p-4","rounded-t-lg"],[1,"text-xl","font-bold","text-white","text-center"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-100"],[1,"text-xs","font-bold","text-gray-100","uppercase","bg-gray-800"],[1,"text-center"],["scope","col","class","px-3 py-3 cursor-pointer hover:bg-gray-700 transition-all min-w-[70px]",3,"ngClass","click",4,"ngFor","ngForOf"],["scope","col",1,"px-4","py-3","text-white","sticky-column"],["class","text-center hover:bg-gray-600",3,"ngClass",4,"ngFor","ngForOf"],["scope","col",1,"px-3","py-3","cursor-pointer","hover:bg-gray-700","transition-all","min-w-[70px]",3,"ngClass","click"],[1,"text-center","hover:bg-gray-600",3,"ngClass"],["class","transition-all",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-6","py-4","font-bold","text-white","sticky-column"],[1,"transition-all",3,"ngClass"],["class","font-bold text-white",4,"ngIf"],[4,"ngIf"],[1,"font-bold","text-white"],[4,"ngIf","ngIfElse"],["classicResult",""],[3,"ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",0),e.nrm(1,"app-tournament-info"),e.DNE(2,K,4,0,"div",1),e.DNE(3,ee,3,1,"div",2),e.k0s()),2&n&&(e.R7$(2),e.Y8G("ngIf",o.started),e.R7$(1),e.Y8G("ngIf",!o.started&&o.isGroupsTournament()&&o.hasGroupedPlayers()))},dependencies:[m.YU,m.Sq,m.bT,$],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;border-bottom:1px solid #374151}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff;font-weight:700;text-transform:uppercase;font-size:.75rem;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#4b5563!important}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#111827}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#1f2937}.group-card[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #374151;border-radius:8px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000004d}.group-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);padding:16px;color:#fff;font-weight:700;text-align:center}.sticky-column[_ngcontent-%COMP%]{position:sticky;right:0;background-color:#1f2937;z-index:10}.overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:thin;scrollbar-color:#4b5563 #1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:3px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 4px;font-size:.875rem}.hidden[_ngcontent-%COMP%]{display:none}}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.transition-all[_ngcontent-%COMP%]{transition:all .2s ease}.text-green[_ngcontent-%COMP%]{color:#10b981}.text-red[_ngcontent-%COMP%]{color:#ef4444}.text-yellow[_ngcontent-%COMP%]{color:#f59e0b}.text-blue[_ngcontent-%COMP%]{color:#3b82f6}.text-gray[_ngcontent-%COMP%]{color:#9ca3af}"]})}}return r})();function te(r,i){1&r&&(e.j41(0,"div",6)(1,"div",7)(2,"h1",8),e.EFF(3," The League Will Start Soon ! "),e.k0s()()())}function ne(r,i){1&r&&e.nrm(0,"app-groups-matches-table")}function re(r,i){if(1&r){const t=e.RV6();e.j41(0,"th",16),e.bIt("click",function(){const g=e.eBV(t).$implicit,h=e.XpG(2);return e.Njj(h.highlightColumn(g.playerId))}),e.EFF(1),e.k0s()}if(2&r){const t=i.$implicit,n=e.XpG(2);e.Y8G("ngClass",n.highlightedColumn==t.playerId?" text-white bg-gray-800":" text-white"),e.R7$(1),e.SpI(" ",t.fullName," ")}}function oe(r,i){1&r&&(e.j41(0,"span",22),e.EFF(1," N/A "),e.k0s())}function se(r,i){if(1&r&&(e.qex(0),e.j41(1,"span",25),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.R7$(1),e.Y8G("ngClass",o.getMatchResult(t,n).color),e.R7$(1),e.SpI(" ",o.getMatchResult(t,n).result," ")}}function ae(r,i){if(1&r&&(e.j41(0,"span",25),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.Y8G("ngClass",o.getClassicResult(t,n).color),e.R7$(1),e.SpI(" ",o.getClassicResult(t,n).result," ")}}function ie(r,i){if(1&r&&(e.j41(0,"span"),e.DNE(1,se,3,2,"ng-container",23),e.DNE(2,ae,2,2,"ng-template",null,24,e.C5r),e.k0s()),2&r){const t=e.sdS(3),n=e.XpG(4);e.R7$(1),e.Y8G("ngIf",n.systemOfLeague===n.SystemOfLeague.Points)("ngIfElse",t)}}const R=function(r){return{"shadow-lg shadow-gray-100":r}};function le(r,i){if(1&r&&(e.j41(0,"td",20),e.DNE(1,oe,2,0,"span",21),e.DNE(2,ie,4,2,"span",4),e.k0s()),2&r){const t=i.$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.Y8G("ngClass",e.eq3(3,R,o.highlightedColumn===t.playerId)),e.R7$(1),e.Y8G("ngIf",n.playerId===t.playerId),e.R7$(1),e.Y8G("ngIf",n.playerId!==t.playerId)}}function ce(r,i){if(1&r&&(e.j41(0,"tr",17),e.DNE(1,le,3,5,"td",18),e.j41(2,"td",19),e.EFF(3),e.k0s()()),2&r){const t=i.$implicit,n=i.index,o=e.XpG(2);e.Y8G("ngClass",n%2==0?"bg-gray-900 ":" bg-gray-950"),e.R7$(1),e.Y8G("ngForOf",o.players),e.R7$(2),e.SpI(" ",t.fullName," ")}}function pe(r,i){if(1&r&&(e.j41(0,"div",9)(1,"table",10)(2,"thead",11)(3,"tr",12),e.DNE(4,re,2,2,"th",13),e.j41(5,"th",14),e.EFF(6," \u0627\u0644\u0645\u0628\u0627\u0631\u0627\u0629 "),e.k0s()()(),e.j41(7,"tbody"),e.DNE(8,ce,4,3,"tr",15),e.k0s()()()),2&r){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.players),e.R7$(4),e.Y8G("ngForOf",t.players)}}let ue=(()=>{class r{constructor(t,n,o,g){this.playerService=t,this.matchService=n,this.toastr=o,this.leagueService=g,this.players=[],this.matches=[],this.started=!0,this.highlightedColumn=null,this.currentLeague=null,this.SystemOfLeague=s.KE,this.LeagueType=s.Ck}ngOnInit(){this.loadCurrentLeague(),this.loadPlayers(),this.loadMatches(),this.loadLeagueSystem()}loadPlayers(){this.playerService.getPlayers().subscribe({next:t=>{t&&(this.players=t)},error:t=>{this.toastr.error("\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0644\u0627\u0639\u0628\u064a\u0646")}})}loadMatches(){this.matchService.getMatches().subscribe({next:t=>{t&&(this.matches=t,this.started=this.matches.every(n=>0==n.score1&&0==n.score2))},error:t=>{this.toastr.error("\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0645\u0627\u062a\u0634\u0627\u062a")}})}loadCurrentLeague(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.currentLeague=t.league},error:t=>{console.error("Error loading current league:",t),this.currentLeague=null}})}loadLeagueSystem(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.systemOfLeague=t.league?.systemOfLeague},error:()=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0646\u0638\u0627\u0645 \u0627\u0644\u062f\u0648\u0631\u064a")}})}getMatchResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const o=this.matches.find(w=>w.player1Name===t.fullName&&w.player2Name===n.fullName||w.player1Name===n.fullName&&w.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;let v="text-white ";return g>h?v="text-green-600 font-bold":g<h?v="text-red-600 font-bold":g==h&&0!=g&&(v="text-gray-400 font-bold text-yellow-400"),{result:`${g} - ${h}`,color:v}}getClassicResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const o=this.matches.find(v=>v.player1Name===t.fullName&&v.player2Name===n.fullName||v.player1Name===n.fullName&&v.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;return g>h?{result:"\u0641\u0648\u0632",color:"text-green-600 font-bold"}:g<h?{result:"\u062e\u0633\u0627\u0631\u0629",color:"text-red-600 font-bold"}:g===h&&0!==g?{result:"\u062a\u0639\u0627\u062f\u0644",color:"text-yellow-400 font-bold"}:{result:"-",color:"text-gray-500"}}highlightColumn(t){this.highlightedColumn=this.highlightedColumn===t?null:t}onClickOutside(t){const n=document.querySelector("table");n&&!n.contains(t.target)&&(this.highlightedColumn=null)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(O.x),e.rXU(C.T),e.rXU(P.tw),e.rXU(c.N))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-league-table"]],hostBindings:function(n,o){1&n&&e.bIt("click",function(h){return o.onClickOutside(h)},!1,e.EBC)},decls:8,vars:3,consts:[[1,"p-4"],[1,"text-3xl","font-bold","text-white","text-center","mb-6","fa-bold"],[1,"container","mx-auto"],["class","flex justify-center text-gray-500",4,"ngIf"],[4,"ngIf"],["class","table-container relative overflow-x-auto shadow-md sm:rounded-lg",4,"ngIf"],[1,"flex","justify-center","text-gray-500"],[1,"w-1/2","text-center","mt-10"],[1,"mb-4","text-4xl","font-extrabold","leading-none","tracking-tight","md:text-5xl","lg:text-6xl","text-white"],[1,"table-container","relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-400"],[1,"text-xs","uppercase","bg-black"],[1,"text-center"],["scope","col","class","px-6 py-3 cursor-pointer hover:bg-gray-400 transition-all min-w-[70px]",3,"ngClass","click",4,"ngFor","ngForOf"],["scope","col",1,"px-4","py-3","text-white","sticky-column"],["class","text-center hover:bg-gray-600",3,"ngClass",4,"ngFor","ngForOf"],["scope","col",1,"px-6","py-3","cursor-pointer","hover:bg-gray-400","transition-all","min-w-[70px]",3,"ngClass","click"],[1,"text-center","hover:bg-gray-600",3,"ngClass"],["class","transition-all",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-6","py-4","font-bold","text-white","sticky-column"],[1,"transition-all",3,"ngClass"],["class","font-bold text-white",4,"ngIf"],[1,"font-bold","text-white"],[4,"ngIf","ngIfElse"],["classicResult",""],[3,"ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2," Games Table "),e.k0s(),e.j41(3,"div",2),e.nrm(4,"app-update-status"),e.k0s(),e.DNE(5,te,4,0,"div",3),e.DNE(6,ne,1,0,"app-groups-matches-table",4),e.DNE(7,pe,9,2,"div",5),e.k0s()),2&n&&(e.R7$(5),e.Y8G("ngIf",o.started),e.R7$(1),e.Y8G("ngIf",!o.started&&(null==o.currentLeague?null:o.currentLeague.typeOfLeague)===o.LeagueType.Groups),e.R7$(1),e.Y8G("ngIf",!o.started&&(null==o.currentLeague?null:o.currentLeague.typeOfLeague)!==o.LeagueType.Groups))},dependencies:[m.YU,m.Sq,m.bT,L,Y],styles:['.sticky-column[_ngcontent-%COMP%]{position:sticky;right:0;z-index:50;box-shadow:-2px 0 4px #0000004d;-webkit-backdrop-filter:blur(0px);backdrop-filter:blur(0px)}thead[_ngcontent-%COMP%]   .sticky-column[_ngcontent-%COMP%]{background-color:#000}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   .sticky-column[_ngcontent-%COMP%]{background-color:#030712}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   .sticky-column[_ngcontent-%COMP%]{background-color:#111827}.table-container[_ngcontent-%COMP%]{overflow-x:auto;position:relative}.table-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;width:2px;height:100%;background:transparent}']})}}return r})();function ge(r,i){1&r&&(e.j41(0,"span",11),e.EFF(1,"\u2713"),e.k0s())}function de(r,i){1&r&&(e.j41(0,"span",11),e.EFF(1,"\u2713"),e.k0s())}function he(r,i){if(1&r&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.EFF(3),e.DNE(4,ge,2,0,"span",9),e.k0s()(),e.j41(5,"div",10),e.EFF(6,"vs"),e.k0s(),e.j41(7,"div",7)(8,"div",8),e.EFF(9),e.DNE(10,de,2,0,"span",9),e.k0s()()()),2&r){const t=i.$implicit;e.R7$(3),e.SpI(" ",t.player1Name||"---"," "),e.R7$(1),e.Y8G("ngIf",t.isCompleted&&t.score1>t.score2),e.R7$(5),e.SpI(" ",t.player2Name||"---"," "),e.R7$(1),e.Y8G("ngIf",t.isCompleted&&t.score2>t.score1)}}function me(r,i){1&r&&(e.j41(0,"span",11),e.EFF(1,"\u2713"),e.k0s())}function u(r,i){1&r&&(e.j41(0,"span",11),e.EFF(1,"\u2713"),e.k0s())}function j(r,i){if(1&r&&(e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.EFF(3),e.DNE(4,me,2,0,"span",9),e.k0s()(),e.j41(5,"div",10),e.EFF(6,"vs"),e.k0s(),e.j41(7,"div",7)(8,"div",8),e.EFF(9),e.DNE(10,u,2,0,"span",9),e.k0s()()()),2&r){const t=i.$implicit;e.R7$(3),e.SpI(" ",t.player1Name||"---"," "),e.R7$(1),e.Y8G("ngIf",t.isCompleted&&t.score1>t.score2),e.R7$(5),e.SpI(" ",t.player2Name||"---"," "),e.R7$(1),e.Y8G("ngIf",t.isCompleted&&t.score2>t.score1)}}function a(r,i){1&r&&(e.j41(0,"span",13),e.EFF(1,"\u{1f451}"),e.k0s())}function p(r,i){1&r&&(e.j41(0,"span",13),e.EFF(1,"\u{1f451}"),e.k0s())}function d(r,i){if(1&r&&(e.j41(0,"div",2)(1,"h3"),e.EFF(2,"Final"),e.k0s(),e.j41(3,"div",3)(4,"div",6)(5,"div",7)(6,"div",8),e.EFF(7),e.DNE(8,a,2,0,"span",12),e.k0s()(),e.j41(9,"div",10),e.EFF(10,"vs"),e.k0s(),e.j41(11,"div",7)(12,"div",8),e.EFF(13),e.DNE(14,p,2,0,"span",12),e.k0s()()()()()),2&r){const t=e.XpG();let n,o;e.R7$(7),e.SpI(" ",null!==(n=null==(n=t.final())?null:n.player1Name)&&void 0!==n?n:"---"," "),e.R7$(1),e.Y8G("ngIf",t.final().isCompleted&&t.final().score1>t.final().score2),e.R7$(5),e.SpI(" ",null!==(o=null==(o=t.final())?null:o.player2Name)&&void 0!==o?o:"---"," "),e.R7$(1),e.Y8G("ngIf",t.final().isCompleted&&t.final().score2>t.final().score1)}}let _=(()=>{class r{constructor(t){this.leagueService=t,this.quarterFinals=(0,e.vPA)([]),this.semiFinals=(0,e.vPA)([]),this.final=(0,e.vPA)(null)}ngOnInit(){this.loadKnockoutMatches()}ngOnChanges(t){t.leagueId&&this.loadKnockoutMatches()}loadKnockoutMatches(){if(!this.leagueId)return this.quarterFinals.set([]),this.semiFinals.set([]),void this.final.set(null);this.leagueService.GetAllLeaguesRank().subscribe({next:t=>{const n=t.find(o=>o.leagueId===this.leagueId);n&&n.knockoutMatches?this.processKnockoutMatches(n.knockoutMatches):(this.quarterFinals.set([]),this.semiFinals.set([]),this.final.set(null))},error:t=>{console.error("Error loading knockout matches:",t),this.quarterFinals.set([]),this.semiFinals.set([]),this.final.set(null)}})}processKnockoutMatches(t){this.quarterFinals.set(this.shuffleMatches(t.filter(n=>{const o=n.tournamentStage?parseInt(n.tournamentStage):n.stage;return n.stage===s.gD.QuarterFinals||2===o}))),this.semiFinals.set(this.shuffleMatches(t.filter(n=>{const o=n.tournamentStage?parseInt(n.tournamentStage):n.stage;return n.stage===s.gD.SemiFinals||3===o}))),this.final.set(t.find(n=>{const o=n.tournamentStage?parseInt(n.tournamentStage):n.stage;return n.stage===s.gD.Final||4===o})??null)}shuffleMatches(t){return t.map(n=>Math.random()>.5?{...n,player1Name:n.player2Name,player2Name:n.player1Name,player1Id:n.player2Id,player2Id:n.player1Id,score1:n.score2,score2:n.score1}:n)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(c.N))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-bracket-tree"]],inputs:{leagueId:"leagueId"},standalone:!0,features:[e.OA$,e.aNF],decls:15,vars:3,consts:[[1,"bracket-container"],[1,"bracket-stage"],[1,"stage-container"],[1,"matches"],["class","match",4,"ngFor","ngForOf"],["class","stage-container",4,"ngIf"],[1,"match"],[1,"player-container"],[1,"player"],["class","winner-check",4,"ngIf"],[1,"vs"],[1,"winner-check"],["class","champion-check",4,"ngIf"],[1,"champion-check"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e.EFF(4,"Quarter Finals"),e.k0s(),e.j41(5,"div",3),e.DNE(6,he,11,4,"div",4),e.k0s()()(),e.j41(7,"div",1)(8,"div",2)(9,"h3"),e.EFF(10,"Semi Finals"),e.k0s(),e.j41(11,"div",3),e.DNE(12,j,11,4,"div",4),e.k0s()()(),e.j41(13,"div",1),e.DNE(14,d,15,4,"div",5),e.k0s()()),2&n&&(e.R7$(6),e.Y8G("ngForOf",o.quarterFinals()),e.R7$(6),e.Y8G("ngForOf",o.semiFinals()),e.R7$(2),e.Y8G("ngIf",o.final()))},dependencies:[m.MD,m.Sq,m.bT],styles:[".bracket-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;font-family:Tajawal,Arial,sans-serif;min-height:100vh}.bracket-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#fff;font-size:2rem;font-weight:700}.bracket-stage[_ngcontent-%COMP%]{margin-bottom:3rem}.bracket-stage[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#fff;font-size:1.5rem;font-weight:700}.stage-container[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);box-shadow:0 4px 6px #0000001a;border-radius:8px}.matches[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;justify-items:center}.match[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;width:100%;max-width:500px}.player-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.player[_ngcontent-%COMP%]{background:rgba(0,0,0,.7);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:6px;color:#fff;font-weight:700;min-width:150px;text-align:center;box-shadow:0 2px 4px #0003;display:flex;align-items:center;justify-content:center;position:relative;padding:.5rem}.winner-check[_ngcontent-%COMP%]{color:#22c55e;font-weight:700;font-size:1.2rem;margin-left:.5rem;display:inline-flex;align-items:center;justify-content:center}.champion-check[_ngcontent-%COMP%]{color:#fbbf24;font-weight:700;font-size:1.2rem;margin-left:.5rem;display:inline-flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_champion-glow 2s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_champion-glow{0%{filter:brightness(1)}to{filter:brightness(1.3)}}.vs[_ngcontent-%COMP%]{font-weight:700;color:#fff;font-size:1.2rem}@media (max-width: 1024px){.bracket-container[_ngcontent-%COMP%]{padding:1rem}.bracket-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:1rem}.bracket-stage[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.matches[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.5rem}.match[_ngcontent-%COMP%]{flex-direction:column;gap:.2rem}.player[_ngcontent-%COMP%]{min-width:70px;font-size:.8rem;padding:.3rem .5rem}.winner-check[_ngcontent-%COMP%], .champion-check[_ngcontent-%COMP%]{font-size:.8rem;margin-left:.3rem}.vs[_ngcontent-%COMP%]{font-size:.8rem}}"],changeDetection:0})}}return r})();function T(r,i){1&r&&(e.j41(0,"div",3)(1,"div",4)(2,"h1",5),e.EFF(3," The Tournament Will Start Soon! "),e.k0s()()())}function I(r,i){if(1&r&&(e.j41(0,"tr",19)(1,"th",20),e.EFF(2),e.k0s(),e.j41(3,"td",21),e.EFF(4),e.k0s(),e.j41(5,"td",22),e.EFF(6),e.k0s(),e.j41(7,"td",23),e.EFF(8),e.k0s(),e.j41(9,"td",24),e.EFF(10),e.k0s(),e.j41(11,"td",25),e.EFF(12),e.k0s(),e.j41(13,"td",26),e.EFF(14),e.k0s(),e.j41(15,"td",27),e.EFF(16),e.nI1(17,"number"),e.k0s()()),2&r){const t=i.$implicit;e.Y8G("ngClass",i.index%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(2),e.SpI(" ",t.rank," "),e.R7$(2),e.SpI(" ",t.fullName," "),e.R7$(2),e.SpI(" ",t.points," "),e.R7$(2),e.SpI(" ",t.wins," "),e.R7$(2),e.SpI(" ",t.draws," "),e.R7$(2),e.SpI(" ",t.losses," "),e.R7$(2),e.SpI(" ",t.matchesPlayed," "),e.R7$(1),e.Y8G("ngClass",t.winRate>50?"text-green-500":"text-red-600"),e.R7$(1),e.SpI(" ",e.i5U(17,10,t.winRate,"1.2-2")," % ")}}function be(r,i){if(1&r&&(e.j41(0,"div",9)(1,"div",10)(2,"h3",11),e.EFF(3),e.k0s()(),e.j41(4,"div",12)(5,"table",13)(6,"thead",14)(7,"tr",15)(8,"th",16),e.EFF(9,"Rank"),e.k0s(),e.j41(10,"th",16),e.EFF(11,"Name"),e.k0s(),e.j41(12,"th",16),e.EFF(13,"Points"),e.k0s(),e.j41(14,"th",17),e.EFF(15,"Win"),e.k0s(),e.j41(16,"th",17),e.EFF(17,"Draw"),e.k0s(),e.j41(18,"th",17),e.EFF(19,"Loss"),e.k0s(),e.j41(20,"th",16),e.EFF(21,"Games"),e.k0s(),e.j41(22,"th",16),e.EFF(23,"Win Rate"),e.k0s()()(),e.j41(24,"tbody"),e.DNE(25,I,18,13,"tr",18),e.k0s()()()()),2&r){const t=i.$implicit,n=e.XpG(2);e.R7$(3),e.SpI(" Group ",t," "),e.R7$(22),e.Y8G("ngForOf",n.getGroupedPlayers()[t])}}function _e(r,i){if(1&r&&(e.j41(0,"div",6)(1,"div",7),e.DNE(2,be,26,2,"div",8),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.getGroupNumbers())}}let fe=(()=>{class r{constructor(t,n,o){this.playerService=t,this.leagueService=n,this.toastr=o,this.players=[],this.currentLeague=null,this.LeagueType=s.Ck,this.started=!0}ngOnInit(){this.loadCurrentLeague(),this.loadPlayers()}loadCurrentLeague(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.currentLeague=t.league},error:t=>{console.error("Error loading current league:",t),this.currentLeague=null}})}loadPlayers(){this.playerService.getrank().subscribe({next:t=>{this.players=t,this.started=this.players.every(n=>0===n.matchesPlayed)},error:t=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0644\u0627\u0639\u0628\u064a\u0646"),console.error(t)}})}getGroupedPlayers(){const t={};return this.players.forEach(n=>{n.groupNumber&&(t[n.groupNumber]||(t[n.groupNumber]=[]),t[n.groupNumber].push(n))}),0===Object.keys(t).length&&[...this.players].sort((o,g)=>g.points-o.points).forEach((o,g)=>{const h=g%4+1;t[h]||(t[h]=[]),t[h].push(o)}),Object.keys(t).forEach(n=>{const o=parseInt(n);t[o].sort((g,h)=>h.points-g.points)}),t}getGroupNumbers(){const t=this.getGroupedPlayers();return Object.keys(t).map(n=>parseInt(n)).sort((n,o)=>n-o)}hasGroupedPlayers(){const t=this.getGroupedPlayers();return Object.keys(t).length>0}isGroupsTournament(){return this.currentLeague?.typeOfLeague===s.Ck.Groups}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(O.x),e.rXU(c.N),e.rXU(P.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-groups-table"]],decls:4,vars:2,consts:[[1,"sm:container","mx-auto","p-4"],["class","flex justify-center text-white",4,"ngIf"],["class","space-y-8",4,"ngIf"],[1,"flex","justify-center","text-white"],[1,"w-1/2","text-center","mt-10"],[1,"mb-4","text-4xl","font-extrabold","leading-none","tracking-tight","md:text-5xl","lg:text-6xl","text-white"],[1,"space-y-8"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["class","bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700",4,"ngFor","ngForOf"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","rounded-lg","border","border-gray-700"],[1,"bg-gradient-to-r","from-blue-600","to-purple-600","p-4","rounded-t-lg"],[1,"text-xl","font-bold","text-white","text-center"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-100"],[1,"text-xs","font-bold","text-gray-100","uppercase","bg-gray-800"],[1,"text-center"],["scope","col",1,"px-3","py-3"],["scope","col",1,"px-3","py-3","hidden","sm:table-cell"],["class","border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px] transition-colors",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-b","text-center","border-gray-700","hover:bg-gray-600","font-bold","text-sm","md:text-[16px]","transition-colors",3,"ngClass"],["scope","row",1,"px-3","py-4","font-medium","text-white","whitespace-nowrap","relative"],[1,"px-3","py-4"],[1,"px-3","py-4","text-center","font-bold"],[1,"px-3","py-4","text-center","text-green-500","hidden","sm:table-cell"],[1,"px-3","py-4","text-center","text-yellow-400","hidden","sm:table-cell"],[1,"px-3","py-4","text-center","text-red-600","hidden","sm:table-cell"],[1,"px-3","py-4","text-center"],[1,"px-3","py-4","text-center",3,"ngClass"]],template:function(n,o){1&n&&(e.j41(0,"div",0),e.nrm(1,"app-tournament-info"),e.DNE(2,T,4,0,"div",1),e.DNE(3,_e,3,1,"div",2),e.k0s()),2&n&&(e.R7$(2),e.Y8G("ngIf",o.started),e.R7$(1),e.Y8G("ngIf",!o.started&&o.isGroupsTournament()&&o.hasGroupedPlayers()))},dependencies:[m.YU,m.Sq,m.bT,$,m.QX],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 8px;text-align:center;border-bottom:1px solid #374151}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff;font-weight:700;text-transform:uppercase;font-size:.75rem;letter-spacing:.05em}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#4b5563!important}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#111827}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#1f2937}.rank-indicator[_ngcontent-%COMP%]{position:absolute;width:12px;height:12px;border-radius:50%;top:-4px;left:-4px}.rank-1[_ngcontent-%COMP%]{background-color:#fbbf24}.rank-2[_ngcontent-%COMP%]{background-color:#9ca3af}.rank-3[_ngcontent-%COMP%]{background-color:#ea580c}.group-card[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #374151;border-radius:8px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000004d}.group-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);padding:16px;color:#fff;font-weight:700;text-align:center}.groups-summary[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:24px;margin-top:32px}.summary-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);border-radius:8px;padding:12px;text-align:center;transition:transform .2s ease}.summary-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.info-card[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:24px;text-align:center;margin-bottom:32px}.text-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.text-green[_ngcontent-%COMP%]{color:#10b981}.text-red[_ngcontent-%COMP%]{color:#ef4444}.text-yellow[_ngcontent-%COMP%]{color:#f59e0b}.text-blue[_ngcontent-%COMP%]{color:#3b82f6}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 4px;font-size:.875rem}.hidden[_ngcontent-%COMP%]{display:none}}.overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:thin;scrollbar-color:#4b5563 #1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:3px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.message-card[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;padding:32px;text-align:center}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;transition:all .2s ease;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.spinner[_ngcontent-%COMP%]{border:4px solid #1f2937;border-top:4px solid #3b82f6;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})}}return r})();function xe(r,i){1&r&&(e.j41(0,"div",5)(1,"div",6)(2,"h1",7),e.EFF(3," The League Will Start Soon ! "),e.k0s()()())}function ye(r,i){1&r&&e.nrm(0,"app-groups-table")}function ve(r,i){1&r&&e.nrm(0,"i",26)}function Ce(r,i){if(1&r&&(e.j41(0,"tr",17)(1,"th",18),e.DNE(2,ve,1,0,"i",19),e.EFF(3),e.k0s(),e.j41(4,"td",20),e.EFF(5),e.k0s(),e.j41(6,"td",21),e.EFF(7),e.k0s(),e.j41(8,"td",22),e.EFF(9),e.k0s(),e.j41(10,"td",23),e.EFF(11),e.k0s(),e.j41(12,"td",24),e.EFF(13),e.k0s(),e.j41(14,"td",21),e.EFF(15),e.k0s(),e.j41(16,"td",25),e.EFF(17),e.nI1(18,"number"),e.k0s()()),2&r){const t=i.$implicit;e.Y8G("ngClass",i.index%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(2),e.Y8G("ngIf",1==t.rank),e.R7$(1),e.SpI(" ",t.rank," "),e.R7$(2),e.SpI(" ",t.fullName," "),e.R7$(2),e.SpI(" ",t.points," "),e.R7$(2),e.SpI(" ",t.wins," "),e.R7$(2),e.SpI(" ",t.draws," "),e.R7$(2),e.SpI(" ",t.losses," "),e.R7$(2),e.SpI(" ",t.matchesPlayed," "),e.R7$(1),e.Y8G("ngClass",t.winRate>50?"text-green-500":"text-red-600"),e.R7$(1),e.SpI(" ",e.i5U(18,11,t.winRate,"1.2-2")," % ")}}function ke(r,i){if(1&r&&(e.j41(0,"div",9)(1,"div",10)(2,"table",11)(3,"thead",12)(4,"tr",13)(5,"th",14),e.EFF(6,"Rank"),e.k0s(),e.j41(7,"th",14),e.EFF(8,"Name"),e.k0s(),e.j41(9,"th",14),e.EFF(10,"points"),e.k0s(),e.j41(11,"th",15),e.EFF(12,"Win"),e.k0s(),e.j41(13,"th",15),e.EFF(14,"Draw"),e.k0s(),e.j41(15,"th",15),e.EFF(16,"Loss"),e.k0s(),e.j41(17,"th",14),e.EFF(18,"Games"),e.k0s(),e.j41(19,"th",14),e.EFF(20,"win Rate"),e.k0s()()(),e.j41(21,"tbody"),e.DNE(22,Ce,19,14,"tr",16),e.k0s()()()()),2&r){const t=e.XpG(3);e.R7$(22),e.Y8G("ngForOf",t.players)}}function Me(r,i){if(1&r&&(e.j41(0,"div",9),e.DNE(1,ke,23,1,"div",8),e.k0s()),2&r){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",!t.currentLeague||(null==t.currentLeague?null:t.currentLeague.typeOfLeague)!==t.LeagueType.Groups)}}function we(r,i){if(1&r&&(e.j41(0,"div"),e.DNE(1,ye,1,0,"app-groups-table",3),e.DNE(2,Me,2,1,"div",8),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("ngIf",(null==t.currentLeague?null:t.currentLeague.typeOfLeague)===t.LeagueType.Groups),e.R7$(1),e.Y8G("ngIf",!t.currentLeague||(null==t.currentLeague?null:t.currentLeague.typeOfLeague)!==t.LeagueType.Groups)}}function Oe(r,i){if(1&r&&(e.j41(0,"div",27),e.nrm(1,"app-bracket-tree",28),e.k0s()),2&r){const t=e.XpG();e.R7$(1),e.Y8G("leagueId",null==t.currentLeague?null:t.currentLeague.id)}}let Fe=(()=>{class r{constructor(t,n,o){this.playerService=t,this.leagueService=n,this.toastr=o,this.players=[],this.started=!0,this.last=0,this.currentLeague=null,this.LeagueType=s.Ck}ngOnInit(){this.loadCurrentLeague(),this.loadPlayers()}loadCurrentLeague(){this.leagueService.GetCurrentLeague().subscribe({next:t=>{this.currentLeague=t.league},error:t=>{console.error("Error loading current league:",t),this.currentLeague=null}})}loadPlayers(){this.playerService.getrank().subscribe({next:t=>{this.players=t,this.last=t.length-1,this.started=this.players.every(n=>0===n.matchesPlayed)},error:t=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0627 \u0627\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0644\u0627\u0639\u0628\u064a\u0646"),console.error(t)}})}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(O.x),e.rXU(c.N),e.rXU(P.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-ranking"]],decls:7,vars:3,consts:[[1,"md:container","mx-auto","p-4"],[1,"text-3xl","text-white","text-center","mb-6","font-bold"],["class","flex justify-center text-white",4,"ngIf"],[4,"ngIf"],["class","w-full",4,"ngIf"],[1,"flex","justify-center","text-white"],[1,"w-1/2","text-center","mt-10"],[1,"mb-4","text-4xl","font-extrabold","leading-none","tracking-tight","md:text-5xl","lg:text-6xl","text-white"],["class","overflow-x-auto",4,"ngIf"],[1,"overflow-x-auto"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-100"],[1,"text-xs","font-bold","text-gray-100","uppercase","bg-black"],[1,"text-center"],["scope","col",1,"px-2","py-3"],["scope","col",1,"px-2","py-3","hidden","sm:table-cell"],["class","border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px]",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-b","text-center","border-gray-700","hover:bg-gray-600","font-bold","text-sm","md:text-[16px]",3,"ngClass"],["scope","row",1,"px-2","py-4","font-medium","text-white","whitespace-nowrap","relative"],["class","fa-solid fa-crown absolute top-[50%] left-[10px] md:left-10 translate-y-[-50%]","style","color: #ffd43b",4,"ngIf"],[1,"px-2","py-4"],[1,"px-2","py-4","text-center"],[1,"px-2","py-4","text-center","text-green-500","hidden","sm:table-cell"],[1,"px-2","py-4","text-center","text-yellow-400","hidden","sm:table-cell"],[1,"px-2","py-4","text-center","text-red-600","hidden","sm:table-cell"],[1,"px-2","py-4","text-center",3,"ngClass"],[1,"fa-solid","fa-crown","absolute","top-[50%]","left-[10px]","md:left-10","translate-y-[-50%]",2,"color","#ffd43b"],[1,"w-full"],[3,"leagueId"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Rank Table"),e.k0s(),e.nrm(3,"app-update-status"),e.DNE(4,xe,4,0,"div",2),e.DNE(5,we,3,2,"div",3),e.DNE(6,Oe,2,1,"div",4),e.k0s()),2&n&&(e.R7$(4),e.Y8G("ngIf",o.started),e.R7$(1),e.Y8G("ngIf",!o.started),e.R7$(1),e.Y8G("ngIf",(null==o.currentLeague?null:o.currentLeague.typeOfLeague)===o.LeagueType.Groups))},dependencies:[m.YU,m.Sq,m.bT,L,_,fe,m.QX]})}}return r})();var D=l(3263);function Pe(r,i){if(1&r&&(e.j41(0,"tr",16)(1,"th",17),e.EFF(2),e.k0s(),e.j41(3,"td",18),e.EFF(4),e.k0s(),e.j41(5,"td",19),e.EFF(6),e.k0s()()),2&r){const t=i.$implicit;e.Y8G("ngClass",i.index%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(2),e.SpI(" ",t.rank," "),e.R7$(2),e.SpI(" ",t.fullName," "),e.R7$(2),e.SpI(" ",t.points," ")}}function je(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"h5",8),e.EFF(3),e.k0s()(),e.j41(4,"div",9)(5,"table",10)(6,"thead",11)(7,"tr",12)(8,"th",13),e.EFF(9,"Rank"),e.k0s(),e.j41(10,"th",13),e.EFF(11,"Name"),e.k0s(),e.j41(12,"th",13),e.EFF(13,"Points"),e.k0s()()(),e.j41(14,"tbody"),e.DNE(15,Pe,7,4,"tr",14),e.k0s()(),e.j41(16,"button",15),e.bIt("click",function(){const g=e.eBV(t).$implicit,h=e.XpG(2);return e.Njj(h.openGroupMatches(g))}),e.EFF(17),e.k0s()()()}if(2&r){const t=i.$implicit,n=e.XpG(2);e.R7$(3),e.SpI(" Group ",t," "),e.R7$(12),e.Y8G("ngForOf",n.getGroupedPlayers()[t]),e.R7$(2),e.SpI(" Show Group ",t," Matches ")}}function Ee(r,i){if(1&r&&(e.j41(0,"div",2)(1,"h4",3),e.EFF(2,"Groups Preview"),e.k0s(),e.j41(3,"div",4),e.DNE(4,je,18,3,"div",5),e.k0s()()),2&r){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.getGroupNumbers())}}function Ie(r,i){if(1&r&&(e.j41(0,"th",31),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.SpI(" ",t.fullName," ")}}function Te(r,i){1&r&&(e.j41(0,"span",38),e.EFF(1," N/A "),e.k0s())}function Ge(r,i){if(1&r&&(e.qex(0),e.j41(1,"span",41),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.R7$(1),e.Y8G("ngClass",o.getMatchResult(t,n,o.selectedGroupMatches).color),e.R7$(1),e.SpI(" ",o.getMatchResult(t,n,o.selectedGroupMatches).result," ")}}function Le(r,i){if(1&r&&(e.j41(0,"span",41),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.Y8G("ngClass",o.getClassicResult(t,n,o.selectedGroupMatches).color),e.R7$(1),e.SpI(" ",o.getClassicResult(t,n,o.selectedGroupMatches).result," ")}}function Se(r,i){if(1&r&&(e.j41(0,"span"),e.DNE(1,Ge,3,2,"ng-container",39),e.DNE(2,Le,2,2,"ng-template",null,40,e.C5r),e.k0s()),2&r){const t=e.sdS(3),n=e.XpG(4);e.R7$(1),e.Y8G("ngIf",n.systemOfLeague===n.SystemOfLeague.Points)("ngIfElse",t)}}function Re(r,i){if(1&r&&(e.j41(0,"td",35),e.DNE(1,Te,2,0,"span",36),e.DNE(2,Se,4,2,"span",37),e.k0s()),2&r){const t=i.$implicit,n=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",n.playerId===t.playerId),e.R7$(1),e.Y8G("ngIf",n.playerId!==t.playerId)}}function Ne(r,i){if(1&r&&(e.j41(0,"tr",32),e.DNE(1,Re,3,2,"td",33),e.j41(2,"td",34),e.EFF(3),e.k0s()()),2&r){const t=i.$implicit,n=i.index,o=e.XpG(2);e.Y8G("ngClass",n%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(1),e.Y8G("ngForOf",o.getGroupedPlayers()[o.selectedGroup]),e.R7$(2),e.SpI(" ",t.fullName," ")}}function $e(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeMatchesModal())}),e.j41(1,"div",21),e.bIt("click",function(o){return o.stopPropagation()}),e.j41(2,"div",22)(3,"h2",23),e.EFF(4),e.k0s(),e.j41(5,"button",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeMatchesModal())}),e.nrm(6,"i",25),e.k0s()(),e.j41(7,"div",26)(8,"table",27)(9,"thead",11)(10,"tr",12),e.DNE(11,Ie,2,1,"th",28),e.j41(12,"th",29),e.EFF(13," \u0627\u0644\u0645\u0628\u0627\u0631\u0627\u0629 "),e.k0s()()(),e.j41(14,"tbody"),e.DNE(15,Ne,4,3,"tr",30),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(4),e.SpI(" Group ",t.selectedGroup," Matches "),e.R7$(7),e.Y8G("ngForOf",t.getGroupedPlayers()[t.selectedGroup]),e.R7$(4),e.Y8G("ngForOf",t.getGroupedPlayers()[t.selectedGroup])}}let De=(()=>{class r{constructor(){this.groups=[],this.matches=[],this.SystemOfLeague=s.KE,this.LeagueType=s.Ck,this.selectedGroup=null,this.showMatchesModal=!1,this.selectedGroupMatches=[]}ngOnInit(){}getGroupedPlayers(){const t={};return this.groups.forEach(n=>{t[n.groupNumber]=n.players}),t}getGroupMatches(t){return this.groups.find(o=>o.groupNumber===t)?.matches||[]}getGroupNumbers(){return this.groups.map(t=>t.groupNumber).sort((t,n)=>t-n)}hasGroupedPlayers(){return this.groups&&this.groups.length>0}isGroupsTournament(){return this.leagueType===s.Ck.Groups}getMatchResult(t,n,o){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const g=o.find(X=>X.player1Name===t.fullName&&X.player2Name===n.fullName||X.player1Name===n.fullName&&X.player2Name===t.fullName);if(!g)return{result:"-",color:"text-gray-500"};const h=g.player1Name===t.fullName?g.score1:g.score2,v=g.player2Name===n.fullName?g.score2:g.score1;let w="text-white ";return h>v?w="text-green-600 font-bold":h<v?w="text-red-600 font-bold":h==v&&0!=h&&(w="text-gray-400 font-bold text-yellow-400"),{result:`${h} - ${v}`,color:w}}getClassicResult(t,n,o){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-800"};const g=o.find(w=>w.player1Name===t.fullName&&w.player2Name===n.fullName||w.player1Name===n.fullName&&w.player2Name===t.fullName);if(!g)return{result:"-",color:"text-gray-500"};const h=g.player1Name===t.fullName?g.score1:g.score2,v=g.player2Name===n.fullName?g.score2:g.score1;return h>v?{result:"\u0641\u0648\u0632",color:"text-green-600 font-bold"}:h<v?{result:"\u062e\u0633\u0627\u0631\u0629",color:"text-red-600 font-bold"}:h===v&&0!==h?{result:"\u062a\u0639\u0627\u062f\u0644",color:"text-yellow-400 font-bold"}:{result:"-",color:"text-gray-500"}}openGroupMatches(t){this.selectedGroup=t,this.selectedGroupMatches=this.getGroupMatches(t),this.showMatchesModal=!0}closeMatchesModal(){this.showMatchesModal=!1,this.selectedGroup=null,this.selectedGroupMatches=[]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-league-groups-preview"]],inputs:{groups:"groups",matches:"matches",systemOfLeague:"systemOfLeague",leagueType:"leagueType"},decls:2,vars:2,consts:[["class","mt-6",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",3,"click",4,"ngIf"],[1,"mt-6"],[1,"text-lg","font-bold","text-white","mb-4","text-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-4"],["class","bg-black bg-opacity-50 backdrop-blur-sm rounded-lg border border-gray-700",4,"ngFor","ngForOf"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","rounded-lg","border","border-gray-700"],[1,"bg-gradient-to-r","from-blue-600","to-purple-600","p-3","rounded-t-lg"],[1,"text-sm","font-bold","text-white","text-center"],[1,"p-3"],[1,"w-full","text-xs","text-gray-100"],[1,"text-xs","font-bold","text-gray-100","uppercase","bg-gray-800"],[1,"text-center"],["scope","col",1,"px-1","py-2"],["class","border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-xs",3,"ngClass",4,"ngFor","ngForOf"],[1,"w-full","mt-3","bg-gradient-to-r","from-blue-600","to-purple-600","text-white","text-xs","font-bold","py-2","px-3","rounded","hover:from-blue-700","hover:to-purple-700","transition-all",3,"click"],[1,"border-b","text-center","border-gray-700","hover:bg-gray-600","font-bold","text-xs",3,"ngClass"],["scope","row",1,"px-1","py-2","font-medium","text-white","whitespace-nowrap"],[1,"px-1","py-2","text-white"],[1,"px-1","py-2","text-center","font-bold","text-blue-400"],[1,"fixed","inset-0","bg-black","bg-opacity-75","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","p-6","rounded-lg","shadow-lg","w-full","max-w-4xl","mx-4","max-h-[80vh]","overflow-y-auto",3,"click"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-white"],[1,"text-white","hover:text-gray-300",3,"click"],[1,"fa-solid","fa-times","text-2xl"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-100"],["scope","col","class","px-3 py-3 cursor-pointer hover:bg-gray-700 transition-all min-w-[70px]",4,"ngFor","ngForOf"],["scope","col",1,"px-4","py-3","text-white","sticky-column"],["class","text-center hover:bg-gray-600",3,"ngClass",4,"ngFor","ngForOf"],["scope","col",1,"px-3","py-3","cursor-pointer","hover:bg-gray-700","transition-all","min-w-[70px]"],[1,"text-center","hover:bg-gray-600",3,"ngClass"],["class","px-2 py-4 transition-all",4,"ngFor","ngForOf"],[1,"px-6","py-4","font-bold","text-white","sticky-column"],[1,"px-2","py-4","transition-all"],["class","font-bold text-white",4,"ngIf"],[4,"ngIf"],[1,"font-bold","text-white"],[4,"ngIf","ngIfElse"],["classicResult",""],[3,"ngClass"]],template:function(n,o){1&n&&(e.DNE(0,Ee,5,1,"div",0),e.DNE(1,$e,16,3,"div",1)),2&n&&(e.Y8G("ngIf",o.isGroupsTournament()&&o.hasGroupedPlayers()),e.R7$(1),e.Y8G("ngIf",o.showMatchesModal))},dependencies:[m.YU,m.Sq,m.bT],styles:[".group-preview[_ngcontent-%COMP%]{margin-top:24px}.group-table[_ngcontent-%COMP%]{width:100%;font-size:.75rem}.group-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .group-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 2px;text-align:center;border-bottom:1px solid #374151}.group-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff;font-weight:700;text-transform:uppercase;font-size:.625rem;letter-spacing:.05em}.group-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.group-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#4b5563!important}.group-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#111827}.group-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#1f2937}.group-card[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid #374151;border-radius:8px;overflow:hidden;transition:transform .2s ease,box-shadow .2s ease}.group-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000004d}.group-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);padding:12px;color:#fff;font-weight:700;text-align:center}.group-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#7c3aed);color:#fff;font-weight:700;padding:8px 12px;border-radius:6px;transition:all .2s ease;cursor:pointer;border:none;width:100%;margin-top:12px}.group-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#7c2d12);transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.75);display:flex;align-items:center;justify-content:center;z-index:50}.modal-content[_ngcontent-%COMP%]{background:rgba(0,0,0,.5);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:24px;border-radius:8px;box-shadow:0 10px 25px #0000004d;width:100%;max-width:64rem;margin:0 16px;max-height:80vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#fff}.modal-close[_ngcontent-%COMP%]{color:#fff;background:none;border:none;font-size:1.5rem;cursor:pointer;transition:color .2s ease}.modal-close[_ngcontent-%COMP%]:hover{color:#9ca3af}.sticky-column[_ngcontent-%COMP%]{position:sticky;right:0;background-color:#1f2937;z-index:10}.overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto;scrollbar-width:thin;scrollbar-color:#4b5563 #1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1f2937}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:3px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.group-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .group-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px 1px;font-size:.625rem}.modal-content[_ngcontent-%COMP%]{margin:0 8px;padding:16px}}.text-green[_ngcontent-%COMP%]{color:#10b981}.text-red[_ngcontent-%COMP%]{color:#ef4444}.text-yellow[_ngcontent-%COMP%]{color:#f59e0b}.text-blue[_ngcontent-%COMP%]{color:#3b82f6}.text-gray[_ngcontent-%COMP%]{color:#9ca3af}"]})}}return r})();function Ue(r,i){1&r&&(e.j41(0,"p",18)(1,"span",19),e.EFF(2,"Live Now!!"),e.k0s()())}function Ae(r,i){1&r&&(e.j41(0,"p",20)(1,"span",21),e.EFF(2,"Finished"),e.k0s()())}function Ye(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",22)(1,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,g=e.XpG();return e.Njj(g.openKnockoutModal(o.leagueId))}),e.EFF(2," Show Knockout Matches "),e.k0s()()}}const Xe=function(){return[]};function Be(r,i){if(1&r&&e.nrm(0,"app-league-groups-preview",24),2&r){const t=e.XpG(2).$implicit,n=e.XpG();e.Y8G("groups",t.groups||e.lJ4(4,Xe))("matches",n.getLeagueMatches(t.leagueId))("systemOfLeague",t.systemOfLeague)("leagueType",t.leagueType)}}function ze(r,i){if(1&r&&(e.j41(0,"div",25),e.nrm(1,"app-bracket-tree",26),e.k0s()),2&r){const t=e.XpG(2).$implicit;e.R7$(1),e.Y8G("leagueId",t.leagueId)}}function Ke(r,i){1&r&&e.nrm(0,"i",44)}function Ve(r,i){if(1&r&&(e.j41(0,"tr",35)(1,"th",36),e.DNE(2,Ke,1,0,"i",37),e.EFF(3),e.k0s(),e.j41(4,"td",38),e.EFF(5),e.k0s(),e.j41(6,"td",39),e.EFF(7),e.k0s(),e.j41(8,"td",40),e.EFF(9),e.k0s(),e.j41(10,"td",41),e.EFF(11),e.k0s(),e.j41(12,"td",42),e.EFF(13),e.k0s(),e.j41(14,"td",39),e.EFF(15),e.k0s(),e.j41(16,"td",43),e.EFF(17),e.nI1(18,"number"),e.k0s()()),2&r){const t=i.$implicit;e.Y8G("ngClass",i.index%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(2),e.Y8G("ngIf",1==t.rank),e.R7$(1),e.SpI(" ",t.rank," "),e.R7$(2),e.JRh(t.fullName),e.R7$(2),e.SpI(" ",t.points," "),e.R7$(2),e.SpI(" ",t.wins," "),e.R7$(2),e.SpI(" ",t.draws," "),e.R7$(2),e.SpI(" ",t.losses," "),e.R7$(2),e.SpI(" ",t.matchesPlayed," "),e.R7$(1),e.Y8G("ngClass",t.winRate>50?"text-green-500":"text-red-500"),e.R7$(1),e.SpI(" ",e.i5U(18,11,t.winRate,"1.2-2")," % ")}}function We(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",27)(1,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2).$implicit,g=e.XpG();return e.Njj(g.openModal(o.leagueId))}),e.EFF(2," Show Games With League "),e.k0s(),e.j41(3,"table",29)(4,"thead",30)(5,"tr",31)(6,"th",32),e.EFF(7,"Rank"),e.k0s(),e.j41(8,"th",32),e.EFF(9,"Name"),e.k0s(),e.j41(10,"th",32),e.EFF(11,"Points"),e.k0s(),e.j41(12,"th",33),e.EFF(13," Win "),e.k0s(),e.j41(14,"th",33),e.EFF(15," Draw "),e.k0s(),e.j41(16,"th",33),e.EFF(17," Loss "),e.k0s(),e.j41(18,"th",32),e.EFF(19,"Games"),e.k0s(),e.j41(20,"th",32),e.EFF(21,"Win Rate"),e.k0s()()(),e.j41(22,"tbody"),e.DNE(23,Ve,19,14,"tr",34),e.k0s()()()}if(2&r){const t=e.XpG(2).$implicit;e.R7$(23),e.Y8G("ngForOf",t.players)}}function He(r,i){if(1&r&&(e.j41(0,"div",6)(1,"h3",7),e.EFF(2),e.k0s(),e.j41(3,"p",8),e.EFF(4),e.k0s(),e.j41(5,"p",9),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"p",10),e.EFF(9," System Of League : "),e.j41(10,"span",11),e.EFF(11),e.k0s()(),e.j41(12,"p",10),e.EFF(13," Type Of League : "),e.j41(14,"span",11),e.EFF(15),e.k0s()(),e.DNE(16,Ue,3,0,"p",12),e.DNE(17,Ae,3,0,"p",13),e.DNE(18,Ye,3,0,"div",14),e.DNE(19,Be,1,5,"app-league-groups-preview",15),e.DNE(20,ze,2,1,"div",16),e.DNE(21,We,24,1,"div",17),e.k0s()),2&r){const t=e.XpG().$implicit,n=e.XpG();e.R7$(2),e.SpI(" ",t.leagueName," "),e.R7$(2),e.SpI(" ",t.leagueDescription," "),e.R7$(2),e.SpI(" Date Of League : ",e.i5U(7,13,t.createdOn,"dd - MM - yyyy")," "),e.R7$(4),e.Y8G("ngClass","text-blue-400"),e.R7$(1),e.SpI(" ",t.systemOfLeague===n.SystemOfLeague.Points?"Points ":"Classic "," "),e.R7$(3),e.Y8G("ngClass","text-blue-400"),e.R7$(1),e.SpI(" ",0===t.leagueType?"League ":1===t.leagueType?"Multi ":"Groups "," "),e.R7$(1),e.Y8G("ngIf",0==t.isFinished),e.R7$(1),e.Y8G("ngIf",1==t.isFinished),e.R7$(1),e.Y8G("ngIf",2===t.leagueType),e.R7$(1),e.Y8G("ngIf",2===t.leagueType),e.R7$(1),e.Y8G("ngIf",2===t.leagueType&&n.showKnockoutMatches),e.R7$(1),e.Y8G("ngIf",2!==t.leagueType)}}function Qe(r,i){1&r&&(e.qex(0),e.DNE(1,He,22,16,"ng-template",5),e.bVm())}function Je(r,i){if(1&r){const t=e.RV6();e.j41(0,"th",54),e.bIt("click",function(){const g=e.eBV(t).$implicit,h=e.XpG(2);return e.Njj(h.highlightColumn(g.playerId))}),e.EFF(1),e.k0s()}if(2&r){const t=i.$implicit,n=e.XpG(2);e.Y8G("ngClass",n.highlightedColumn==t.playerId?"bg-gray-500":"bg-gray-700"),e.R7$(1),e.SpI(" ",t.fullName," ")}}function Ze(r,i){1&r&&(e.j41(0,"span",61),e.EFF(1," N/A "),e.k0s())}function qe(r,i){if(1&r&&(e.qex(0),e.j41(1,"span",64),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.R7$(1),e.Y8G("ngClass",o.getMatchResult(t,n).color),e.R7$(1),e.SpI(" ",o.getMatchResult(t,n).result," ")}}function et(r,i){if(1&r&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2).$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.Y8G("ngClass",o.getClassicResult(t,n).color),e.R7$(1),e.SpI(" ",o.getClassicResult(t,n).result," ")}}function tt(r,i){if(1&r&&(e.j41(0,"span"),e.DNE(1,qe,3,2,"ng-container",62),e.DNE(2,et,2,2,"ng-template",null,63,e.C5r),e.k0s()),2&r){const t=e.sdS(3),n=e.XpG(4);e.R7$(1),e.Y8G("ngIf",n.currentModalSystemOfLeague===n.SystemOfLeague.Points)("ngIfElse",t)}}const nt=function(r){return{"shadow-lg shadow-blue-900":r}};function rt(r,i){if(1&r&&(e.j41(0,"td",58),e.DNE(1,Ze,2,0,"span",59),e.DNE(2,tt,4,2,"span",60),e.k0s()),2&r){const t=i.$implicit,n=e.XpG().$implicit,o=e.XpG(2);e.Y8G("ngClass",e.eq3(3,nt,o.highlightedColumn===t.playerId)),e.R7$(1),e.Y8G("ngIf",n.playerId===t.playerId),e.R7$(1),e.Y8G("ngIf",n.playerId!==t.playerId)}}function ot(r,i){if(1&r&&(e.j41(0,"tr",55),e.DNE(1,rt,3,5,"td",56),e.j41(2,"td",57),e.EFF(3),e.k0s()()),2&r){const t=i.$implicit,n=i.index,o=e.XpG(2);e.Y8G("ngClass",n%2==0?"bg-gray-900":"bg-gray-950"),e.R7$(1),e.Y8G("ngForOf",o.players),e.R7$(2),e.SpI(" ",t.fullName," ")}}function st(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",45),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.j41(1,"div",46),e.bIt("click",function(o){return o.stopPropagation()}),e.j41(2,"div",47)(3,"h2",48),e.EFF(4,"League Games"),e.k0s(),e.j41(5,"button",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.nrm(6,"i",50),e.k0s()(),e.j41(7,"div",27)(8,"table",29)(9,"thead",30)(10,"tr"),e.DNE(11,Je,2,2,"th",51),e.j41(12,"th",52),e.EFF(13," \u0627\u0644\u0645\u0628\u0627\u0631\u0627\u0629 "),e.k0s()()(),e.j41(14,"tbody"),e.DNE(15,ot,4,3,"tr",53),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(11),e.Y8G("ngForOf",t.players),e.R7$(4),e.Y8G("ngForOf",t.players)}}function at(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",45),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeKnockoutModal())}),e.j41(1,"div",65),e.bIt("click",function(o){return o.stopPropagation()}),e.j41(2,"div",66)(3,"h2",48),e.EFF(4,"Knockout Matches"),e.k0s(),e.j41(5,"button",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeKnockoutModal())}),e.nrm(6,"i",50),e.k0s()(),e.j41(7,"div",67),e.nrm(8,"app-bracket-tree",26),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(8),e.Y8G("leagueId",t.currentKnockoutLeagueId)}}let it=(()=>{class r{constructor(t,n){this.leagueService=t,this.toastr=n,this.leaguesRank=[],this.players=[],this.highlightedColumn=null,this.matches=[],this.LeagueId=0,this.isModalOpen=!1,this.SystemOfLeague=s.KE,this.showKnockoutMatches=!1,this.isKnockoutModalOpen=!1,this.currentKnockoutLeagueId=0,this.customOptions={loop:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["Previous","Next"],responsive:{0:{items:1},600:{items:1},1e3:{items:1}}}}ngOnInit(){this.leagueService.GetAllLeaguesRank().subscribe({next:t=>{t?this.leaguesRank=this.sortLeaguesForDisplay(t):this.toastr.error(t)},error:t=>{this.toastr.error(t.message)}})}loadData(){this.leagueService.GetAllLeaguesRank().subscribe({next:t=>{this.leaguesRank=this.sortLeaguesForDisplay(t)},error:t=>{this.toastr.error("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u0648\u0631\u064a\u0627\u062a")}})}sortLeaguesForDisplay(t){return[...t].sort((n,o)=>{const g=new Date(n.createdOn).getTime();return new Date(o.createdOn).getTime()-g})}openModal(t){this.LeagueId=t,this.isModalOpen=!0;const n=this.leaguesRank.find(o=>o.leagueId===t);n?(this.players=n.players||[],this.matches=n.matches||[],this.currentModalSystemOfLeague=n.systemOfLeague):(this.players=[],this.matches=[],this.currentModalSystemOfLeague=void 0)}closeModal(){this.isModalOpen=!1,this.LeagueId=0,this.highlightedColumn=null,this.players=[],this.matches=[]}getMatchResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-400"};const o=this.matches.find(w=>w.player1Name===t.fullName&&w.player2Name===n.fullName||w.player1Name===n.fullName&&w.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;let v="text-white";return g>h?v="text-green-600 font-bold":g<h?v="text-red-600 font-bold":g===h&&0!==g&&(v="text-yellow-400 font-bold"),{result:`${g} - ${h}`,color:v}}getClassicResult(t,n){if(t.playerId===n.playerId)return{result:"N/A",color:"text-gray-400"};const o=this.matches.find(v=>v.player1Name===t.fullName&&v.player2Name===n.fullName||v.player1Name===n.fullName&&v.player2Name===t.fullName);if(!o)return{result:"-",color:"text-gray-500"};const g=o.player1Name===t.fullName?o.score1:o.score2,h=o.player2Name===n.fullName?o.score2:o.score1;return g>h?{result:"\u0641\u0648\u0632",color:"text-green-600 font-bold"}:g<h?{result:"\u062e\u0633\u0627\u0631\u0629",color:"text-red-600 font-bold"}:g===h&&0!==g?{result:"\u062a\u0639\u0627\u062f\u0644",color:"text-yellow-400 font-bold"}:{result:"-",color:"text-gray-500"}}highlightColumn(t){this.highlightedColumn=this.highlightedColumn===t?null:t}toggleKnockoutMatches(){this.showKnockoutMatches=!this.showKnockoutMatches}openKnockoutModal(t){this.currentKnockoutLeagueId=t,this.isKnockoutModalOpen=!0}closeKnockoutModal(){this.isKnockoutModalOpen=!1}onClickOutside(t){const n=document.querySelector("table");n&&!n.contains(t.target)&&this.isModalOpen&&(this.highlightedColumn=null)}getSystemOfLeagueForLeague(t){return t?.systemOfLeague}getLeagueMatches(t){const n=this.leaguesRank.find(g=>g.leagueId===t);if(!n)return[];if(2!==n.leagueType)return n.matches||[];const o=[];return n.matches&&o.push(...n.matches),n.knockoutMatches&&o.push(...n.knockoutMatches),o}getDisplayResult(t,n,o){return o===s.KE.Classic?this.getClassicResult(t,n):this.getMatchResult(t,n)}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(c.N),e.rXU(P.tw))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-leagues"]],hostBindings:function(n,o){1&n&&e.bIt("click",function(h){return o.onClickOutside(h)},!1,e.EBC)},decls:7,vars:4,consts:[[1,"my-8"],[1,"text-2xl","font-bold","text-center","mb-4","text-white"],[3,"options"],[4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",3,"click",4,"ngIf"],["carouselSlide",""],[1,"border","rounded-lg","shadow-md","mx-auto","text-center","bg-black","bg-opacity-50","backdrop-blur-sm","container"],[1,"text-xl","font-bold","text-center","text-white","pt-2"],[1,"text-gray-300","text-center"],[1,"text-center","text-gray-300","font-bold"],[1,"text-center","text-gray-300"],[1,"font-bold",3,"ngClass"],["class","text-gray-300 text-center font-bold",4,"ngIf"],["class","text-gray-300 font-bold text-center",4,"ngIf"],["class","mt-4 text-center",4,"ngIf"],[3,"groups","matches","systemOfLeague","leagueType",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","relative overflow-x-auto shadow-md sm:rounded-lg",4,"ngIf"],[1,"text-gray-300","text-center","font-bold"],[1,"font-bold","text-green-500"],[1,"text-gray-300","font-bold","text-center"],[1,"font-bold","text-red-500"],[1,"mt-4","text-center"],[1,"px-4","py-2","bg-purple-600","hover:bg-purple-700","transition-all","text-white","rounded-lg","font-semibold",3,"click"],[3,"groups","matches","systemOfLeague","leagueType"],[1,"mt-4"],[3,"leagueId"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"my-4","px-2","bg-gray-600","hover:bg-gray-700","transition-all","text-white","py-2","rounded",3,"click"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-400"],[1,"text-xs","uppercase","bg-black","bg-opacity-50","backdrop-blur-sm","text-white"],[1,"text-center"],["scope","col",1,"px-2","py-3"],["scope","col",1,"px-2","py-3","hidden","sm:table-cell"],["class","border-b text-center border-gray-700 hover:bg-gray-600 font-bold text-sm md:text-[16px]",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-b","text-center","border-gray-700","hover:bg-gray-600","font-bold","text-sm","md:text-[16px]",3,"ngClass"],["scope","row",1,"px-2","py-4","font-medium","whitespace-nowrap","text-white","relative"],["class","fa-solid fa-crown absolute top-[50%] left-[10px] md:left-10 translate-y-[-50%]","style","color: #ffd43b",4,"ngIf"],[1,"px-2","py-4","text-white"],[1,"px-2","py-4","text-center","text-white"],[1,"px-2","py-4","text-center","text-green-500","hidden","sm:table-cell"],[1,"px-2","py-4","text-center","text-yellow-400","hidden","sm:table-cell"],[1,"px-2","py-4","text-center","text-red-500","hidden","sm:table-cell"],[1,"px-2","py-4","text-center",3,"ngClass"],[1,"fa-solid","fa-crown","absolute","top-[50%]","left-[10px]","md:left-10","translate-y-[-50%]",2,"color","#ffd43b"],[1,"fixed","inset-0","bg-black","bg-opacity-75","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","p-6","rounded-lg","shadow-lg","w-full","max-w-4xl","mx-4","max-h-[80vh]","overflow-y-auto",3,"click"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-bold","text-white"],[1,"text-white","hover:text-gray-300",3,"click"],[1,"fa-solid","fa-times","text-2xl"],["scope","col","class","px-2 py-3 text-center text-white cursor-pointer hover:bg-gray-500 transition-all min-w-[70px]",3,"ngClass","click",4,"ngFor","ngForOf"],["scope","col",1,"px-2","py-3","bg-gray-700","text-center","text-white"],["class","border-b text-center border-gray-700 hover:bg-gray-600",3,"ngClass",4,"ngFor","ngForOf"],["scope","col",1,"px-2","py-3","text-center","text-white","cursor-pointer","hover:bg-gray-500","transition-all","min-w-[70px]",3,"ngClass","click"],[1,"border-b","text-center","border-gray-700","hover:bg-gray-600",3,"ngClass"],["class","px-2 py-4 transition-all",3,"ngClass",4,"ngFor","ngForOf"],[1,"px-2","py-4","font-bold","text-white"],[1,"px-2","py-4","transition-all",3,"ngClass"],["class","font-bold text-white",4,"ngIf"],[4,"ngIf"],[1,"font-bold","text-white"],[4,"ngIf","ngIfElse"],["classicResult",""],[3,"ngClass"],[1,"bg-black","bg-opacity-50","backdrop-blur-sm","rounded-lg","shadow-lg","w-full","max-w-6xl","max-h-[80vh]","overflow-y-auto","md:overflow-hidden",3,"click"],[1,"flex","justify-between","items-center","mb-4","px-4","pt-2"],[1,"w-full"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"All Leagues"),e.k0s(),e.j41(3,"owl-carousel-o",2),e.DNE(4,Qe,2,0,"ng-container",3),e.k0s()(),e.DNE(5,st,16,2,"div",4),e.DNE(6,at,9,1,"div",4)),2&n&&(e.R7$(3),e.Y8G("options",o.customOptions),e.R7$(1),e.Y8G("ngForOf",o.leaguesRank),e.R7$(1),e.Y8G("ngIf",o.isModalOpen),e.R7$(1),e.Y8G("ngIf",o.isKnockoutModalOpen))},dependencies:[m.YU,m.Sq,m.bT,D.gU,D.NA,_,De,m.QX,m.vh]})}}return r})();function lt(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",12),e.nrm(1,"img",13),e.k0s(),e.j41(2,"div",14)(3,"i",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,g=e.XpG();return e.Njj(g.openModal(o))}),e.k0s()()}if(2&r){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("src",t,e.B4B)}}function ct(r,i){1&r&&(e.qex(0),e.DNE(1,lt,4,1,"ng-template",11),e.bVm())}function pt(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",12),e.nrm(1,"img",13),e.k0s(),e.j41(2,"div",14)(3,"i",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,g=e.XpG();return e.Njj(g.openModal(o))}),e.k0s()()}if(2&r){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("src",t,e.B4B)}}function ut(r,i){1&r&&(e.qex(0),e.DNE(1,pt,4,1,"ng-template",11),e.bVm())}function gt(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",12),e.nrm(1,"img",13),e.k0s(),e.j41(2,"div",14)(3,"i",15),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,g=e.XpG();return e.Njj(g.openModal(o))}),e.k0s()()}if(2&r){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("src",t,e.B4B)}}function dt(r,i){1&r&&(e.qex(0),e.DNE(1,gt,4,1,"ng-template",11),e.bVm())}function ht(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.j41(1,"div",17)(2,"img",18),e.bIt("click",function(o){return o.stopPropagation()}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("src",t.selectedImage,e.B4B)}}function mt(r,i){if(1&r){const t=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.j41(1,"div",17)(2,"img",19),e.bIt("click",function(o){return o.stopPropagation()}),e.k0s()()()}}let ft=(()=>{class r{constructor(){this.spellCards=["./assets/images/Spell Cards/1.jpg","./assets/images/Spell Cards/4.jpg","./assets/images/Spell Cards/5.jpg","./assets/images/Spell Cards/6.jpg","./assets/images/Spell Cards/12.jpg","./assets/images/Spell Cards/14.jpg","./assets/images/Spell Cards/15.jpg","./assets/images/Spell Cards/16.jpg","./assets/images/Spell Cards/18.jpg","./assets/images/Spell Cards/19.jpg","./assets/images/Spell Cards/20.jpg","./assets/images/Spell Cards/21.jpg","./assets/images/Spell Cards/24.jpg","./assets/images/Spell Cards/25.jpg","./assets/images/Spell Cards/26.jpg","./assets/images/Spell Cards/13.jpg","./assets/images/Spell Cards/2.jpg","./assets/images/Spell Cards/3.jpg","./assets/images/Spell Cards/7.jpg","./assets/images/Spell Cards/17.jpg","./assets/images/Spell Cards/8.jpg","./assets/images/Spell Cards/9.jpg","./assets/images/Spell Cards/10.jpg","./assets/images/Spell Cards/11.jpg","./assets/images/Spell Cards/22.jpg","./assets/images/Spell Cards/23.jpg"],this.trapCards=["./assets/images/Trap Cards/11.jpg","./assets/images/Trap Cards/2.jpg","./assets/images/Trap Cards/1.jpg","./assets/images/Trap Cards/3.jpg","./assets/images/Trap Cards/4.jpg","./assets/images/Trap Cards/5.jpg","./assets/images/Trap Cards/6.jpg","./assets/images/Trap Cards/7.jpg","./assets/images/Trap Cards/8.jpg","./assets/images/Trap Cards/9.jpg","./assets/images/Trap Cards/10.jpg","./assets/images/Trap Cards/12.jpg","./assets/images/Trap Cards/13.jpg"],this.monsters=["./assets/images/Monster/13.jpg","./assets/images/Monster/3.jpg","./assets/images/Monster/4.jpg","./assets/images/Monster/2.jpg","./assets/images/Monster/1.jpg","./assets/images/Monster/5.jpg","./assets/images/Monster/6.jpg","./assets/images/Monster/7.jpg","./assets/images/Monster/8.jpg","./assets/images/Monster/9.jpg","./assets/images/Monster/10.jpg","./assets/images/Monster/11.jpg","./assets/images/Monster/12.jpg"],this.selectedImage=null,this.isModalOpen=!1,this.isModalOpenAll=!1,this.customOptions={loop:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:3},400:{items:3},740:{items:3},940:{items:10}},nav:!0}}ngOnInit(){}openModal(t){this.selectedImage=t,this.isModalOpen=!0}openAll(){this.isModalOpenAll=!0}closeModal(){this.isModalOpen=!1,this.isModalOpenAll=!1,this.selectedImage=null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-forbidden-cards"]],decls:28,vars:8,consts:[[1,"container","mx-auto"],[1,"text-center","my-[30px]"],[1,"font-bold","fa-1","text-white"],["href","https://www.db.yugioh-card.com/yugiohdb/forbidden_limited.action","target","_blank",1,"text-blue-600","hover:text-blue-800"],[1,"text-blue-600","hover:text-blue-800","cursor-pointer",3,"click"],[1,"font-bold","fa-2xl","text-green-500","custom-outline"],[3,"options"],[4,"ngFor","ngForOf"],[1,"font-bold","text-3xl","text-rose-500","custom-outline"],[1,"font-bold","fa-2xl","text-yellow-500","custom-outline"],["class","fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",3,"click",4,"ngIf"],["carouselSlide",""],[1,"p-2","relative","transition","max-w-[150px]","cursor-pointer"],[1,"w-fit","min-h-[190px]",3,"src"],[1,"text-center"],[1,"fa-solid","fa-eye","cursor-pointer",2,"color","#fff",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","justify-center","items-center","z-50",3,"click"],[1,"relative"],[1,"max-w-[90vw]","max-h-[90vh]","object-contain","w-[400px]",3,"src","click"],["src","./assets/images/all2.png",1,"max-w-[250vw]","max-h-[250vh]","object-contain","w-[400px]","sm:w-[700px]",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3," \u0647\u0630\u0647 \u0627\u0644\u0643\u0631\u0648\u062a \u0627\u0644\u0645\u0645\u0646\u0648\u0639\u0629 \u0645\u0646 \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u0631\u0633\u0645\u064a \u0644\u0644\u0639\u0628\u0629 \u064a\u0648\u063a\u064a \u0644\u0644\u062a\u0623\u0643\u062f "),e.j41(4,"a",3),e.EFF(5," \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 "),e.k0s(),e.EFF(6," \u0644\u0644\u0630\u0647\u0627\u0628 \u0627\u0644\u064a \u0627\u0644\u0645\u0648\u0642\u0639 "),e.k0s(),e.j41(7,"h2",2),e.EFF(8," \u0644\u0639\u0631\u0636 \u0627\u0644\u0648\u0631\u0642 \u0627\u0644\u0645\u0645\u0646\u0648\u0639 \u0627\u0644\u062e\u0627\u0635 \u0628\u0646\u0633\u062e\u0629 \u062c\u0648\u064a \u0641\u0642\u0637 "),e.j41(9,"span",4),e.bIt("click",function(){return o.openAll()}),e.EFF(10," \u0627\u0636\u063a\u0637 \u0647\u0646\u0627 "),e.k0s()()(),e.j41(11,"div",1)(12,"h2",5),e.EFF(13,"Spell Cards"),e.k0s()(),e.j41(14,"owl-carousel-o",6),e.DNE(15,ct,2,0,"ng-container",7),e.k0s(),e.j41(16,"div",1)(17,"h2",8),e.EFF(18,"Trap Cards"),e.k0s()(),e.j41(19,"owl-carousel-o",6),e.DNE(20,ut,2,0,"ng-container",7),e.k0s(),e.j41(21,"div",1)(22,"h2",9),e.EFF(23,"Monsters"),e.k0s()(),e.j41(24,"owl-carousel-o",6),e.DNE(25,dt,2,0,"ng-container",7),e.k0s(),e.DNE(26,ht,3,1,"div",10),e.DNE(27,mt,3,0,"div",10),e.k0s()),2&n&&(e.R7$(14),e.Y8G("options",o.customOptions),e.R7$(1),e.Y8G("ngForOf",o.spellCards),e.R7$(4),e.Y8G("options",o.customOptions),e.R7$(1),e.Y8G("ngForOf",o.trapCards),e.R7$(4),e.Y8G("options",o.customOptions),e.R7$(1),e.Y8G("ngForOf",o.monsters),e.R7$(1),e.Y8G("ngIf",o.isModalOpen),e.R7$(1),e.Y8G("ngIf",o.isModalOpenAll))},dependencies:[m.Sq,m.bT,D.gU,D.NA],styles:[".custom-outline[_ngcontent-%COMP%]{-webkit-text-stroke:.5px white}"]})}}return r})();var bt=l(6375),G=l(4341);const _t=["messagesContainer"];function xt(r,i){if(1&r&&(e.j41(0,"div",12)(1,"div",13)(2,"p",14),e.EFF(3),e.k0s(),e.j41(4,"p",15),e.EFF(5),e.nI1(6,"date"),e.k0s()()()),2&r){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.content),e.R7$(2),e.SpI(" ",e.i5U(6,2,t.sentAt,"MMM d, y, hh:mm a")," ")}}function yt(r,i){if(1&r&&(e.j41(0,"div",16)(1,"div",17)(2,"p",14),e.EFF(3),e.k0s(),e.j41(4,"p",15),e.EFF(5),e.nI1(6,"date"),e.k0s()()()),2&r){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.content),e.R7$(2),e.SpI(" ",e.i5U(6,2,t.sentAt,"MMM d, y, hh:mm a")," ")}}function vt(r,i){if(1&r&&(e.j41(0,"div",9),e.DNE(1,xt,7,5,"div",10),e.DNE(2,yt,7,5,"div",11),e.k0s()),2&r){const t=i.$implicit;e.R7$(1),e.Y8G("ngIf",!t.isFromAdmin),e.R7$(1),e.Y8G("ngIf",t.isFromAdmin)}}const Ct=[{path:"",redirectTo:"ranking",pathMatch:"full"},{path:"league-table",component:ue},{path:"ranking",component:Fe},{path:"groups-table",component:fe},{path:"groups-matches-table",component:Y},{path:"allLeagues",component:it},{path:"forbidden",component:ft},{path:"inbox",component:(()=>{class r{constructor(t,n,o){this.messageService=t,this.toastr=n,this.cdr=o,this.messages=[],this.newMessage=""}ngOnInit(){this.loadMessages()}ngAfterViewChecked(){this.cdr.detectChanges(),this.scrollToBottom()}loadMessages(){this.messageService.getPlayerMessages().subscribe({next:t=>{t&&t.messages?(this.messages=t.messages.filter(n=>!n.isDeleted).sort((n,o)=>new Date(n.sentAt).getTime()-new Date(o.sentAt).getTime()),this.cdr.detectChanges()):this.toastr.info("\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0622\u0646")},error:t=>{this.toastr.error("\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0627\u0644\u0631\u0633\u0627\u0626\u0644")}})}sendMessage(){this.newMessage.trim()?this.messageService.sendMessage(this.newMessage).subscribe({next:t=>{t.success?(this.toastr.success("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629"),this.newMessage="",this.loadMessages(),this.cdr.detectChanges()):this.toastr.error(t.message||"\u0641\u0634\u0644 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629")},error:t=>{this.toastr.error("\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629")}}):this.toastr.warning("\u0627\u0644\u0631\u062c\u0627\u0621 \u0643\u062a\u0627\u0628\u0629 \u0631\u0633\u0627\u0644\u0629")}scrollToBottom(){if(this.messagesContainer){const t=this.messagesContainer.nativeElement;t.scrollTop=t.scrollHeight}}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(bt.b),e.rXU(P.tw),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-player-inbox"]],viewQuery:function(n,o){if(1&n&&e.GBs(_t,5),2&n){let g;e.mGM(g=e.lsd())&&(o.messagesContainer=g.first)}},decls:10,vars:3,consts:[[1,"container","mx-auto","p-4","overflow-hidden"],[1,"flex","flex-col","h-full","bg-transparent"],[1,"flex-1","p-4","overflow-y-auto","max-h-[calc(100vh-200px)]"],["messagesContainer",""],["class","mb-4",4,"ngFor","ngForOf"],[1,"p-4","bg-transparent","border-t","border-gray-700"],[1,"flex","items-center","gap-2",3,"ngSubmit"],["type","text","name","newMessage","placeholder","Write Your Message...",1,"flex-1","p-2","bg-black","bg-opacity-50","text-white","border","border-gray-700","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-gray-300","placeholder-gray-400",3,"ngModel","ngModelChange"],["type","submit",1,"bg-gray-800","text-white","p-2","rounded-lg","hover:bg-gray-700","disabled:bg-gray-600",3,"disabled"],[1,"mb-4"],["class","flex justify-end",4,"ngIf"],["class","flex justify-start",4,"ngIf"],[1,"flex","justify-end"],[1,"max-w-xs","bg-green-500","bg-opacity-50","text-white","rounded-lg","p-3","shadow-md","backdrop-blur-sm"],[1,"text-sm"],[1,"text-xs","mt-1","text-gray-300"],[1,"flex","justify-start"],[1,"max-w-xs","bg-gray-300","bg-opacity-50","text-white","rounded-lg","p-3","shadow-md","backdrop-blur-sm"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2,3),e.DNE(4,vt,3,2,"div",4),e.k0s(),e.j41(5,"div",5)(6,"form",6),e.bIt("ngSubmit",function(){return o.sendMessage()}),e.j41(7,"input",7),e.bIt("ngModelChange",function(h){return o.newMessage=h}),e.k0s(),e.j41(8,"button",8),e.EFF(9," Send "),e.k0s()()()()()),2&n&&(e.R7$(4),e.Y8G("ngForOf",o.messages),e.R7$(3),e.Y8G("ngModel",o.newMessage),e.R7$(1),e.Y8G("disabled",!o.newMessage))},dependencies:[m.Sq,m.bT,G.qT,G.me,G.BC,G.cb,G.vS,G.cV,m.vh]})}}return r})()}];let kt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[y.iI.forChild(Ct),y.iI]})}}return r})();var Mt=l(3887);let wt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[m.MD,kt,M.q1,G.YN,D.Rl,Mt.G,_]})}}return r})()},3887:(F,k,l)=>{"use strict";l.d(k,{G:()=>s});var m=l(177),y=l(8699);let s=(()=>{class e{static{this.\u0275fac=function(P){return new(P||e)}}static{this.\u0275mod=y.$C({type:e})}static{this.\u0275inj=y.G2t({imports:[m.MD]})}}return e})()},5312:(F,k,l)=>{"use strict";l.d(k,{c:()=>y});const y={production:!1,apiUrl:"https://yugiapp.runasp.net/api"}},3040:(F,k,l)=>{"use strict";var m=l(345),y=l(9834),s=l(8699),e=l(8010);const C=[{path:"",redirectTo:"player",pathMatch:"full"},{path:"player",loadChildren:()=>Promise.resolve().then(l.bind(l,1496)).then(u=>u.PlayerModule)},{path:"auth",loadChildren:()=>l.e(949).then(l.bind(l,949)).then(u=>u.AuthModule)},{path:"admin",loadChildren:()=>l.e(840).then(l.bind(l,9840)).then(u=>u.AdminModule),canActivate:[(u,j)=>((0,s.WQX)(e.u),!!localStorage.getItem("token"))]},{path:"**",redirectTo:"player"}];let P=(()=>{class u{static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275mod=s.$C({type:u})}static{this.\u0275inj=s.G2t({imports:[y.iI.forRoot(C),y.iI]})}}return u})();var c=l(177);let f=(()=>{class u{optimizeImageLoading(a){return`${a}?optimize=true&quality=85`}getOptimizedImageFormat(a){return this.checkWebPSupport()?a.replace(/\.(jpg|jpeg|png)$/i,".webp"):a}checkWebPSupport(){const a=document.createElement("canvas");return a.width=1,a.height=1,0===a.toDataURL("image/webp").indexOf("data:image/webp")}preloadCriticalImages(a){a.forEach(p=>{(new Image).src=this.optimizeImageLoading(p)})}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),b=(()=>{class u{getIconClass(a,p="fas"){return`${p} fa-${a}`}getUsedIcons(){return["user","sign-out-alt","trophy","users","envelope","calendar","clock","check","times","edit","trash","plus","minus","arrow-left","arrow-right","home","cog","search"]}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();var x=l(1413),M=l(4412),E=l(152),N=l(3294),L=l(5964),U=l(6354),B=l(6977);let z=(()=>{class u{createOptimizedSubject(){return new x.B}createOptimizedBehaviorSubject(a){return new M.t(a)}optimizeObservable(a,p){return p.reduce((d,_)=>_(d),a)}debounceOptimized(a,p){return a.pipe((0,E.B)(p),(0,N.F)())}filterOptimized(a,p){return a.pipe((0,L.p)(p))}mapOptimized(a,p){return a.pipe((0,U.T)(p))}takeUntilOptimized(a,p){return a.pipe((0,B.Q)(p))}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();var $=l(467);let K=(()=>{class u{loadComponentLazy(a){return(0,$.A)(function*(){try{return yield l(3402)(a)}catch(p){throw console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0643\u0648\u0646:",p),p}})()}loadServiceLazy(a){return(0,$.A)(function*(){try{return yield l(3402)(a)}catch(p){throw console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u062e\u062f\u0645\u0629:",p),p}})()}preloadImages(a){const p=a.map(d=>new Promise((_,T)=>{const I=new Image;I.onload=()=>_(d),I.onerror=()=>T(new Error(`\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0635\u0648\u0631\u0629: ${d}`)),I.src=d}));Promise.all(p).then(()=>console.log("\u062a\u0645 \u062a\u062d\u0645\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0648\u0631 \u0628\u0646\u062c\u0627\u062d")).catch(d=>console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0635\u0648\u0631:",d))}loadCssLazy(a){return new Promise((p,d)=>{const _=document.createElement("link");_.rel="stylesheet",_.href=a,_.onload=()=>p(),_.onerror=()=>d(new Error(`\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 CSS: ${a}`)),document.head.appendChild(_)})}loadScriptLazy(a){return new Promise((p,d)=>{const _=document.createElement("script");_.src=a,_.onload=()=>p(),_.onerror=()=>d(new Error(`\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 JavaScript: ${a}`)),document.head.appendChild(_)})}clearCache(){"caches"in window&&caches.keys().then(a=>{a.forEach(p=>{caches.delete(p)})})}optimizeLocalStorage(){Object.keys(localStorage).forEach(p=>{try{const d=localStorage.getItem(p);if(d&&d.length>1e3){const _=this.compressData(d);localStorage.setItem(p,_)}}catch(d){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0633\u064a\u0646 localStorage:",d)}})}compressData(a){return btoa(a)}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),V=(()=>{class u{loadCssLazy(a){return new Promise((p,d)=>{if(document.querySelector(`link[href="${a}"]`))return void p();const _=document.createElement("link");_.rel="stylesheet",_.href=a,_.onload=()=>p(),_.onerror=()=>d(new Error(`\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 CSS: ${a}`)),document.head.appendChild(_)})}removeUnusedCss(){[".unused-class",".deprecated-style",".old-version"].forEach(p=>{document.querySelectorAll(p).forEach(_=>{_.classList.remove(p.substring(1))})})}optimizeFontAwesome(){const p=document.createElement("style");p.textContent=["fa-user","fa-trophy","fa-users","fa-envelope","fa-calendar","fa-clock","fa-check","fa-times","fa-edit","fa-trash","fa-plus","fa-minus","fa-arrow-left","fa-arrow-right","fa-home","fa-cog","fa-search"].map(d=>`\n      .${d}::before {\n        font-family: "Font Awesome 6 Free";\n        font-weight: 900;\n      }\n    `).join(""),document.head.appendChild(p)}optimizeTailwindCss(){const p=document.createElement("style");p.textContent="\n      /* \u062a\u062d\u0633\u064a\u0646\u0627\u062a Tailwind CSS */\n      .container {\n        max-width: 1200px;\n        margin: 0 auto;\n        padding: 0 1rem;\n      }\n\n      .btn {\n        @apply px-4 py-2 rounded font-medium transition-colors;\n      }\n\n      .btn-primary {\n        @apply bg-blue-600 text-white hover:bg-blue-700;\n      }\n\n      .btn-secondary {\n        @apply bg-gray-600 text-white hover:bg-gray-700;\n      }\n    ",document.head.appendChild(p)}compressCss(a){return a.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/;\s*}/g,"}").replace(/:\s+/g,":").replace(/;\s+/g,";").trim()}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})(),W=(()=>{class u{constructor(a,p,d,_,T,I){this.platformId=a,this.imageOptimization=p,this.iconService=d,this.rxjsOptimization=_,this.bundleOptimization=T,this.cssOptimization=I}applyAllOptimizations(){(0,c.UE)(this.platformId)&&(this.optimizeImages(),this.optimizeIcons(),this.optimizeCss(),this.optimizeBundle(),this.optimizeMemory(),this.optimizeNetwork())}optimizeImages(){this.imageOptimization.preloadCriticalImages(["assets/images/all2.png","assets/images/coming.jpg","assets/images/comingSoon.jpg"]),document.querySelectorAll("img").forEach(d=>{const _=d.getAttribute("src");_&&(d.setAttribute("src",this.imageOptimization.optimizeImageLoading(_)),d.setAttribute("loading","lazy"))})}optimizeIcons(){this.cssOptimization.optimizeFontAwesome();const a=this.iconService.getUsedIcons();console.log("\u0627\u0644\u0623\u064a\u0642\u0648\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629:",a)}optimizeCss(){this.cssOptimization.optimizeTailwindCss(),this.cssOptimization.removeUnusedCss()}optimizeBundle(){this.bundleOptimization.clearCache(),this.bundleOptimization.optimizeLocalStorage()}optimizeMemory(){if("memory"in performance){const a=performance.memory;console.log("\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0630\u0627\u0643\u0631\u0629:",{used:a.usedJSHeapSize,total:a.totalJSHeapSize,limit:a.jsHeapSizeLimit})}this.cleanupUnusedVariables()}optimizeNetwork(){this.enableGzipCompression(),this.optimizeCaching()}cleanupUnusedVariables(){if(window.performance&&window.performance.memory){const a=window.performance.memory;a.usedJSHeapSize>.8*a.jsHeapSizeLimit&&console.warn("\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0630\u0627\u0643\u0631\u0629 \u0645\u0631\u062a\u0641\u0639\u060c \u064a\u062a\u0645 \u062a\u0646\u0638\u064a\u0641 \u0627\u0644\u0630\u0627\u0643\u0631\u0629...")}}enableGzipCompression(){const a=document.createElement("meta");a.setAttribute("http-equiv","Accept-Encoding"),a.setAttribute("content","gzip, deflate, br"),document.head.appendChild(a)}optimizeCaching(){console.log("\u062a\u0645 \u062a\u0637\u0628\u064a\u0642 \u062a\u062d\u0633\u064a\u0646\u0627\u062a \u0627\u0644\u062a\u062e\u0632\u064a\u0646 \u0627\u0644\u0645\u0624\u0642\u062a")}monitorPerformance(){(0,c.UE)(this.platformId)&&(this.monitorCoreWebVitals(),this.monitorMemoryUsage(),this.monitorNetworkSpeed())}monitorCoreWebVitals(){new PerformanceObserver(a=>{const p=a.getEntries();console.log("LCP:",p[p.length-1].startTime)}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(a=>{a.getEntries().forEach(d=>{console.log("FID:",d.processingStart-d.startTime)})}).observe({entryTypes:["first-input"]}),new PerformanceObserver(a=>{let p=0;a.getEntries().forEach(_=>{_.hadRecentInput||(p+=_.value)}),console.log("CLS:",p)}).observe({entryTypes:["layout-shift"]})}monitorMemoryUsage(){"memory"in performance&&setInterval(()=>{const a=performance.memory,p=a.usedJSHeapSize/a.jsHeapSizeLimit*100;p>80&&console.warn("\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0630\u0627\u0643\u0631\u0629 \u0645\u0631\u062a\u0641\u0639:",p.toFixed(2)+"%")},3e4)}monitorNetworkSpeed(){if("connection"in navigator){const a=navigator.connection;console.log("\u0633\u0631\u0639\u0629 \u0627\u0644\u0634\u0628\u0643\u0629:",{effectiveType:a.effectiveType,downlink:a.downlink,rtt:a.rtt})}}static{this.\u0275fac=function(p){return new(p||u)(s.KVO(s.Agw),s.KVO(f),s.KVO(b),s.KVO(z),s.KVO(K),s.KVO(V))}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})();var S=l(6554),A=l(5794),H=l(5716);function Q(u,j){1&u&&(s.j41(0,"a",27),s.EFF(1," YuGi Tournament "),s.k0s())}function J(u,j){1&u&&(s.j41(0,"a",28),s.EFF(1," Admin Dashboard "),s.k0s())}function Z(u,j){1&u&&(s.j41(0,"a",29),s.EFF(1," Inbox "),s.k0s())}function q(u,j){1&u&&(s.j41(0,"a",30),s.EFF(1," Inbox "),s.k0s())}function ee(u,j){1&u&&(s.qex(0),s.j41(1,"a",31),s.EFF(2," Login "),s.k0s(),s.j41(3,"a",32),s.EFF(4," Register "),s.k0s(),s.bVm())}function Y(u,j){if(1&u){const a=s.RV6();s.j41(0,"a",33),s.bIt("click",function(){s.eBV(a);const d=s.XpG();return s.Njj(d.logout())}),s.EFF(1," Logout "),s.k0s()}}function te(u,j){if(1&u){const a=s.RV6();s.qex(0),s.j41(1,"a",34),s.bIt("click",function(){s.eBV(a);const d=s.XpG();return s.Njj(d.closeMenu())}),s.EFF(2," Login "),s.k0s(),s.j41(3,"a",35),s.bIt("click",function(){s.eBV(a);const d=s.XpG();return s.Njj(d.closeMenu())}),s.EFF(4," Register "),s.k0s(),s.bVm()}}function ne(u,j){if(1&u){const a=s.RV6();s.j41(0,"a",33),s.bIt("click",function(){s.eBV(a);const d=s.XpG();return d.logout(),s.Njj(d.closeMenu())}),s.EFF(1," Logout "),s.k0s()}}function re(u,j){if(1&u&&(s.j41(0,"div",38)(1,"h4",39),s.EFF(2),s.k0s()()),2&u){const a=j.$implicit;s.R7$(2),s.JRh(a.content)}}function oe(u,j){if(1&u&&(s.j41(0,"div",36),s.DNE(1,re,3,1,"div",37),s.k0s()),2&u){const a=s.XpG();s.R7$(1),s.Y8G("ngForOf",a.notes)}}const se=function(u,j){return{block:u,hidden:j}};let ae=(()=>{class u{constructor(a,p,d,_){this.authService=a,this.router=p,this.toastr=d,this.noteService=_,this.isLoggedIn=!1,this.isAdmin=!1,this.notes=[],this.isMenuOpen=!1,this.authService.isLoggedIn$.subscribe(T=>{this.isLoggedIn=T;const I=this.authService.getRole();this.isAdmin="Admin"===I})}ngOnInit(){this.getNotes()}logout(){this.authService.logout(),this.toastr.success("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c \u0628\u0646\u062c\u0627\u062d"),this.router.navigate(["/player"])}getNotes(){this.noteService.getNotes().subscribe(a=>{this.notes=a.notes.filter(p=>0==p.isHidden)})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}static{this.\u0275fac=function(p){return new(p||u)(s.rXU(e.u),s.rXU(y.Ix),s.rXU(A.tw),s.rXU(H.i))}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-navbar"]],decls:37,vars:13,consts:[[1,"fixed","top-0","left-0","w-full","z-50","bg-black","backdrop-blur-sm","transition-all","duration-300","p-2"],[1,"container","mx-auto","flex","flex-col","md:flex-row","md:items-center","md:justify-between","p-4"],[1,"w-full","flex","items-center","justify-between","md:gap-4"],[1,"flex","items-center","gap-4"],["class","text-xl font-bold bg-gradient-to-r from-indigo-400 to-cyan-400 text-transparent bg-clip-text",4,"ngIf"],["routerLink","/admin/players","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white","class","text-white hover:text-gray-300 hover:bg-gray-700 transition rounded py-2 px-2 font-bold",4,"ngIf"],["routerLink","/player/inbox","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white","class","md:hidden font-bold text-white hover:text-gray-300 hover:bg-gray-700 transition rounded py-2 px-2 cursor-pointer",4,"ngIf"],[1,"hidden","md:flex","justify-center","space-x-2","font-bold"],["routerLink","/player/forbidden","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],["routerLink","/player/allLeagues","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],["routerLink","/player/league-table","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],["routerLink","/player/ranking","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],[1,"hidden","md:flex","justify-end","items-center","space-x-4"],["routerLink","/player/inbox","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white","class","text-white font-bold hover:text-gray-300 hover:bg-gray-700 transition rounded py-2 px-2 cursor-pointer",4,"ngIf"],[4,"ngIf"],["class","text-white hover:text-gray-300 hover:bg-gray-700 transition rounded py-2 px-2 cursor-pointer",3,"click",4,"ngIf"],[1,"md:hidden"],[1,"text-white","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 12h16M4 18h16"],[1,"w-full","mt-4","md:hidden",3,"ngClass"],[1,"flex","flex-col","space-y-2","font-bold","text-center"],["routerLink","/player/forbidden","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],["routerLink","/player/allLeagues","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],["routerLink","/player/league-table","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],["routerLink","/player/ranking","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],["class","min-h-[30px] w-full mt-16",4,"ngIf"],[1,"text-xl","font-bold","bg-gradient-to-r","from-indigo-400","to-cyan-400","text-transparent","bg-clip-text"],["routerLink","/admin/players","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2","font-bold"],["routerLink","/player/inbox","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"md:hidden","font-bold","text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2","cursor-pointer"],["routerLink","/player/inbox","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","font-bold","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2","cursor-pointer"],["routerLink","/auth/login","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],["routerLink","/auth/register","routerLinkActive","!text-indigo-300 bg-white/10 border-b-2 border-white",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2"],[1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2","cursor-pointer",3,"click"],["routerLink","/auth/login",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],["routerLink","/auth/register",1,"text-white","hover:text-gray-300","hover:bg-gray-700","transition","rounded","py-2","px-2",3,"click"],[1,"min-h-[30px]","w-full","mt-16"],["class","",4,"ngFor","ngForOf"],[1,""],[1,"text-center","text-[20px]","text-white","font-bold"]],template:function(p,d){1&p&&(s.j41(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3),s.DNE(4,Q,2,0,"a",4),s.DNE(5,J,2,0,"a",5),s.DNE(6,Z,2,0,"a",6),s.k0s(),s.j41(7,"div",7)(8,"a",8),s.EFF(9," Forbidden Cards "),s.k0s(),s.j41(10,"a",9),s.EFF(11," All Leagues "),s.k0s(),s.j41(12,"a",10),s.EFF(13," League Table "),s.k0s(),s.j41(14,"a",11),s.EFF(15," Ranking "),s.k0s()(),s.j41(16,"div",12),s.DNE(17,q,2,0,"a",13),s.DNE(18,ee,5,0,"ng-container",14),s.DNE(19,Y,2,0,"a",15),s.k0s(),s.j41(20,"div",16)(21,"button",17),s.bIt("click",function(){return d.toggleMenu()}),s.qSk(),s.j41(22,"svg",18),s.nrm(23,"path",19),s.k0s()()()(),s.joV(),s.j41(24,"div",20)(25,"div",21)(26,"a",22),s.bIt("click",function(){return d.closeMenu()}),s.EFF(27," Forbidden Cards "),s.k0s(),s.j41(28,"a",23),s.bIt("click",function(){return d.closeMenu()}),s.EFF(29," All Leagues "),s.k0s(),s.j41(30,"a",24),s.bIt("click",function(){return d.closeMenu()}),s.EFF(31," League Table "),s.k0s(),s.j41(32,"a",25),s.bIt("click",function(){return d.closeMenu()}),s.EFF(33," Ranking "),s.k0s(),s.DNE(34,te,5,0,"ng-container",14),s.DNE(35,ne,2,0,"a",15),s.k0s()()()(),s.DNE(36,oe,2,1,"div",26)),2&p&&(s.R7$(4),s.Y8G("ngIf",!d.isAdmin),s.R7$(1),s.Y8G("ngIf",d.isAdmin),s.R7$(1),s.Y8G("ngIf",d.isLoggedIn&&!d.isAdmin),s.R7$(11),s.Y8G("ngIf",d.isLoggedIn&&!d.isAdmin),s.R7$(1),s.Y8G("ngIf",!d.isLoggedIn),s.R7$(1),s.Y8G("ngIf",d.isLoggedIn),s.R7$(5),s.Y8G("ngClass",s.l_i(10,se,d.isMenuOpen,!d.isMenuOpen)),s.R7$(10),s.Y8G("ngIf",!d.isLoggedIn),s.R7$(1),s.Y8G("ngIf",d.isLoggedIn),s.R7$(1),s.Y8G("ngIf",d.notes.length>0))},dependencies:[c.YU,c.Sq,c.bT,y.Wk,y.wQ],styles:[".navbar[_ngcontent-%COMP%]{position:relative;z-index:9999;background:linear-gradient(135deg,rgba(15,23,42,.95),rgba(30,41,59,.95));-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.1);box-shadow:0 4px 20px #0000004d;transition:all .3s ease}nav[_ngcontent-%COMP%]{position:fixed!important;z-index:9999!important;width:100%;top:0;left:0;background:linear-gradient(135deg,rgba(15,23,42,.98),rgba(30,41,59,.98));-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);border-bottom:2px solid rgba(59,130,246,.3);box-shadow:0 8px 40px #0006}.navbar-brand[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#fff!important;text-decoration:none;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;transition:all .3s ease;text-shadow:0 2px 4px rgba(0,0,0,.3)}.navbar-brand[_ngcontent-%COMP%]:hover{transform:scale(1.05);filter:brightness(1.2)}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#e2e8f0!important;font-weight:500;padding:10px 16px!important;margin:0 4px;border-radius:8px;transition:all .3s ease;position:relative;text-decoration:none}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fff!important;background:rgba(59,130,246,.2);transform:translateY(-2px);box-shadow:0 4px 15px #3b82f64d}.navbar-nav[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff!important;background:linear-gradient(135deg,#3b82f6,#1d4ed8);box-shadow:0 4px 15px #3b82f666}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block;animation:_ngcontent-%COMP%_fadeInDown .3s ease}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-menu[_ngcontent-%COMP%]{background:rgba(15,23,42,.95);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:12px;box-shadow:0 8px 40px #0006;margin-top:8px}.dropdown-item[_ngcontent-%COMP%]{color:#e2e8f0!important;padding:12px 20px;transition:all .3s ease;border-radius:8px;margin:4px 8px;font-weight:500}.dropdown-item[_ngcontent-%COMP%]:hover{color:#fff!important;background:linear-gradient(135deg,#3b82f6,#1d4ed8);transform:translate(5px)}.navbar-toggler[_ngcontent-%COMP%]{border:none;padding:4px 8px;border-radius:8px;background:rgba(59,130,246,.2);transition:all .3s ease}.navbar-toggler[_ngcontent-%COMP%]:hover{background:rgba(59,130,246,.4);transform:scale(1.05)}.navbar-toggler-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e\")}.search-box[_ngcontent-%COMP%]{position:relative;max-width:300px}.search-input[_ngcontent-%COMP%]{background:rgba(0,0,0,.3);border:2px solid rgba(255,255,255,.2);border-radius:25px;color:#fff;padding:8px 40px 8px 16px;transition:all .3s ease;width:100%}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 20px #3b82f64d;background:rgba(0,0,0,.5)}.search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#94a3b8;pointer-events:none}.user-avatar[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:2px solid rgba(59,130,246,.5);transition:all .3s ease}.user-avatar[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 0 15px #3b82f680;transform:scale(1.1)}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border-radius:50%;width:20px;height:20px;font-size:.75rem;display:flex;align-items:center;justify-content:center;font-weight:700;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}@media (max-width: 768px){.navbar-brand[_ngcontent-%COMP%]{font-size:1.5rem}.navbar-nav[_ngcontent-%COMP%]{background:rgba(15,23,42,.98);border-radius:12px;margin:10px;padding:10px;box-shadow:0 8px 40px #0006}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin:4px 0;text-align:center}.search-box[_ngcontent-%COMP%]{margin:10px;max-width:none}}@media (max-width: 480px){.navbar-brand[_ngcontent-%COMP%]{font-size:1.3rem}.navbar-nav[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:8px 12px!important;font-size:.9rem}}.navbar-glow[_ngcontent-%COMP%]{position:relative}.navbar-glow[_ngcontent-%COMP%]:before{content:\"\";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(59,130,246,.8),transparent);animation:_ngcontent-%COMP%_shimmer 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{opacity:0}50%{opacity:1}to{opacity:0}}.btn-navbar[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:20px;font-weight:600;text-decoration:none;transition:all .3s ease;margin:0 4px}.btn-navbar-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff}.btn-navbar-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#2563eb,#1e40af);transform:translateY(-2px);box-shadow:0 8px 25px #3b82f666}.btn-navbar-outline[_ngcontent-%COMP%]{background:transparent;color:#3b82f6;border:2px solid #3b82f6}.btn-navbar-outline[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff;transform:translateY(-2px);box-shadow:0 8px 25px #3b82f64d}"]})}}return u})(),ie=(()=>{class u{constructor(a){this.performanceOptimization=a,this.title="YugiTournamnet"}ngOnInit(){this.performanceOptimization.applyAllOptimizations(),this.performanceOptimization.monitorPerformance()}static{this.\u0275fac=function(p){return new(p||u)(s.rXU(W))}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-root"]],decls:6,vars:1,consts:[[1,"mt-[10px]","min-h-[calc(100vh-0px)]"],["bdColor","rgba(0, 0, 0, 1)","size","medium","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"]],template:function(p,d){1&p&&(s.nrm(0,"app-navbar"),s.j41(1,"div",0),s.nrm(2,"router-outlet"),s.k0s(),s.j41(3,"ngx-spinner",1)(4,"p",2),s.EFF(5,"Loading..."),s.k0s()()),2&p&&(s.R7$(3),s.Y8G("fullScreen",!0))},dependencies:[y.n3,S.et,ae]})}}return u})();var R=l(1626),le=l(728),ce=l(980);let pe=(()=>{class u{constructor(a){this.spinner=a}intercept(a,p){this.spinner.show();const d=localStorage.getItem("token");let _=a;return d&&(_=a.clone({setHeaders:{Authorization:`Bearer ${d}`}})),p.handle(_).pipe((0,ce.j)(()=>{this.spinner.hide()}))}static{this.\u0275fac=function(p){return new(p||u)(s.KVO(S.ex))}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac})}}return u})();var ue=l(7673),ge=l(5430);let de=(()=>{class u{constructor(a){this.cacheService=a}intercept(a,p){if("GET"===a.method&&this.shouldCache(a.url)){const d=this.cacheService.get(a.url);if(d)return(0,ue.of)(new R.cS({body:d}))}return p.handle(a)}shouldCache(a){return["/player/ranking","/player","/match","/Message/inbox","/note/notes","/player/players/all","/league/getCurrentLeague"].some(d=>a.includes(d))}static{this.\u0275fac=function(p){return new(p||u)(s.KVO(ge._))}}static{this.\u0275prov=s.jDH({token:u,factory:u.\u0275fac})}}return u})();var he=l(1496);let me=(()=>{class u{static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275mod=s.$C({type:u,bootstrap:[ie]})}static{this.\u0275inj=s.G2t({providers:[{provide:R.a7,useClass:pe,multi:!0},{provide:R.a7,useClass:de,multi:!0},S.PO],imports:[m.Bb,P,R.q1,le.wb,A._B.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0}),he.PlayerModule,S.PO.forRoot({type:"square-jelly-box"})]})}}return u})();m.sG().bootstrapModule(me).catch(u=>console.error(u))},3402:F=>{function k(l){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+l+"'");throw m.code="MODULE_NOT_FOUND",m})}k.keys=()=>[],k.resolve=k,k.id=3402,F.exports=k}},F=>{F.O(0,[502],()=>F(F.s=3040)),F.O()}]);